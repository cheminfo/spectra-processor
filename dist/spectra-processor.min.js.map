{"version":3,"file":"spectra-processor.min.js","sources":["../node_modules/is-any-array/src/index.js","../node_modules/median-quickselect/lib/median-quickselect.min.js","../node_modules/ml-array-median/lib-es6/index.js","../node_modules/ml-spectra-processing/src/x/xMultiply.js","../node_modules/ml-spectra-processing/src/x/xBoxPlot.js","../node_modules/ml-spectra-processing/src/x/xCorrelation.js","../node_modules/ml-spectra-processing/src/x/xFindClosestIndex.js","../node_modules/ml-spectra-processing/src/x/xGetFromToIndex.js","../node_modules/d3-array/build/d3-array.js","../node_modules/ml-spectra-processing/src/x/xSubtract.js","../node_modules/ml-spectra-processing/node_modules/is-any-array/src/index.js","../node_modules/ml-spectra-processing/src/xy/xyCheck.js","../node_modules/ml-spectra-processing/src/xy/xyIntegration.js","../node_modules/ml-spectra-processing/src/xy/xyMaxYPoint.js","../node_modules/ml-spectra-processing/src/xy/xyMinYPoint.js","../node_modules/chroma-js/chroma.js","../node_modules/ml-array-xy-filter-x/src/index.js","../node_modules/ml-array-xy-filter-x/src/getZones.js","../src/jsgraph/getBoxPlotAnnotations.js","../src/spectra/getBoxPlotData.js","../src/jsgraph/addChartDataStyle.js","../src/spectra/getNormalizedData.js","../src/metadata/getCategoriesStats.js","../node_modules/jcampconverter/src/complexChromatogram.js","../node_modules/jcampconverter/src/convertToFloatArray.js","../node_modules/jcampconverter/src/parse/fastParseXYData.js","../node_modules/jcampconverter/src/parse/parsePeakTable.js","../node_modules/jcampconverter/src/parse/parseXYA.js","../node_modules/jcampconverter/src/2d/add2D.js","../node_modules/jcampconverter/src/2d/convertTo3DZ.js","../node_modules/jcampconverter/src/2d/generateContourLines.js","../node_modules/ml-array-max/lib-es6/index.js","../node_modules/ml-array-min/lib-es6/index.js","../node_modules/ml-array-rescale/lib-es6/index.js","../node_modules/ml-matrix/src/inspect.js","../node_modules/ml-matrix/src/util.js","../node_modules/ml-matrix/src/matrix.js","../node_modules/ml-matrix/src/stat.js","../node_modules/ml-matrix/src/mathOperations.js","../node_modules/ml-fft/src/fftlib.js","../node_modules/nmr-processing/src/constants/gyromagneticRatio.js","../node_modules/jcampconverter/src/profiling.js","../node_modules/jcampconverter/src/simpleChromatogram.js","../node_modules/jcampconverter/src/postProcessing.js","../node_modules/jcampconverter/src/postProcessingNMR.js","../node_modules/jcampconverter/src/prepareNtuplesDatatable.js","../node_modules/jcampconverter/src/prepareSpectrum.js","../node_modules/jcampconverter/src/convert.js","../src/Kinds.js","../src/parser/jcamp.js","../node_modules/xy-parser/src/index.js","../node_modules/ml-arrayxy-uniquex/src/index.js","../src/spectra/scaled/getFromToIndex.js","../node_modules/ml-regression-base/src/maybeToPrecision.js","../node_modules/ml-regression-base/src/index.js","../node_modules/ml-regression-simple-linear/src/index.js","../node_modules/ml-regression-base/src/checkArrayLength.js","../src/spectra/getScaledData.js","../src/spectra/scaled/min.js","../src/spectra/scaled/max.js","../src/spectra/scaled/minMax.js","../src/spectra/scaled/range.js","../node_modules/ml-stat/array.js","../node_modules/ml-array-normed/node_modules/is-any-array/src/index.js","../node_modules/ml-array-sum/lib-es6/index.js","../node_modules/ml-array-normed/lib-es6/index.js","../node_modules/ml-array-sequential-fill/lib-es6/index.js","../node_modules/ml-zones/src/normalize.js","../node_modules/ml-array-xy-equally-spaced/src/integral.js","../node_modules/ml-array-xy-equally-spaced/src/index.js","../node_modules/ml-zones/src/invert.js","../node_modules/ml-zones/src/zonesWithPoints.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSlot.js","../node_modules/ml-array-xy-equally-spaced/src/equallySpacedSmooth.js","../src/spectrum/Spectrum.js","../src/spectrum/getData.js","../src/spectrum/getNormalized.js","../src/spectrum/updateRangesInfo.js","../src/SpectraProcessor.js","../src/jsgraph/getNormalizationAnnotations.js","../src/spectra/getAutocorrelation.js","../src/spectra/getMeanData.js","../src/spectra/getNormalizedText.js","../src/parser/text.js","../src/metadata/getMetadata.js","../src/metadata/getClasses.js","../src/jsgraph/getChart.js","../src/jsgraph/getAutocorrelationChart.js","../src/jsgraph/getTrackAnnotation.js","../src/jsgraph/getNormalizedChart.js","../src/jsgraph/getScaledChart.js","../src/parser/matrix.js","../src/jsgraph/getFilterAnnotations.js"],"sourcesContent":["'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","(function(){function a(d){for(var e=0,f=d.length-1,g=void 0,h=void 0,i=void 0,j=c(e,f);!0;){if(f<=e)return d[j];if(f==e+1)return d[e]>d[f]&&b(d,e,f),d[j];for(g=c(e,f),d[g]>d[f]&&b(d,g,f),d[e]>d[f]&&b(d,e,f),d[g]>d[e]&&b(d,g,e),b(d,g,e+1),h=e+1,i=f;!0;){do h++;while(d[e]>d[h]);do i--;while(d[i]>d[e]);if(i<h)break;b(d,h,i)}b(d,e,i),i<=j&&(e=h),i>=j&&(f=i-1)}}var b=function b(d,e,f){var _ref;return _ref=[d[f],d[e]],d[e]=_ref[0],d[f]=_ref[1],_ref},c=function c(d,e){return~~((d+e)/2)};'undefined'!=typeof module&&module.exports?module.exports=a:window.median=a})();\n","import isArray from 'is-any-array';\nimport quickSelectMedian from 'median-quickselect';\n\n/**\n * Computes the median of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction median(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  return quickSelectMedian(input.slice());\n}\n\nexport default median;\n","/**\r\n\r\n/**\r\n * This function xMultiply the first array by the second array or a constant value to each element of the first array\r\n * @param {Array} array1 - the array that will be rotated\r\n * @param {Array|Number} array2\r\n * @return {Float64Array}\r\n */\r\nexport function xMultiply(array1, array2) {\r\n  let isConstant = false;\r\n  let constant;\r\n  if (Array.isArray(array2)) {\r\n    if (array1.length !== array2.length) {\r\n      throw new Error('sub: size of array1 and array2 must be identical');\r\n    }\r\n  } else {\r\n    isConstant = true;\r\n    constant = Number(array2);\r\n  }\r\n\r\n  let array3 = new Float64Array(array1.length);\r\n  if (isConstant) {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      array3[i] = array1[i] * constant;\r\n    }\r\n  } else {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      array3[i] = array1[i] * array2[i];\r\n    }\r\n  }\r\n\r\n  return array3;\r\n}\r\n","/**\r\n * This function xSubtract the first array by the second array or a constant value from each element of the first array\r\n * @param {Array<Number>} array1 - the array that will be rotated\r\n * @return {object}\r\n */\r\nexport function xBoxPlot(array) {\r\n  array = array.slice(0).sort((a, b) => a - b);\r\n  if (array.length < 5) {\r\n    throw Error(\r\n      'xBoxPlot: can not calculate info if array contains less than 3 elements',\r\n    );\r\n  }\r\n  let info = {\r\n    Q1: 0.0,\r\n    Q2: 0.0,\r\n    Q3: 0.0,\r\n    min: array[0],\r\n    max: array[array.length - 1],\r\n  };\r\n  let q1max, q3min;\r\n  if (array.length % 2 === 1) {\r\n    // odd\r\n    let middle = (array.length - 1) / 2;\r\n    info.Q2 = array[middle];\r\n    q1max = middle - 1;\r\n    q3min = middle + 1;\r\n  } else {\r\n    // even\r\n    q3min = array.length / 2;\r\n    q1max = q3min - 1;\r\n    info.Q2 = (array[q1max] + array[q3min]) / 2;\r\n  }\r\n  if (q1max % 2 === 0) {\r\n    info.Q1 = array[q1max / 2];\r\n    info.Q3 = array[(array.length + q3min - 1) / 2];\r\n  } else {\r\n    info.Q1 = (array[(q1max + 1) / 2] + array[(q1max - 1) / 2]) / 2;\r\n    let middleOver = (array.length + q3min) / 2;\r\n    info.Q3 = (array[middleOver] + array[middleOver - 1]) / 2;\r\n  }\r\n  return info;\r\n}\r\n","/**\r\n\r\n/**\r\n * Calculates the correlation between 2 vectors\r\n * https://en.wikipedia.org/wiki/Correlation_and_dependence\r\n *\r\n * @param {Array<Number>} [A] - the array that will be rotated\r\n * @param {Array<Number>} [B]\r\n * @return {Array}\r\n */\r\nexport function xCorrelation(A, B) {\r\n  let n = A.length;\r\n  let sumA = 0;\r\n  let sumA2 = 0;\r\n  let sumB = 0;\r\n  let sumB2 = 0;\r\n  let sumAB = 0;\r\n  for (let i = 0; i < n; i++) {\r\n    let a = A[i];\r\n    let b = B[i];\r\n    sumA += a;\r\n    sumA2 += a ** 2;\r\n    sumB += b;\r\n    sumB2 += b ** 2;\r\n    sumAB += a * b;\r\n  }\r\n  return (\r\n    (n * sumAB - sumA * sumB) /\r\n    (Math.sqrt(n * sumA2 - sumA ** 2) * Math.sqrt(n * sumB2 - sumB ** 2))\r\n  );\r\n}\r\n","/**\r\n * Returns the closest index of a `target` in an ordered array\r\n * @param {array<Number>} array\r\n * @param {number} target\r\n */\r\n\r\nexport function xFindClosestIndex(array, target) {\r\n  let low = 0;\r\n  let high = array.length - 1;\r\n  let middle = 0;\r\n  while (high - low > 1) {\r\n    middle = low + ((high - low) >> 1);\r\n    if (array[middle] < target) {\r\n      low = middle;\r\n    } else if (array[middle] > target) {\r\n      high = middle;\r\n    } else {\r\n      return middle;\r\n    }\r\n  }\r\n\r\n  if (low < array.length - 1) {\r\n    if (Math.abs(target - array[low]) < Math.abs(array[low + 1] - target)) {\r\n      return low;\r\n    } else {\r\n      return low + 1;\r\n    }\r\n  } else {\r\n    return low;\r\n  }\r\n}\r\n","import { xFindClosestIndex } from './xFindClosestIndex';\r\n\r\n/**\r\n * Returns an object with {fromIndex, toIndex} for a specific from / to\r\n * @param {array} x\r\n * @param {object} [options={}]\r\n * @param {number} [options.from] - First value for xyIntegration in the X scale\r\n * @param {number} [options.fromIndex=0] - First point for xyIntegration\r\n * @param {number} [options.to] - Last value for xyIntegration in the X scale\r\n * @param {number} [options.toIndex=x.length-1] - Last point for xyIntegration\r\n */\r\n\r\nexport function xGetFromToIndex(x, options = {}) {\r\n  let { fromIndex, toIndex, from, to } = options;\r\n\r\n  if (fromIndex === undefined) {\r\n    if (from !== undefined) {\r\n      fromIndex = xFindClosestIndex(x, from);\r\n    } else {\r\n      fromIndex = 0;\r\n    }\r\n  }\r\n  if (toIndex === undefined) {\r\n    if (to !== undefined) {\r\n      toIndex = xFindClosestIndex(x, to);\r\n    } else {\r\n      toIndex = x.length - 1;\r\n    }\r\n  }\r\n  if (fromIndex > toIndex) [fromIndex, toIndex] = [toIndex, fromIndex];\r\n  return { fromIndex, toIndex };\r\n}\r\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3_array = {})));\n}(this, function (exports) { 'use strict';\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(compare) {\n    if (compare.length === 1) compare = ascendingComparator(compare);\n    return {\n      left: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;\n          else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;\n          else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n\n  function ascendingComparator(f) {\n    return function(d, x) {\n      return ascending(f(d), x);\n    };\n  }\n\n  var ascendingBisect = bisector(ascending);\n  var bisectRight = ascendingBisect.right;\n  var bisectLeft = ascendingBisect.left;\n\n  function descending(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function number$1(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function variance(array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (f == null) {\n      while (++i < n) {\n        if (!isNaN(a = number$1(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    else {\n      while (++i < n) {\n        if (!isNaN(a = number$1(f(array[i], i, array)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  }\n\n  function deviation(array, f) {\n    var v = variance(array, f);\n    return v ? Math.sqrt(v) : v;\n  }\n\n  function extent(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    return [a, c];\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  var e10 = Math.sqrt(50);\n  var e5 = Math.sqrt(10);\n  var e2 = Math.sqrt(2);\n  function ticks(start, stop, count) {\n    var step = tickStep(start, stop, count);\n    return range(\n      Math.ceil(start / step) * step,\n      Math.floor(stop / step) * step + step / 2, // inclusive\n      step\n    );\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;\n    else if (error >= e5) step1 *= 5;\n    else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function sturges(values) {\n    return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n  }\n\n  function number(x) {\n    return +x;\n  }\n\n  function histogram() {\n    var value = identity,\n        domain = extent,\n        threshold = sturges;\n\n    function histogram(data) {\n      var i,\n          n = data.length,\n          x,\n          values = new Array(n);\n\n      // Coerce values to numbers.\n      for (i = 0; i < n; ++i) {\n        values[i] = +value(data[i], i, data);\n      }\n\n      var xz = domain(values),\n          x0 = +xz[0],\n          x1 = +xz[1],\n          tz = threshold(values, x0, x1);\n\n      // Convert number of thresholds into uniform thresholds.\n      if (!Array.isArray(tz)) tz = ticks(x0, x1, +tz);\n\n      // Coerce thresholds to numbers, ignoring any outside the domain.\n      var m = tz.length;\n      for (i = 0; i < m; ++i) tz[i] = +tz[i];\n      while (tz[0] <= x0) tz.shift(), --m;\n      while (tz[m - 1] >= x1) tz.pop(), --m;\n\n      var bins = new Array(m + 1),\n          bin;\n\n      // Initialize bins.\n      for (i = 0; i <= m; ++i) {\n        bin = bins[i] = [];\n        bin.x0 = i > 0 ? tz[i - 1] : x0;\n        bin.x1 = i < m ? tz[i] : x1;\n      }\n\n      // Assign data to bins by value, ignoring any outside the domain.\n      for (i = 0; i < n; ++i) {\n        x = values[i];\n        if (x0 <= x && x <= x1) {\n          bins[bisectRight(tz, x, 0, m)].push(data[i]);\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function(_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), histogram) : value;\n    };\n\n    histogram.domain = function(_) {\n      return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), histogram) : domain;\n    };\n\n    histogram.thresholds = function(_) {\n      if (!arguments.length) return threshold;\n      threshold = typeof _ === \"function\" ? _\n          : Array.isArray(_) ? constant(Array.prototype.map.call(_, number))\n          : constant(+_);\n      return histogram;\n    };\n\n    return histogram;\n  }\n\n  function quantile(array, p, f) {\n    if (f == null) f = number$1;\n    if (!(n = array.length)) return;\n    if ((p = +p) <= 0 || n < 2) return +f(array[0], 0, array);\n    if (p >= 1) return +f(array[n - 1], n - 1, array);\n    var n,\n        h = (n - 1) * p,\n        i = Math.floor(h),\n        a = +f(array[i], i, array),\n        b = +f(array[i + 1], i + 1, array);\n    return a + (b - a) * (h - i);\n  }\n\n  function freedmanDiaconis(values, min, max) {\n    values.sort(ascending);\n    return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function scott(values, min, max) {\n    return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function max(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n    }\n\n    return a;\n  }\n\n  function mean(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number$1(array[i]))) s += a; else --j;\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number$1(f(array[i], i, array)))) s += a; else --j;\n    }\n\n    if (j) return s / j;\n  }\n\n  function median(array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number$1(array[i]))) numbers.push(a);\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number$1(f(array[i], i, array)))) numbers.push(a);\n    }\n\n    return quantile(numbers.sort(ascending), 0.5);\n  }\n\n  function merge(arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  }\n\n  function min(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && a > b) a = b;\n    }\n\n    return a;\n  }\n\n  function pairs(array) {\n    var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [p, p = array[++i]];\n    return pairs;\n  }\n\n  function permute(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  }\n\n  function scan(array, compare) {\n    if (!(n = array.length)) return;\n    var i = 0,\n        n,\n        j = 0,\n        xi,\n        xj = array[j];\n\n    if (!compare) compare = ascending;\n\n    while (++i < n) if (compare(xi = array[i], xj) < 0 || compare(xj, xj) !== 0) xj = xi, j = i;\n\n    if (compare(xj, xj) === 0) return j;\n  }\n\n  function shuffle(array, i0, i1) {\n    var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n\n    return array;\n  }\n\n  function sum(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n    }\n\n    else {\n      while (++i < n) if (a = +f(array[i], i, array)) s += a;\n    }\n\n    return s;\n  }\n\n  function transpose(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  }\n\n  function length(d) {\n    return d.length;\n  }\n\n  function zip() {\n    return transpose(arguments);\n  }\n\n  var version = \"0.7.1\";\n\n  exports.version = version;\n  exports.bisect = bisectRight;\n  exports.bisectRight = bisectRight;\n  exports.bisectLeft = bisectLeft;\n  exports.ascending = ascending;\n  exports.bisector = bisector;\n  exports.descending = descending;\n  exports.deviation = deviation;\n  exports.extent = extent;\n  exports.histogram = histogram;\n  exports.thresholdFreedmanDiaconis = freedmanDiaconis;\n  exports.thresholdScott = scott;\n  exports.thresholdSturges = sturges;\n  exports.max = max;\n  exports.mean = mean;\n  exports.median = median;\n  exports.merge = merge;\n  exports.min = min;\n  exports.pairs = pairs;\n  exports.permute = permute;\n  exports.quantile = quantile;\n  exports.range = range;\n  exports.scan = scan;\n  exports.shuffle = shuffle;\n  exports.sum = sum;\n  exports.ticks = ticks;\n  exports.tickStep = tickStep;\n  exports.transpose = transpose;\n  exports.variance = variance;\n  exports.zip = zip;\n\n}));","/**\r\n * This function xSubtract the first array by the second array or a constant value from each element of the first array\r\n * @param {Array} array1 - the array that will be rotated\r\n * @param {Array|Number} array2\r\n * @return {Array}\r\n */\r\nexport function xSubtract(array1, array2) {\r\n  let isConstant = false;\r\n  let constant;\r\n  if (Array.isArray(array2)) {\r\n    if (array1.length !== array2.length) {\r\n      throw new Error('sub: size of array1 and array2 must be identical');\r\n    }\r\n  } else {\r\n    isConstant = true;\r\n    constant = Number(array2);\r\n  }\r\n\r\n  let array3 = new Array(array1.length);\r\n  if (isConstant) {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      array3[i] = array1[i] - constant;\r\n    }\r\n  } else {\r\n    for (let i = 0; i < array1.length; i++) {\r\n      array3[i] = array1[i] - array2[i];\r\n    }\r\n  }\r\n\r\n  return array3;\r\n}\r\n","const toString = Object.prototype.toString;\n\nexport default function isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n","import isAnyArray from 'is-any-array';\r\n\r\n/**\r\n * Throw an error in no an object of x,y arrays\r\n * @param {DataXY} [data={}]\r\n */\r\nexport function xyCheck(data = {}) {\r\n  if (!isAnyArray(data.x) || !isAnyArray(data.y)) {\r\n    throw new Error('Points must be an object of x and y arrays');\r\n  }\r\n  if (data.x.length !== data.y.length) {\r\n    throw new Error('The x and y arrays mush have the same length');\r\n  }\r\n}\r\n","import { xGetFromToIndex } from '../x/xGetFromToIndex';\r\n\r\nimport { xyCheck } from './xyCheck';\r\n\r\n/**\r\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\r\n * @param {DataXY} [data={}] - Object that contains property x (an ordered increasing array) and y (an array)\r\n * @param {object} [options={}]\r\n * @param {number} [options.from] - First value for xyIntegration in the X scale\r\n * @param {number} [options.fromIndex=0] - First point for xyIntegration\r\n * @param {number} [options.to] - Last value for xyIntegration in the X scale\r\n * @param {number} [options.toIndex=x.length-1] - Last point for xyIntegration\r\n * @return {number} xyIntegration value on the specified range\r\n */\r\n\r\nexport function xyIntegration(data = {}, options = {}) {\r\n  xyCheck(data);\r\n  const { x, y } = data;\r\n  if (x.length < 2) return 0;\r\n  const { fromIndex, toIndex } = xGetFromToIndex(x, options);\r\n  let currentxyIntegration = 0;\r\n  for (let i = fromIndex; i < toIndex; i++) {\r\n    currentxyIntegration += ((x[i + 1] - x[i]) * (y[i + 1] + y[i])) / 2;\r\n  }\r\n\r\n  return currentxyIntegration;\r\n}\r\n","import { xGetFromToIndex } from '../x/xGetFromToIndex';\r\n\r\nimport { xyCheck } from './xyCheck';\r\n/**\r\n * Finds the max y value in a range and return a {x,y} point\r\n * @param {DataXY} [data={}] - Object that contains property x (an ordered increasing array) and y (an array)\r\n * @param {object} [options={}]\r\n * @param {number} [options.from] - First value for xyIntegration in the X scale\r\n * @param {number} [options.fromIndex=0] - First point for xyIntegration\r\n * @param {number} [options.to] - Last value for xyIntegration in the X scale\r\n * @param {number} [options.toIndex=x.length-1] - Last point for xyIntegration\r\n * @return {object}\r\n */\r\n\r\nexport function xyMaxYPoint(data = {}, options = {}) {\r\n  xyCheck(data);\r\n  const { x, y } = data;\r\n  if (x.length < 2) return 0;\r\n\r\n  const { fromIndex, toIndex } = xGetFromToIndex(x, options);\r\n\r\n  let current = { x: x[fromIndex], y: y[fromIndex], index: fromIndex };\r\n  for (let i = fromIndex; i <= toIndex; i++) {\r\n    if (y[i] > current.y) current = { x: x[i], y: y[i], index: i };\r\n  }\r\n\r\n  return current;\r\n}\r\n","import { xGetFromToIndex } from '../x/xGetFromToIndex';\r\n\r\nimport { xyCheck } from './xyCheck';\r\n/**\r\n * Finds the max y value in a range and return a {x,y} point\r\n * @param {DataXY} [data={}] - Object that contains property x (an ordered increasing array) and y (an array)\r\n * @param {object} [options={}]\r\n * @param {number} [options.from] - First value for xyIntegration in the X scale\r\n * @param {number} [options.fromIndex=0] - First point for xyIntegration\r\n * @param {number} [options.to] - Last value for xyIntegration in the X scale\r\n * @param {number} [options.toIndex=x.length-1] - Last point for xyIntegration\r\n * @return {object}\r\n */\r\n\r\nexport function xyMinYPoint(data = {}, options = {}) {\r\n  xyCheck(data);\r\n  const { x, y } = data;\r\n  if (x.length < 2) return 0;\r\n\r\n  const { fromIndex, toIndex } = xGetFromToIndex(x, options);\r\n\r\n  let current = { x: x[fromIndex], y: y[fromIndex], index: fromIndex };\r\n  for (let i = fromIndex; i <= toIndex; i++) {\r\n    if (y[i] < current.y) current = { x: x[i], y: y[i], index: i };\r\n  }\r\n\r\n  return current;\r\n}\r\n","/**\n * chroma.js - JavaScript library for color conversions\n *\n * Copyright (c) 2011-2019, Gregor Aisch\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. The name Gregor Aisch may not be used to endorse or promote products\n * derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * -------------------------------------------------------\n *\n * chroma.js includes colors from colorbrewer2.org, which are released under\n * the following license:\n *\n * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,\n * and The Pennsylvania State University.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\n * either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n *\n * ------------------------------------------------------\n *\n * Named colors are taken from X11 Color Names.\n * http://www.w3.org/TR/css3-color/#svg-color\n *\n * @preserve\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.chroma = factory());\n}(this, (function () { 'use strict';\n\n    var limit = function (x, min, max) {\n        if ( min === void 0 ) min=0;\n        if ( max === void 0 ) max=1;\n\n        return x < min ? min : x > max ? max : x;\n    };\n\n    var clip_rgb = function (rgb) {\n        rgb._clipped = false;\n        rgb._unclipped = rgb.slice(0);\n        for (var i=0; i<=3; i++) {\n            if (i < 3) {\n                if (rgb[i] < 0 || rgb[i] > 255) { rgb._clipped = true; }\n                rgb[i] = limit(rgb[i], 0, 255);\n            } else if (i === 3) {\n                rgb[i] = limit(rgb[i], 0, 1);\n            }\n        }\n        return rgb;\n    };\n\n    // ported from jQuery's $.type\n    var classToType = {};\n    for (var i = 0, list = ['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Undefined', 'Null']; i < list.length; i += 1) {\n        var name = list[i];\n\n        classToType[(\"[object \" + name + \"]\")] = name.toLowerCase();\n    }\n    var type = function(obj) {\n        return classToType[Object.prototype.toString.call(obj)] || \"object\";\n    };\n\n    var unpack = function (args, keyOrder) {\n        if ( keyOrder === void 0 ) keyOrder=null;\n\n    \t// if called with more than 3 arguments, we return the arguments\n        if (args.length >= 3) { return Array.prototype.slice.call(args); }\n        // with less than 3 args we check if first arg is object\n        // and use the keyOrder string to extract and sort properties\n    \tif (type(args[0]) == 'object' && keyOrder) {\n    \t\treturn keyOrder.split('')\n    \t\t\t.filter(function (k) { return args[0][k] !== undefined; })\n    \t\t\t.map(function (k) { return args[0][k]; });\n    \t}\n    \t// otherwise we just return the first argument\n    \t// (which we suppose is an array of args)\n        return args[0];\n    };\n\n    var last = function (args) {\n        if (args.length < 2) { return null; }\n        var l = args.length-1;\n        if (type(args[l]) == 'string') { return args[l].toLowerCase(); }\n        return null;\n    };\n\n    var PI = Math.PI;\n\n    var utils = {\n    \tclip_rgb: clip_rgb,\n    \tlimit: limit,\n    \ttype: type,\n    \tunpack: unpack,\n    \tlast: last,\n    \tPI: PI,\n    \tTWOPI: PI*2,\n    \tPITHIRD: PI/3,\n    \tDEG2RAD: PI / 180,\n    \tRAD2DEG: 180 / PI\n    };\n\n    var input = {\n    \tformat: {},\n    \tautodetect: []\n    };\n\n    var last$1 = utils.last;\n    var clip_rgb$1 = utils.clip_rgb;\n    var type$1 = utils.type;\n\n\n    var Color = function Color() {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var me = this;\n        if (type$1(args[0]) === 'object' &&\n            args[0].constructor &&\n            args[0].constructor === this.constructor) {\n            // the argument is already a Color instance\n            return args[0];\n        }\n\n        // last argument could be the mode\n        var mode = last$1(args);\n        var autodetect = false;\n\n        if (!mode) {\n            autodetect = true;\n            if (!input.sorted) {\n                input.autodetect = input.autodetect.sort(function (a,b) { return b.p - a.p; });\n                input.sorted = true;\n            }\n            // auto-detect format\n            for (var i = 0, list = input.autodetect; i < list.length; i += 1) {\n                var chk = list[i];\n\n                mode = chk.test.apply(chk, args);\n                if (mode) { break; }\n            }\n        }\n\n        if (input.format[mode]) {\n            var rgb = input.format[mode].apply(null, autodetect ? args : args.slice(0,-1));\n            me._rgb = clip_rgb$1(rgb);\n        } else {\n            throw new Error('unknown format: '+args);\n        }\n\n        // add alpha channel\n        if (me._rgb.length === 3) { me._rgb.push(1); }\n    };\n\n    Color.prototype.toString = function toString () {\n        if (type$1(this.hex) == 'function') { return this.hex(); }\n        return (\"[\" + (this._rgb.join(',')) + \"]\");\n    };\n\n    var Color_1 = Color;\n\n    var chroma = function () {\n    \tvar args = [], len = arguments.length;\n    \twhile ( len-- ) args[ len ] = arguments[ len ];\n\n    \treturn new (Function.prototype.bind.apply( chroma.Color, [ null ].concat( args) ));\n    };\n\n    chroma.Color = Color_1;\n    chroma.version = '2.1.0';\n\n    var chroma_1 = chroma;\n\n    var unpack$1 = utils.unpack;\n    var max = Math.max;\n\n    var rgb2cmyk = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$1(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var k = 1 - max(r,max(g,b));\n        var f = k < 1 ? 1 / (1-k) : 0;\n        var c = (1-r-k) * f;\n        var m = (1-g-k) * f;\n        var y = (1-b-k) * f;\n        return [c,m,y,k];\n    };\n\n    var rgb2cmyk_1 = rgb2cmyk;\n\n    var unpack$2 = utils.unpack;\n\n    var cmyk2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$2(args, 'cmyk');\n        var c = args[0];\n        var m = args[1];\n        var y = args[2];\n        var k = args[3];\n        var alpha = args.length > 4 ? args[4] : 1;\n        if (k === 1) { return [0,0,0,alpha]; }\n        return [\n            c >= 1 ? 0 : 255 * (1-c) * (1-k), // r\n            m >= 1 ? 0 : 255 * (1-m) * (1-k), // g\n            y >= 1 ? 0 : 255 * (1-y) * (1-k), // b\n            alpha\n        ];\n    };\n\n    var cmyk2rgb_1 = cmyk2rgb;\n\n    var unpack$3 = utils.unpack;\n    var type$2 = utils.type;\n\n\n\n    Color_1.prototype.cmyk = function() {\n        return rgb2cmyk_1(this._rgb);\n    };\n\n    chroma_1.cmyk = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['cmyk']) ));\n    };\n\n    input.format.cmyk = cmyk2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$3(args, 'cmyk');\n            if (type$2(args) === 'array' && args.length === 4) {\n                return 'cmyk';\n            }\n        }\n    });\n\n    var unpack$4 = utils.unpack;\n    var last$2 = utils.last;\n    var rnd = function (a) { return Math.round(a*100)/100; };\n\n    /*\n     * supported arguments:\n     * - hsl2css(h,s,l)\n     * - hsl2css(h,s,l,a)\n     * - hsl2css([h,s,l], mode)\n     * - hsl2css([h,s,l,a], mode)\n     * - hsl2css({h,s,l,a}, mode)\n     */\n    var hsl2css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var hsla = unpack$4(args, 'hsla');\n        var mode = last$2(args) || 'lsa';\n        hsla[0] = rnd(hsla[0] || 0);\n        hsla[1] = rnd(hsla[1]*100) + '%';\n        hsla[2] = rnd(hsla[2]*100) + '%';\n        if (mode === 'hsla' || (hsla.length > 3 && hsla[3]<1)) {\n            hsla[3] = hsla.length > 3 ? hsla[3] : 1;\n            mode = 'hsla';\n        } else {\n            hsla.length = 3;\n        }\n        return (mode + \"(\" + (hsla.join(',')) + \")\");\n    };\n\n    var hsl2css_1 = hsl2css;\n\n    var unpack$5 = utils.unpack;\n\n    /*\n     * supported arguments:\n     * - rgb2hsl(r,g,b)\n     * - rgb2hsl(r,g,b,a)\n     * - rgb2hsl([r,g,b])\n     * - rgb2hsl([r,g,b,a])\n     * - rgb2hsl({r,g,b,a})\n     */\n    var rgb2hsl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$5(args, 'rgba');\n        var r = args[0];\n        var g = args[1];\n        var b = args[2];\n\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n\n        var l = (max + min) / 2;\n        var s, h;\n\n        if (max === min){\n            s = 0;\n            h = Number.NaN;\n        } else {\n            s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n        }\n\n        if (r == max) { h = (g - b) / (max - min); }\n        else if (g == max) { h = 2 + (b - r) / (max - min); }\n        else if (b == max) { h = 4 + (r - g) / (max - min); }\n\n        h *= 60;\n        if (h < 0) { h += 360; }\n        if (args.length>3 && args[3]!==undefined) { return [h,s,l,args[3]]; }\n        return [h,s,l];\n    };\n\n    var rgb2hsl_1 = rgb2hsl;\n\n    var unpack$6 = utils.unpack;\n    var last$3 = utils.last;\n\n\n    var round = Math.round;\n\n    /*\n     * supported arguments:\n     * - rgb2css(r,g,b)\n     * - rgb2css(r,g,b,a)\n     * - rgb2css([r,g,b], mode)\n     * - rgb2css([r,g,b,a], mode)\n     * - rgb2css({r,g,b,a}, mode)\n     */\n    var rgb2css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgba = unpack$6(args, 'rgba');\n        var mode = last$3(args) || 'rgb';\n        if (mode.substr(0,3) == 'hsl') {\n            return hsl2css_1(rgb2hsl_1(rgba), mode);\n        }\n        rgba[0] = round(rgba[0]);\n        rgba[1] = round(rgba[1]);\n        rgba[2] = round(rgba[2]);\n        if (mode === 'rgba' || (rgba.length > 3 && rgba[3]<1)) {\n            rgba[3] = rgba.length > 3 ? rgba[3] : 1;\n            mode = 'rgba';\n        }\n        return (mode + \"(\" + (rgba.slice(0,mode==='rgb'?3:4).join(',')) + \")\");\n    };\n\n    var rgb2css_1 = rgb2css;\n\n    var unpack$7 = utils.unpack;\n    var round$1 = Math.round;\n\n    var hsl2rgb = function () {\n        var assign;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$7(args, 'hsl');\n        var h = args[0];\n        var s = args[1];\n        var l = args[2];\n        var r,g,b;\n        if (s === 0) {\n            r = g = b = l*255;\n        } else {\n            var t3 = [0,0,0];\n            var c = [0,0,0];\n            var t2 = l < 0.5 ? l * (1+s) : l+s-l*s;\n            var t1 = 2 * l - t2;\n            var h_ = h / 360;\n            t3[0] = h_ + 1/3;\n            t3[1] = h_;\n            t3[2] = h_ - 1/3;\n            for (var i=0; i<3; i++) {\n                if (t3[i] < 0) { t3[i] += 1; }\n                if (t3[i] > 1) { t3[i] -= 1; }\n                if (6 * t3[i] < 1)\n                    { c[i] = t1 + (t2 - t1) * 6 * t3[i]; }\n                else if (2 * t3[i] < 1)\n                    { c[i] = t2; }\n                else if (3 * t3[i] < 2)\n                    { c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6; }\n                else\n                    { c[i] = t1; }\n            }\n            (assign = [round$1(c[0]*255),round$1(c[1]*255),round$1(c[2]*255)], r = assign[0], g = assign[1], b = assign[2]);\n        }\n        if (args.length > 3) {\n            // keep alpha channel\n            return [r,g,b,args[3]];\n        }\n        return [r,g,b,1];\n    };\n\n    var hsl2rgb_1 = hsl2rgb;\n\n    var RE_RGB = /^rgb\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*\\)$/;\n    var RE_RGBA = /^rgba\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n    var RE_RGB_PCT = /^rgb\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n    var RE_RGBA_PCT = /^rgba\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n    var RE_HSL = /^hsl\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n    var RE_HSLA = /^hsla\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n\n    var round$2 = Math.round;\n\n    var css2rgb = function (css) {\n        css = css.toLowerCase().trim();\n        var m;\n\n        if (input.format.named) {\n            try {\n                return input.format.named(css);\n            } catch (e) {\n                // eslint-disable-next-line\n            }\n        }\n\n        // rgb(250,20,0)\n        if ((m = css.match(RE_RGB))) {\n            var rgb = m.slice(1,4);\n            for (var i=0; i<3; i++) {\n                rgb[i] = +rgb[i];\n            }\n            rgb[3] = 1;  // default alpha\n            return rgb;\n        }\n\n        // rgba(250,20,0,0.4)\n        if ((m = css.match(RE_RGBA))) {\n            var rgb$1 = m.slice(1,5);\n            for (var i$1=0; i$1<4; i$1++) {\n                rgb$1[i$1] = +rgb$1[i$1];\n            }\n            return rgb$1;\n        }\n\n        // rgb(100%,0%,0%)\n        if ((m = css.match(RE_RGB_PCT))) {\n            var rgb$2 = m.slice(1,4);\n            for (var i$2=0; i$2<3; i$2++) {\n                rgb$2[i$2] = round$2(rgb$2[i$2] * 2.55);\n            }\n            rgb$2[3] = 1;  // default alpha\n            return rgb$2;\n        }\n\n        // rgba(100%,0%,0%,0.4)\n        if ((m = css.match(RE_RGBA_PCT))) {\n            var rgb$3 = m.slice(1,5);\n            for (var i$3=0; i$3<3; i$3++) {\n                rgb$3[i$3] = round$2(rgb$3[i$3] * 2.55);\n            }\n            rgb$3[3] = +rgb$3[3];\n            return rgb$3;\n        }\n\n        // hsl(0,100%,50%)\n        if ((m = css.match(RE_HSL))) {\n            var hsl = m.slice(1,4);\n            hsl[1] *= 0.01;\n            hsl[2] *= 0.01;\n            var rgb$4 = hsl2rgb_1(hsl);\n            rgb$4[3] = 1;\n            return rgb$4;\n        }\n\n        // hsla(0,100%,50%,0.5)\n        if ((m = css.match(RE_HSLA))) {\n            var hsl$1 = m.slice(1,4);\n            hsl$1[1] *= 0.01;\n            hsl$1[2] *= 0.01;\n            var rgb$5 = hsl2rgb_1(hsl$1);\n            rgb$5[3] = +m[4];  // default alpha = 1\n            return rgb$5;\n        }\n    };\n\n    css2rgb.test = function (s) {\n        return RE_RGB.test(s) ||\n            RE_RGBA.test(s) ||\n            RE_RGB_PCT.test(s) ||\n            RE_RGBA_PCT.test(s) ||\n            RE_HSL.test(s) ||\n            RE_HSLA.test(s);\n    };\n\n    var css2rgb_1 = css2rgb;\n\n    var type$3 = utils.type;\n\n\n\n\n    Color_1.prototype.css = function(mode) {\n        return rgb2css_1(this._rgb, mode);\n    };\n\n    chroma_1.css = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['css']) ));\n    };\n\n    input.format.css = css2rgb_1;\n\n    input.autodetect.push({\n        p: 5,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$3(h) === 'string' && css2rgb_1.test(h)) {\n                return 'css';\n            }\n        }\n    });\n\n    var unpack$8 = utils.unpack;\n\n    input.format.gl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgb = unpack$8(args, 'rgba');\n        rgb[0] *= 255;\n        rgb[1] *= 255;\n        rgb[2] *= 255;\n        return rgb;\n    };\n\n    chroma_1.gl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['gl']) ));\n    };\n\n    Color_1.prototype.gl = function() {\n        var rgb = this._rgb;\n        return [rgb[0]/255, rgb[1]/255, rgb[2]/255, rgb[3]];\n    };\n\n    var unpack$9 = utils.unpack;\n\n    var rgb2hcg = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$9(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var delta = max - min;\n        var c = delta * 100 / 255;\n        var _g = min / (255 - delta) * 100;\n        var h;\n        if (delta === 0) {\n            h = Number.NaN;\n        } else {\n            if (r === max) { h = (g - b) / delta; }\n            if (g === max) { h = 2+(b - r) / delta; }\n            if (b === max) { h = 4+(r - g) / delta; }\n            h *= 60;\n            if (h < 0) { h += 360; }\n        }\n        return [h, c, _g];\n    };\n\n    var rgb2hcg_1 = rgb2hcg;\n\n    var unpack$a = utils.unpack;\n    var floor = Math.floor;\n\n    /*\n     * this is basically just HSV with some minor tweaks\n     *\n     * hue.. [0..360]\n     * chroma .. [0..1]\n     * grayness .. [0..1]\n     */\n\n    var hcg2rgb = function () {\n        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$a(args, 'hcg');\n        var h = args[0];\n        var c = args[1];\n        var _g = args[2];\n        var r,g,b;\n        _g = _g * 255;\n        var _c = c * 255;\n        if (c === 0) {\n            r = g = b = _g;\n        } else {\n            if (h === 360) { h = 0; }\n            if (h > 360) { h -= 360; }\n            if (h < 0) { h += 360; }\n            h /= 60;\n            var i = floor(h);\n            var f = h - i;\n            var p = _g * (1 - c);\n            var q = p + _c * (1 - f);\n            var t = p + _c * f;\n            var v = p + _c;\n            switch (i) {\n                case 0: (assign = [v, t, p], r = assign[0], g = assign[1], b = assign[2]); break\n                case 1: (assign$1 = [q, v, p], r = assign$1[0], g = assign$1[1], b = assign$1[2]); break\n                case 2: (assign$2 = [p, v, t], r = assign$2[0], g = assign$2[1], b = assign$2[2]); break\n                case 3: (assign$3 = [p, q, v], r = assign$3[0], g = assign$3[1], b = assign$3[2]); break\n                case 4: (assign$4 = [t, p, v], r = assign$4[0], g = assign$4[1], b = assign$4[2]); break\n                case 5: (assign$5 = [v, p, q], r = assign$5[0], g = assign$5[1], b = assign$5[2]); break\n            }\n        }\n        return [r, g, b, args.length > 3 ? args[3] : 1];\n    };\n\n    var hcg2rgb_1 = hcg2rgb;\n\n    var unpack$b = utils.unpack;\n    var type$4 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hcg = function() {\n        return rgb2hcg_1(this._rgb);\n    };\n\n    chroma_1.hcg = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hcg']) ));\n    };\n\n    input.format.hcg = hcg2rgb_1;\n\n    input.autodetect.push({\n        p: 1,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$b(args, 'hcg');\n            if (type$4(args) === 'array' && args.length === 3) {\n                return 'hcg';\n            }\n        }\n    });\n\n    var unpack$c = utils.unpack;\n    var last$4 = utils.last;\n    var round$3 = Math.round;\n\n    var rgb2hex = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$c(args, 'rgba');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var a = ref[3];\n        var mode = last$4(args) || 'auto';\n        if (a === undefined) { a = 1; }\n        if (mode === 'auto') {\n            mode = a < 1 ? 'rgba' : 'rgb';\n        }\n        r = round$3(r);\n        g = round$3(g);\n        b = round$3(b);\n        var u = r << 16 | g << 8 | b;\n        var str = \"000000\" + u.toString(16); //#.toUpperCase();\n        str = str.substr(str.length - 6);\n        var hxa = '0' + round$3(a * 255).toString(16);\n        hxa = hxa.substr(hxa.length - 2);\n        switch (mode.toLowerCase()) {\n            case 'rgba': return (\"#\" + str + hxa);\n            case 'argb': return (\"#\" + hxa + str);\n            default: return (\"#\" + str);\n        }\n    };\n\n    var rgb2hex_1 = rgb2hex;\n\n    var RE_HEX = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n    var RE_HEXA = /^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;\n\n    var hex2rgb = function (hex) {\n        if (hex.match(RE_HEX)) {\n            // remove optional leading #\n            if (hex.length === 4 || hex.length === 7) {\n                hex = hex.substr(1);\n            }\n            // expand short-notation to full six-digit\n            if (hex.length === 3) {\n                hex = hex.split('');\n                hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];\n            }\n            var u = parseInt(hex, 16);\n            var r = u >> 16;\n            var g = u >> 8 & 0xFF;\n            var b = u & 0xFF;\n            return [r,g,b,1];\n        }\n\n        // match rgba hex format, eg #FF000077\n        if (hex.match(RE_HEXA)) {\n            if (hex.length === 5 || hex.length === 9) {\n                // remove optional leading #\n                hex = hex.substr(1);\n            }\n            // expand short-notation to full eight-digit\n            if (hex.length === 4) {\n                hex = hex.split('');\n                hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]+hex[3]+hex[3];\n            }\n            var u$1 = parseInt(hex, 16);\n            var r$1 = u$1 >> 24 & 0xFF;\n            var g$1 = u$1 >> 16 & 0xFF;\n            var b$1 = u$1 >> 8 & 0xFF;\n            var a = Math.round((u$1 & 0xFF) / 0xFF * 100) / 100;\n            return [r$1,g$1,b$1,a];\n        }\n\n        // we used to check for css colors here\n        // if _input.css? and rgb = _input.css hex\n        //     return rgb\n\n        throw new Error((\"unknown hex color: \" + hex));\n    };\n\n    var hex2rgb_1 = hex2rgb;\n\n    var type$5 = utils.type;\n\n\n\n\n    Color_1.prototype.hex = function(mode) {\n        return rgb2hex_1(this._rgb, mode);\n    };\n\n    chroma_1.hex = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hex']) ));\n    };\n\n    input.format.hex = hex2rgb_1;\n    input.autodetect.push({\n        p: 4,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$5(h) === 'string' && [3,4,5,6,7,8,9].indexOf(h.length) >= 0) {\n                return 'hex';\n            }\n        }\n    });\n\n    var unpack$d = utils.unpack;\n    var TWOPI = utils.TWOPI;\n    var min = Math.min;\n    var sqrt = Math.sqrt;\n    var acos = Math.acos;\n\n    var rgb2hsi = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        borrowed from here:\n        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n        */\n        var ref = unpack$d(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var h;\n        var min_ = min(r,g,b);\n        var i = (r+g+b) / 3;\n        var s = i > 0 ? 1 - min_/i : 0;\n        if (s === 0) {\n            h = NaN;\n        } else {\n            h = ((r-g)+(r-b)) / 2;\n            h /= sqrt((r-g)*(r-g) + (r-b)*(g-b));\n            h = acos(h);\n            if (b > g) {\n                h = TWOPI - h;\n            }\n            h /= TWOPI;\n        }\n        return [h*360,s,i];\n    };\n\n    var rgb2hsi_1 = rgb2hsi;\n\n    var unpack$e = utils.unpack;\n    var limit$1 = utils.limit;\n    var TWOPI$1 = utils.TWOPI;\n    var PITHIRD = utils.PITHIRD;\n    var cos = Math.cos;\n\n    /*\n     * hue [0..360]\n     * saturation [0..1]\n     * intensity [0..1]\n     */\n    var hsi2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        borrowed from here:\n        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n        */\n        args = unpack$e(args, 'hsi');\n        var h = args[0];\n        var s = args[1];\n        var i = args[2];\n        var r,g,b;\n\n        if (isNaN(h)) { h = 0; }\n        if (isNaN(s)) { s = 0; }\n        // normalize hue\n        if (h > 360) { h -= 360; }\n        if (h < 0) { h += 360; }\n        h /= 360;\n        if (h < 1/3) {\n            b = (1-s)/3;\n            r = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            g = 1 - (b+r);\n        } else if (h < 2/3) {\n            h -= 1/3;\n            r = (1-s)/3;\n            g = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            b = 1 - (r+g);\n        } else {\n            h -= 2/3;\n            g = (1-s)/3;\n            b = (1+s*cos(TWOPI$1*h)/cos(PITHIRD-TWOPI$1*h))/3;\n            r = 1 - (g+b);\n        }\n        r = limit$1(i*r*3);\n        g = limit$1(i*g*3);\n        b = limit$1(i*b*3);\n        return [r*255, g*255, b*255, args.length > 3 ? args[3] : 1];\n    };\n\n    var hsi2rgb_1 = hsi2rgb;\n\n    var unpack$f = utils.unpack;\n    var type$6 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsi = function() {\n        return rgb2hsi_1(this._rgb);\n    };\n\n    chroma_1.hsi = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsi']) ));\n    };\n\n    input.format.hsi = hsi2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$f(args, 'hsi');\n            if (type$6(args) === 'array' && args.length === 3) {\n                return 'hsi';\n            }\n        }\n    });\n\n    var unpack$g = utils.unpack;\n    var type$7 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsl = function() {\n        return rgb2hsl_1(this._rgb);\n    };\n\n    chroma_1.hsl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsl']) ));\n    };\n\n    input.format.hsl = hsl2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$g(args, 'hsl');\n            if (type$7(args) === 'array' && args.length === 3) {\n                return 'hsl';\n            }\n        }\n    });\n\n    var unpack$h = utils.unpack;\n    var min$1 = Math.min;\n    var max$1 = Math.max;\n\n    /*\n     * supported arguments:\n     * - rgb2hsv(r,g,b)\n     * - rgb2hsv([r,g,b])\n     * - rgb2hsv({r,g,b})\n     */\n    var rgb2hsl$1 = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$h(args, 'rgb');\n        var r = args[0];\n        var g = args[1];\n        var b = args[2];\n        var min_ = min$1(r, g, b);\n        var max_ = max$1(r, g, b);\n        var delta = max_ - min_;\n        var h,s,v;\n        v = max_ / 255.0;\n        if (max_ === 0) {\n            h = Number.NaN;\n            s = 0;\n        } else {\n            s = delta / max_;\n            if (r === max_) { h = (g - b) / delta; }\n            if (g === max_) { h = 2+(b - r) / delta; }\n            if (b === max_) { h = 4+(r - g) / delta; }\n            h *= 60;\n            if (h < 0) { h += 360; }\n        }\n        return [h, s, v]\n    };\n\n    var rgb2hsv = rgb2hsl$1;\n\n    var unpack$i = utils.unpack;\n    var floor$1 = Math.floor;\n\n    var hsv2rgb = function () {\n        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;\n\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n        args = unpack$i(args, 'hsv');\n        var h = args[0];\n        var s = args[1];\n        var v = args[2];\n        var r,g,b;\n        v *= 255;\n        if (s === 0) {\n            r = g = b = v;\n        } else {\n            if (h === 360) { h = 0; }\n            if (h > 360) { h -= 360; }\n            if (h < 0) { h += 360; }\n            h /= 60;\n\n            var i = floor$1(h);\n            var f = h - i;\n            var p = v * (1 - s);\n            var q = v * (1 - s * f);\n            var t = v * (1 - s * (1 - f));\n\n            switch (i) {\n                case 0: (assign = [v, t, p], r = assign[0], g = assign[1], b = assign[2]); break\n                case 1: (assign$1 = [q, v, p], r = assign$1[0], g = assign$1[1], b = assign$1[2]); break\n                case 2: (assign$2 = [p, v, t], r = assign$2[0], g = assign$2[1], b = assign$2[2]); break\n                case 3: (assign$3 = [p, q, v], r = assign$3[0], g = assign$3[1], b = assign$3[2]); break\n                case 4: (assign$4 = [t, p, v], r = assign$4[0], g = assign$4[1], b = assign$4[2]); break\n                case 5: (assign$5 = [v, p, q], r = assign$5[0], g = assign$5[1], b = assign$5[2]); break\n            }\n        }\n        return [r,g,b,args.length > 3?args[3]:1];\n    };\n\n    var hsv2rgb_1 = hsv2rgb;\n\n    var unpack$j = utils.unpack;\n    var type$8 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.hsv = function() {\n        return rgb2hsv(this._rgb);\n    };\n\n    chroma_1.hsv = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hsv']) ));\n    };\n\n    input.format.hsv = hsv2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$j(args, 'hsv');\n            if (type$8(args) === 'array' && args.length === 3) {\n                return 'hsv';\n            }\n        }\n    });\n\n    var labConstants = {\n        // Corresponds roughly to RGB brighter/darker\n        Kn: 18,\n\n        // D65 standard referent\n        Xn: 0.950470,\n        Yn: 1,\n        Zn: 1.088830,\n\n        t0: 0.137931034,  // 4 / 29\n        t1: 0.206896552,  // 6 / 29\n        t2: 0.12841855,   // 3 * t1 * t1\n        t3: 0.008856452,  // t1 * t1 * t1\n    };\n\n    var unpack$k = utils.unpack;\n    var pow = Math.pow;\n\n    var rgb2lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$k(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var ref$1 = rgb2xyz(r,g,b);\n        var x = ref$1[0];\n        var y = ref$1[1];\n        var z = ref$1[2];\n        var l = 116 * y - 16;\n        return [l < 0 ? 0 : l, 500 * (x - y), 200 * (y - z)];\n    };\n\n    var rgb_xyz = function (r) {\n        if ((r /= 255) <= 0.04045) { return r / 12.92; }\n        return pow((r + 0.055) / 1.055, 2.4);\n    };\n\n    var xyz_lab = function (t) {\n        if (t > labConstants.t3) { return pow(t, 1 / 3); }\n        return t / labConstants.t2 + labConstants.t0;\n    };\n\n    var rgb2xyz = function (r,g,b) {\n        r = rgb_xyz(r);\n        g = rgb_xyz(g);\n        b = rgb_xyz(b);\n        var x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / labConstants.Xn);\n        var y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / labConstants.Yn);\n        var z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / labConstants.Zn);\n        return [x,y,z];\n    };\n\n    var rgb2lab_1 = rgb2lab;\n\n    var unpack$l = utils.unpack;\n    var pow$1 = Math.pow;\n\n    /*\n     * L* [0..100]\n     * a [-100..100]\n     * b [-100..100]\n     */\n    var lab2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$l(args, 'lab');\n        var l = args[0];\n        var a = args[1];\n        var b = args[2];\n        var x,y,z, r,g,b_;\n\n        y = (l + 16) / 116;\n        x = isNaN(a) ? y : y + a / 500;\n        z = isNaN(b) ? y : y - b / 200;\n\n        y = labConstants.Yn * lab_xyz(y);\n        x = labConstants.Xn * lab_xyz(x);\n        z = labConstants.Zn * lab_xyz(z);\n\n        r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);  // D65 -> sRGB\n        g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n        b_ = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n\n        return [r,g,b_,args.length > 3 ? args[3] : 1];\n    };\n\n    var xyz_rgb = function (r) {\n        return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow$1(r, 1 / 2.4) - 0.055)\n    };\n\n    var lab_xyz = function (t) {\n        return t > labConstants.t1 ? t * t * t : labConstants.t2 * (t - labConstants.t0)\n    };\n\n    var lab2rgb_1 = lab2rgb;\n\n    var unpack$m = utils.unpack;\n    var type$9 = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.lab = function() {\n        return rgb2lab_1(this._rgb);\n    };\n\n    chroma_1.lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['lab']) ));\n    };\n\n    input.format.lab = lab2rgb_1;\n\n    input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$m(args, 'lab');\n            if (type$9(args) === 'array' && args.length === 3) {\n                return 'lab';\n            }\n        }\n    });\n\n    var unpack$n = utils.unpack;\n    var RAD2DEG = utils.RAD2DEG;\n    var sqrt$1 = Math.sqrt;\n    var atan2 = Math.atan2;\n    var round$4 = Math.round;\n\n    var lab2lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$n(args, 'lab');\n        var l = ref[0];\n        var a = ref[1];\n        var b = ref[2];\n        var c = sqrt$1(a * a + b * b);\n        var h = (atan2(b, a) * RAD2DEG + 360) % 360;\n        if (round$4(c*10000) === 0) { h = Number.NaN; }\n        return [l, c, h];\n    };\n\n    var lab2lch_1 = lab2lch;\n\n    var unpack$o = utils.unpack;\n\n\n\n    var rgb2lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$o(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        var ref$1 = rgb2lab_1(r,g,b);\n        var l = ref$1[0];\n        var a = ref$1[1];\n        var b_ = ref$1[2];\n        return lab2lch_1(l,a,b_);\n    };\n\n    var rgb2lch_1 = rgb2lch;\n\n    var unpack$p = utils.unpack;\n    var DEG2RAD = utils.DEG2RAD;\n    var sin = Math.sin;\n    var cos$1 = Math.cos;\n\n    var lch2lab = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        /*\n        Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n        These formulas were invented by David Dalrymple to obtain maximum contrast without going\n        out of gamut if the parameters are in the range 0-1.\n\n        A saturation multiplier was added by Gregor Aisch\n        */\n        var ref = unpack$p(args, 'lch');\n        var l = ref[0];\n        var c = ref[1];\n        var h = ref[2];\n        if (isNaN(h)) { h = 0; }\n        h = h * DEG2RAD;\n        return [l, cos$1(h) * c, sin(h) * c]\n    };\n\n    var lch2lab_1 = lch2lab;\n\n    var unpack$q = utils.unpack;\n\n\n\n    var lch2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        args = unpack$q(args, 'lch');\n        var l = args[0];\n        var c = args[1];\n        var h = args[2];\n        var ref = lch2lab_1 (l,c,h);\n        var L = ref[0];\n        var a = ref[1];\n        var b_ = ref[2];\n        var ref$1 = lab2rgb_1 (L,a,b_);\n        var r = ref$1[0];\n        var g = ref$1[1];\n        var b = ref$1[2];\n        return [r, g, b, args.length > 3 ? args[3] : 1];\n    };\n\n    var lch2rgb_1 = lch2rgb;\n\n    var unpack$r = utils.unpack;\n\n\n    var hcl2rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var hcl = unpack$r(args, 'hcl').reverse();\n        return lch2rgb_1.apply(void 0, hcl);\n    };\n\n    var hcl2rgb_1 = hcl2rgb;\n\n    var unpack$s = utils.unpack;\n    var type$a = utils.type;\n\n\n\n\n\n\n    Color_1.prototype.lch = function() { return rgb2lch_1(this._rgb); };\n    Color_1.prototype.hcl = function() { return rgb2lch_1(this._rgb).reverse(); };\n\n    chroma_1.lch = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['lch']) ));\n    };\n    chroma_1.hcl = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['hcl']) ));\n    };\n\n    input.format.lch = lch2rgb_1;\n    input.format.hcl = hcl2rgb_1;\n\n    ['lch','hcl'].forEach(function (m) { return input.autodetect.push({\n        p: 2,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$s(args, m);\n            if (type$a(args) === 'array' && args.length === 3) {\n                return m;\n            }\n        }\n    }); });\n\n    /**\n    \tX11 color names\n\n    \thttp://www.w3.org/TR/css3-color/#svg-color\n    */\n\n    var w3cx11 = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflower: '#6495ed',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        laserlemon: '#ffff54',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrod: '#fafad2',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        maroon2: '#7f0000',\n        maroon3: '#b03060',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        purple2: '#7f007f',\n        purple3: '#a020f0',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32'\n    };\n\n    var w3cx11_1 = w3cx11;\n\n    var type$b = utils.type;\n\n\n\n\n\n    Color_1.prototype.name = function() {\n        var hex = rgb2hex_1(this._rgb, 'rgb');\n        for (var i = 0, list = Object.keys(w3cx11_1); i < list.length; i += 1) {\n            var n = list[i];\n\n            if (w3cx11_1[n] === hex) { return n.toLowerCase(); }\n        }\n        return hex;\n    };\n\n    input.format.named = function (name) {\n        name = name.toLowerCase();\n        if (w3cx11_1[name]) { return hex2rgb_1(w3cx11_1[name]); }\n        throw new Error('unknown color name: '+name);\n    };\n\n    input.autodetect.push({\n        p: 5,\n        test: function (h) {\n            var rest = [], len = arguments.length - 1;\n            while ( len-- > 0 ) rest[ len ] = arguments[ len + 1 ];\n\n            if (!rest.length && type$b(h) === 'string' && w3cx11_1[h.toLowerCase()]) {\n                return 'named';\n            }\n        }\n    });\n\n    var unpack$t = utils.unpack;\n\n    var rgb2num = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var ref = unpack$t(args, 'rgb');\n        var r = ref[0];\n        var g = ref[1];\n        var b = ref[2];\n        return (r << 16) + (g << 8) + b;\n    };\n\n    var rgb2num_1 = rgb2num;\n\n    var type$c = utils.type;\n\n    var num2rgb = function (num) {\n        if (type$c(num) == \"number\" && num >= 0 && num <= 0xFFFFFF) {\n            var r = num >> 16;\n            var g = (num >> 8) & 0xFF;\n            var b = num & 0xFF;\n            return [r,g,b,1];\n        }\n        throw new Error(\"unknown num color: \"+num);\n    };\n\n    var num2rgb_1 = num2rgb;\n\n    var type$d = utils.type;\n\n\n\n    Color_1.prototype.num = function() {\n        return rgb2num_1(this._rgb);\n    };\n\n    chroma_1.num = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['num']) ));\n    };\n\n    input.format.num = num2rgb_1;\n\n    input.autodetect.push({\n        p: 5,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            if (args.length === 1 && type$d(args[0]) === 'number' && args[0] >= 0 && args[0] <= 0xFFFFFF) {\n                return 'num';\n            }\n        }\n    });\n\n    var unpack$u = utils.unpack;\n    var type$e = utils.type;\n    var round$5 = Math.round;\n\n    Color_1.prototype.rgb = function(rnd) {\n        if ( rnd === void 0 ) rnd=true;\n\n        if (rnd === false) { return this._rgb.slice(0,3); }\n        return this._rgb.slice(0,3).map(round$5);\n    };\n\n    Color_1.prototype.rgba = function(rnd) {\n        if ( rnd === void 0 ) rnd=true;\n\n        return this._rgb.slice(0,4).map(function (v,i) {\n            return i<3 ? (rnd === false ? v : round$5(v)) : v;\n        });\n    };\n\n    chroma_1.rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['rgb']) ));\n    };\n\n    input.format.rgb = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgba = unpack$u(args, 'rgba');\n        if (rgba[3] === undefined) { rgba[3] = 1; }\n        return rgba;\n    };\n\n    input.autodetect.push({\n        p: 3,\n        test: function () {\n            var args = [], len = arguments.length;\n            while ( len-- ) args[ len ] = arguments[ len ];\n\n            args = unpack$u(args, 'rgba');\n            if (type$e(args) === 'array' && (args.length === 3 ||\n                args.length === 4 && type$e(args[3]) == 'number' && args[3] >= 0 && args[3] <= 1)) {\n                return 'rgb';\n            }\n        }\n    });\n\n    /*\n     * Based on implementation by Neil Bartlett\n     * https://github.com/neilbartlett/color-temperature\n     */\n\n    var log = Math.log;\n\n    var temperature2rgb = function (kelvin) {\n        var temp = kelvin / 100;\n        var r,g,b;\n        if (temp < 66) {\n            r = 255;\n            g = -155.25485562709179 - 0.44596950469579133 * (g = temp-2) + 104.49216199393888 * log(g);\n            b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp-10) + 115.67994401066147 * log(b);\n        } else {\n            r = 351.97690566805693 + 0.114206453784165 * (r = temp-55) - 40.25366309332127 * log(r);\n            g = 325.4494125711974 + 0.07943456536662342 * (g = temp-50) - 28.0852963507957 * log(g);\n            b = 255;\n        }\n        return [r,g,b,1];\n    };\n\n    var temperature2rgb_1 = temperature2rgb;\n\n    /*\n     * Based on implementation by Neil Bartlett\n     * https://github.com/neilbartlett/color-temperature\n     **/\n\n\n    var unpack$v = utils.unpack;\n    var round$6 = Math.round;\n\n    var rgb2temperature = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        var rgb = unpack$v(args, 'rgb');\n        var r = rgb[0], b = rgb[2];\n        var minTemp = 1000;\n        var maxTemp = 40000;\n        var eps = 0.4;\n        var temp;\n        while (maxTemp - minTemp > eps) {\n            temp = (maxTemp + minTemp) * 0.5;\n            var rgb$1 = temperature2rgb_1(temp);\n            if ((rgb$1[2] / rgb$1[0]) >= (b / r)) {\n                maxTemp = temp;\n            } else {\n                minTemp = temp;\n            }\n        }\n        return round$6(temp);\n    };\n\n    var rgb2temperature_1 = rgb2temperature;\n\n    Color_1.prototype.temp =\n    Color_1.prototype.kelvin =\n    Color_1.prototype.temperature = function() {\n        return rgb2temperature_1(this._rgb);\n    };\n\n    chroma_1.temp =\n    chroma_1.kelvin =\n    chroma_1.temperature = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        return new (Function.prototype.bind.apply( Color_1, [ null ].concat( args, ['temp']) ));\n    };\n\n    input.format.temp =\n    input.format.kelvin =\n    input.format.temperature = temperature2rgb_1;\n\n    var type$f = utils.type;\n\n    Color_1.prototype.alpha = function(a, mutate) {\n        if ( mutate === void 0 ) mutate=false;\n\n        if (a !== undefined && type$f(a) === 'number') {\n            if (mutate) {\n                this._rgb[3] = a;\n                return this;\n            }\n            return new Color_1([this._rgb[0], this._rgb[1], this._rgb[2], a], 'rgb');\n        }\n        return this._rgb[3];\n    };\n\n    Color_1.prototype.clipped = function() {\n        return this._rgb._clipped || false;\n    };\n\n    Color_1.prototype.darken = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \tvar me = this;\n    \tvar lab = me.lab();\n    \tlab[0] -= labConstants.Kn * amount;\n    \treturn new Color_1(lab, 'lab').alpha(me.alpha(), true);\n    };\n\n    Color_1.prototype.brighten = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \treturn this.darken(-amount);\n    };\n\n    Color_1.prototype.darker = Color_1.prototype.darken;\n    Color_1.prototype.brighter = Color_1.prototype.brighten;\n\n    Color_1.prototype.get = function(mc) {\n        var ref = mc.split('.');\n        var mode = ref[0];\n        var channel = ref[1];\n        var src = this[mode]();\n        if (channel) {\n            var i = mode.indexOf(channel);\n            if (i > -1) { return src[i]; }\n            throw new Error((\"unknown channel \" + channel + \" in mode \" + mode));\n        } else {\n            return src;\n        }\n    };\n\n    var type$g = utils.type;\n    var pow$2 = Math.pow;\n\n    var EPS = 1e-7;\n    var MAX_ITER = 20;\n\n    Color_1.prototype.luminance = function(lum) {\n        if (lum !== undefined && type$g(lum) === 'number') {\n            if (lum === 0) {\n                // return pure black\n                return new Color_1([0,0,0,this._rgb[3]], 'rgb');\n            }\n            if (lum === 1) {\n                // return pure white\n                return new Color_1([255,255,255,this._rgb[3]], 'rgb');\n            }\n            // compute new color using...\n            var cur_lum = this.luminance();\n            var mode = 'rgb';\n            var max_iter = MAX_ITER;\n\n            var test = function (low, high) {\n                var mid = low.interpolate(high, 0.5, mode);\n                var lm = mid.luminance();\n                if (Math.abs(lum - lm) < EPS || !max_iter--) {\n                    // close enough\n                    return mid;\n                }\n                return lm > lum ? test(low, mid) : test(mid, high);\n            };\n\n            var rgb = (cur_lum > lum ? test(new Color_1([0,0,0]), this) : test(this, new Color_1([255,255,255]))).rgb();\n            return new Color_1(rgb.concat( [this._rgb[3]]));\n        }\n        return rgb2luminance.apply(void 0, (this._rgb).slice(0,3));\n    };\n\n\n    var rgb2luminance = function (r,g,b) {\n        // relative luminance\n        // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        r = luminance_x(r);\n        g = luminance_x(g);\n        b = luminance_x(b);\n        return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n    };\n\n    var luminance_x = function (x) {\n        x /= 255;\n        return x <= 0.03928 ? x/12.92 : pow$2((x+0.055)/1.055, 2.4);\n    };\n\n    var interpolator = {};\n\n    var type$h = utils.type;\n\n\n    var mix = function (col1, col2, f) {\n        if ( f === void 0 ) f=0.5;\n        var rest = [], len = arguments.length - 3;\n        while ( len-- > 0 ) rest[ len ] = arguments[ len + 3 ];\n\n        var mode = rest[0] || 'lrgb';\n        if (!interpolator[mode] && !rest.length) {\n            // fall back to the first supported mode\n            mode = Object.keys(interpolator)[0];\n        }\n        if (!interpolator[mode]) {\n            throw new Error((\"interpolation mode \" + mode + \" is not defined\"));\n        }\n        if (type$h(col1) !== 'object') { col1 = new Color_1(col1); }\n        if (type$h(col2) !== 'object') { col2 = new Color_1(col2); }\n        return interpolator[mode](col1, col2, f)\n            .alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n    };\n\n    Color_1.prototype.mix =\n    Color_1.prototype.interpolate = function(col2, f) {\n    \tif ( f === void 0 ) f=0.5;\n    \tvar rest = [], len = arguments.length - 2;\n    \twhile ( len-- > 0 ) rest[ len ] = arguments[ len + 2 ];\n\n    \treturn mix.apply(void 0, [ this, col2, f ].concat( rest ));\n    };\n\n    Color_1.prototype.premultiply = function(mutate) {\n    \tif ( mutate === void 0 ) mutate=false;\n\n    \tvar rgb = this._rgb;\n    \tvar a = rgb[3];\n    \tif (mutate) {\n    \t\tthis._rgb = [rgb[0]*a, rgb[1]*a, rgb[2]*a, a];\n    \t\treturn this;\n    \t} else {\n    \t\treturn new Color_1([rgb[0]*a, rgb[1]*a, rgb[2]*a, a], 'rgb');\n    \t}\n    };\n\n    Color_1.prototype.saturate = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \tvar me = this;\n    \tvar lch = me.lch();\n    \tlch[1] += labConstants.Kn * amount;\n    \tif (lch[1] < 0) { lch[1] = 0; }\n    \treturn new Color_1(lch, 'lch').alpha(me.alpha(), true);\n    };\n\n    Color_1.prototype.desaturate = function(amount) {\n    \tif ( amount === void 0 ) amount=1;\n\n    \treturn this.saturate(-amount);\n    };\n\n    var type$i = utils.type;\n\n    Color_1.prototype.set = function(mc, value, mutate) {\n        if ( mutate === void 0 ) mutate=false;\n\n        var ref = mc.split('.');\n        var mode = ref[0];\n        var channel = ref[1];\n        var src = this[mode]();\n        if (channel) {\n            var i = mode.indexOf(channel);\n            if (i > -1) {\n                if (type$i(value) == 'string') {\n                    switch(value.charAt(0)) {\n                        case '+': src[i] += +value; break;\n                        case '-': src[i] += +value; break;\n                        case '*': src[i] *= +(value.substr(1)); break;\n                        case '/': src[i] /= +(value.substr(1)); break;\n                        default: src[i] = +value;\n                    }\n                } else if (type$i(value) === 'number') {\n                    src[i] = value;\n                } else {\n                    throw new Error(\"unsupported value for Color.set\");\n                }\n                var out = new Color_1(src, mode);\n                if (mutate) {\n                    this._rgb = out._rgb;\n                    return this;\n                }\n                return out;\n            }\n            throw new Error((\"unknown channel \" + channel + \" in mode \" + mode));\n        } else {\n            return src;\n        }\n    };\n\n    var rgb$1 = function (col1, col2, f) {\n        var xyz0 = col1._rgb;\n        var xyz1 = col2._rgb;\n        return new Color_1(\n            xyz0[0] + f * (xyz1[0]-xyz0[0]),\n            xyz0[1] + f * (xyz1[1]-xyz0[1]),\n            xyz0[2] + f * (xyz1[2]-xyz0[2]),\n            'rgb'\n        )\n    };\n\n    // register interpolator\n    interpolator.rgb = rgb$1;\n\n    var sqrt$2 = Math.sqrt;\n    var pow$3 = Math.pow;\n\n    var lrgb = function (col1, col2, f) {\n        var ref = col1._rgb;\n        var x1 = ref[0];\n        var y1 = ref[1];\n        var z1 = ref[2];\n        var ref$1 = col2._rgb;\n        var x2 = ref$1[0];\n        var y2 = ref$1[1];\n        var z2 = ref$1[2];\n        return new Color_1(\n            sqrt$2(pow$3(x1,2) * (1-f) + pow$3(x2,2) * f),\n            sqrt$2(pow$3(y1,2) * (1-f) + pow$3(y2,2) * f),\n            sqrt$2(pow$3(z1,2) * (1-f) + pow$3(z2,2) * f),\n            'rgb'\n        )\n    };\n\n    // register interpolator\n    interpolator.lrgb = lrgb;\n\n    var lab$1 = function (col1, col2, f) {\n        var xyz0 = col1.lab();\n        var xyz1 = col2.lab();\n        return new Color_1(\n            xyz0[0] + f * (xyz1[0]-xyz0[0]),\n            xyz0[1] + f * (xyz1[1]-xyz0[1]),\n            xyz0[2] + f * (xyz1[2]-xyz0[2]),\n            'lab'\n        )\n    };\n\n    // register interpolator\n    interpolator.lab = lab$1;\n\n    var _hsx = function (col1, col2, f, m) {\n        var assign, assign$1;\n\n        var xyz0, xyz1;\n        if (m === 'hsl') {\n            xyz0 = col1.hsl();\n            xyz1 = col2.hsl();\n        } else if (m === 'hsv') {\n            xyz0 = col1.hsv();\n            xyz1 = col2.hsv();\n        } else if (m === 'hcg') {\n            xyz0 = col1.hcg();\n            xyz1 = col2.hcg();\n        } else if (m === 'hsi') {\n            xyz0 = col1.hsi();\n            xyz1 = col2.hsi();\n        } else if (m === 'lch' || m === 'hcl') {\n            m = 'hcl';\n            xyz0 = col1.hcl();\n            xyz1 = col2.hcl();\n        }\n\n        var hue0, hue1, sat0, sat1, lbv0, lbv1;\n        if (m.substr(0, 1) === 'h') {\n            (assign = xyz0, hue0 = assign[0], sat0 = assign[1], lbv0 = assign[2]);\n            (assign$1 = xyz1, hue1 = assign$1[0], sat1 = assign$1[1], lbv1 = assign$1[2]);\n        }\n\n        var sat, hue, lbv, dh;\n\n        if (!isNaN(hue0) && !isNaN(hue1)) {\n            // both colors have hue\n            if (hue1 > hue0 && hue1 - hue0 > 180) {\n                dh = hue1-(hue0+360);\n            } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n                dh = hue1+360-hue0;\n            } else{\n                dh = hue1 - hue0;\n            }\n            hue = hue0 + f * dh;\n        } else if (!isNaN(hue0)) {\n            hue = hue0;\n            if ((lbv1 == 1 || lbv1 == 0) && m != 'hsv') { sat = sat0; }\n        } else if (!isNaN(hue1)) {\n            hue = hue1;\n            if ((lbv0 == 1 || lbv0 == 0) && m != 'hsv') { sat = sat1; }\n        } else {\n            hue = Number.NaN;\n        }\n\n        if (sat === undefined) { sat = sat0 + f * (sat1 - sat0); }\n        lbv = lbv0 + f * (lbv1-lbv0);\n        return new Color_1([hue, sat, lbv], m);\n    };\n\n    var lch$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'lch');\n    };\n\n    // register interpolator\n    interpolator.lch = lch$1;\n    interpolator.hcl = lch$1;\n\n    var num$1 = function (col1, col2, f) {\n        var c1 = col1.num();\n        var c2 = col2.num();\n        return new Color_1(c1 + f * (c2-c1), 'num')\n    };\n\n    // register interpolator\n    interpolator.num = num$1;\n\n    var hcg$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hcg');\n    };\n\n    // register interpolator\n    interpolator.hcg = hcg$1;\n\n    var hsi$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsi');\n    };\n\n    // register interpolator\n    interpolator.hsi = hsi$1;\n\n    var hsl$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsl');\n    };\n\n    // register interpolator\n    interpolator.hsl = hsl$1;\n\n    var hsv$1 = function (col1, col2, f) {\n    \treturn _hsx(col1, col2, f, 'hsv');\n    };\n\n    // register interpolator\n    interpolator.hsv = hsv$1;\n\n    var clip_rgb$2 = utils.clip_rgb;\n    var pow$4 = Math.pow;\n    var sqrt$3 = Math.sqrt;\n    var PI$1 = Math.PI;\n    var cos$2 = Math.cos;\n    var sin$1 = Math.sin;\n    var atan2$1 = Math.atan2;\n\n    var average = function (colors, mode, weights) {\n        if ( mode === void 0 ) mode='lrgb';\n        if ( weights === void 0 ) weights=null;\n\n        var l = colors.length;\n        if (!weights) { weights = Array.from(new Array(l)).map(function () { return 1; }); }\n        // normalize weights\n        var k = l / weights.reduce(function(a, b) { return a + b; });\n        weights.forEach(function (w,i) { weights[i] *= k; });\n        // convert colors to Color objects\n        colors = colors.map(function (c) { return new Color_1(c); });\n        if (mode === 'lrgb') {\n            return _average_lrgb(colors, weights)\n        }\n        var first = colors.shift();\n        var xyz = first.get(mode);\n        var cnt = [];\n        var dx = 0;\n        var dy = 0;\n        // initial color\n        for (var i=0; i<xyz.length; i++) {\n            xyz[i] = (xyz[i] || 0) * weights[0];\n            cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n            if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n                var A = xyz[i] / 180 * PI$1;\n                dx += cos$2(A) * weights[0];\n                dy += sin$1(A) * weights[0];\n            }\n        }\n\n        var alpha = first.alpha() * weights[0];\n        colors.forEach(function (c,ci) {\n            var xyz2 = c.get(mode);\n            alpha += c.alpha() * weights[ci+1];\n            for (var i=0; i<xyz.length; i++) {\n                if (!isNaN(xyz2[i])) {\n                    cnt[i] += weights[ci+1];\n                    if (mode.charAt(i) === 'h') {\n                        var A = xyz2[i] / 180 * PI$1;\n                        dx += cos$2(A) * weights[ci+1];\n                        dy += sin$1(A) * weights[ci+1];\n                    } else {\n                        xyz[i] += xyz2[i] * weights[ci+1];\n                    }\n                }\n            }\n        });\n\n        for (var i$1=0; i$1<xyz.length; i$1++) {\n            if (mode.charAt(i$1) === 'h') {\n                var A$1 = atan2$1(dy / cnt[i$1], dx / cnt[i$1]) / PI$1 * 180;\n                while (A$1 < 0) { A$1 += 360; }\n                while (A$1 >= 360) { A$1 -= 360; }\n                xyz[i$1] = A$1;\n            } else {\n                xyz[i$1] = xyz[i$1]/cnt[i$1];\n            }\n        }\n        alpha /= l;\n        return (new Color_1(xyz, mode)).alpha(alpha > 0.99999 ? 1 : alpha, true);\n    };\n\n\n    var _average_lrgb = function (colors, weights) {\n        var l = colors.length;\n        var xyz = [0,0,0,0];\n        for (var i=0; i < colors.length; i++) {\n            var col = colors[i];\n            var f = weights[i] / l;\n            var rgb = col._rgb;\n            xyz[0] += pow$4(rgb[0],2) * f;\n            xyz[1] += pow$4(rgb[1],2) * f;\n            xyz[2] += pow$4(rgb[2],2) * f;\n            xyz[3] += rgb[3] * f;\n        }\n        xyz[0] = sqrt$3(xyz[0]);\n        xyz[1] = sqrt$3(xyz[1]);\n        xyz[2] = sqrt$3(xyz[2]);\n        if (xyz[3] > 0.9999999) { xyz[3] = 1; }\n        return new Color_1(clip_rgb$2(xyz));\n    };\n\n    // minimal multi-purpose interface\n\n    // @requires utils color analyze\n\n\n    var type$j = utils.type;\n\n    var pow$5 = Math.pow;\n\n    var scale = function(colors) {\n\n        // constructor\n        var _mode = 'rgb';\n        var _nacol = chroma_1('#ccc');\n        var _spread = 0;\n        // const _fixed = false;\n        var _domain = [0, 1];\n        var _pos = [];\n        var _padding = [0,0];\n        var _classes = false;\n        var _colors = [];\n        var _out = false;\n        var _min = 0;\n        var _max = 1;\n        var _correctLightness = false;\n        var _colorCache = {};\n        var _useCache = true;\n        var _gamma = 1;\n\n        // private methods\n\n        var setColors = function(colors) {\n            colors = colors || ['#fff', '#000'];\n            if (colors && type$j(colors) === 'string' && chroma_1.brewer &&\n                chroma_1.brewer[colors.toLowerCase()]) {\n                colors = chroma_1.brewer[colors.toLowerCase()];\n            }\n            if (type$j(colors) === 'array') {\n                // handle single color\n                if (colors.length === 1) {\n                    colors = [colors[0], colors[0]];\n                }\n                // make a copy of the colors\n                colors = colors.slice(0);\n                // convert to chroma classes\n                for (var c=0; c<colors.length; c++) {\n                    colors[c] = chroma_1(colors[c]);\n                }\n                // auto-fill color position\n                _pos.length = 0;\n                for (var c$1=0; c$1<colors.length; c$1++) {\n                    _pos.push(c$1/(colors.length-1));\n                }\n            }\n            resetCache();\n            return _colors = colors;\n        };\n\n        var getClass = function(value) {\n            if (_classes != null) {\n                var n = _classes.length-1;\n                var i = 0;\n                while (i < n && value >= _classes[i]) {\n                    i++;\n                }\n                return i-1;\n            }\n            return 0;\n        };\n\n        var tMapLightness = function (t) { return t; };\n        var tMapDomain = function (t) { return t; };\n\n        // const classifyValue = function(value) {\n        //     let val = value;\n        //     if (_classes.length > 2) {\n        //         const n = _classes.length-1;\n        //         const i = getClass(value);\n        //         const minc = _classes[0] + ((_classes[1]-_classes[0]) * (0 + (_spread * 0.5)));  // center of 1st class\n        //         const maxc = _classes[n-1] + ((_classes[n]-_classes[n-1]) * (1 - (_spread * 0.5)));  // center of last class\n        //         val = _min + ((((_classes[i] + ((_classes[i+1] - _classes[i]) * 0.5)) - minc) / (maxc-minc)) * (_max - _min));\n        //     }\n        //     return val;\n        // };\n\n        var getColor = function(val, bypassMap) {\n            var col, t;\n            if (bypassMap == null) { bypassMap = false; }\n            if (isNaN(val) || (val === null)) { return _nacol; }\n            if (!bypassMap) {\n                if (_classes && (_classes.length > 2)) {\n                    // find the class\n                    var c = getClass(val);\n                    t = c / (_classes.length-2);\n                } else if (_max !== _min) {\n                    // just interpolate between min/max\n                    t = (val - _min) / (_max - _min);\n                } else {\n                    t = 1;\n                }\n            } else {\n                t = val;\n            }\n\n            // domain map\n            t = tMapDomain(t);\n\n            if (!bypassMap) {\n                t = tMapLightness(t);  // lightness correction\n            }\n\n            if (_gamma !== 1) { t = pow$5(t, _gamma); }\n\n            t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n\n            t = Math.min(1, Math.max(0, t));\n\n            var k = Math.floor(t * 10000);\n\n            if (_useCache && _colorCache[k]) {\n                col = _colorCache[k];\n            } else {\n                if (type$j(_colors) === 'array') {\n                    //for i in [0.._pos.length-1]\n                    for (var i=0; i<_pos.length; i++) {\n                        var p = _pos[i];\n                        if (t <= p) {\n                            col = _colors[i];\n                            break;\n                        }\n                        if ((t >= p) && (i === (_pos.length-1))) {\n                            col = _colors[i];\n                            break;\n                        }\n                        if (t > p && t < _pos[i+1]) {\n                            t = (t-p)/(_pos[i+1]-p);\n                            col = chroma_1.interpolate(_colors[i], _colors[i+1], t, _mode);\n                            break;\n                        }\n                    }\n                } else if (type$j(_colors) === 'function') {\n                    col = _colors(t);\n                }\n                if (_useCache) { _colorCache[k] = col; }\n            }\n            return col;\n        };\n\n        var resetCache = function () { return _colorCache = {}; };\n\n        setColors(colors);\n\n        // public interface\n\n        var f = function(v) {\n            var c = chroma_1(getColor(v));\n            if (_out && c[_out]) { return c[_out](); } else { return c; }\n        };\n\n        f.classes = function(classes) {\n            if (classes != null) {\n                if (type$j(classes) === 'array') {\n                    _classes = classes;\n                    _domain = [classes[0], classes[classes.length-1]];\n                } else {\n                    var d = chroma_1.analyze(_domain);\n                    if (classes === 0) {\n                        _classes = [d.min, d.max];\n                    } else {\n                        _classes = chroma_1.limits(d, 'e', classes);\n                    }\n                }\n                return f;\n            }\n            return _classes;\n        };\n\n\n        f.domain = function(domain) {\n            if (!arguments.length) {\n                return _domain;\n            }\n            _min = domain[0];\n            _max = domain[domain.length-1];\n            _pos = [];\n            var k = _colors.length;\n            if ((domain.length === k) && (_min !== _max)) {\n                // update positions\n                for (var i = 0, list = Array.from(domain); i < list.length; i += 1) {\n                    var d = list[i];\n\n                  _pos.push((d-_min) / (_max-_min));\n                }\n            } else {\n                for (var c=0; c<k; c++) {\n                    _pos.push(c/(k-1));\n                }\n                if (domain.length > 2) {\n                    // set domain map\n                    var tOut = domain.map(function (d,i) { return i/(domain.length-1); });\n                    var tBreaks = domain.map(function (d) { return (d - _min) / (_max - _min); });\n                    if (!tBreaks.every(function (val, i) { return tOut[i] === val; })) {\n                        tMapDomain = function (t) {\n                            if (t <= 0 || t >= 1) { return t; }\n                            var i = 0;\n                            while (t >= tBreaks[i+1]) { i++; }\n                            var f = (t - tBreaks[i]) / (tBreaks[i+1] - tBreaks[i]);\n                            var out = tOut[i] + f * (tOut[i+1] - tOut[i]);\n                            return out;\n                        };\n                    }\n\n                }\n            }\n            _domain = [_min, _max];\n            return f;\n        };\n\n        f.mode = function(_m) {\n            if (!arguments.length) {\n                return _mode;\n            }\n            _mode = _m;\n            resetCache();\n            return f;\n        };\n\n        f.range = function(colors, _pos) {\n            setColors(colors, _pos);\n            return f;\n        };\n\n        f.out = function(_o) {\n            _out = _o;\n            return f;\n        };\n\n        f.spread = function(val) {\n            if (!arguments.length) {\n                return _spread;\n            }\n            _spread = val;\n            return f;\n        };\n\n        f.correctLightness = function(v) {\n            if (v == null) { v = true; }\n            _correctLightness = v;\n            resetCache();\n            if (_correctLightness) {\n                tMapLightness = function(t) {\n                    var L0 = getColor(0, true).lab()[0];\n                    var L1 = getColor(1, true).lab()[0];\n                    var pol = L0 > L1;\n                    var L_actual = getColor(t, true).lab()[0];\n                    var L_ideal = L0 + ((L1 - L0) * t);\n                    var L_diff = L_actual - L_ideal;\n                    var t0 = 0;\n                    var t1 = 1;\n                    var max_iter = 20;\n                    while ((Math.abs(L_diff) > 1e-2) && (max_iter-- > 0)) {\n                        (function() {\n                            if (pol) { L_diff *= -1; }\n                            if (L_diff < 0) {\n                                t0 = t;\n                                t += (t1 - t) * 0.5;\n                            } else {\n                                t1 = t;\n                                t += (t0 - t) * 0.5;\n                            }\n                            L_actual = getColor(t, true).lab()[0];\n                            return L_diff = L_actual - L_ideal;\n                        })();\n                    }\n                    return t;\n                };\n            } else {\n                tMapLightness = function (t) { return t; };\n            }\n            return f;\n        };\n\n        f.padding = function(p) {\n            if (p != null) {\n                if (type$j(p) === 'number') {\n                    p = [p,p];\n                }\n                _padding = p;\n                return f;\n            } else {\n                return _padding;\n            }\n        };\n\n        f.colors = function(numColors, out) {\n            // If no arguments are given, return the original colors that were provided\n            if (arguments.length < 2) { out = 'hex'; }\n            var result = [];\n\n            if (arguments.length === 0) {\n                result = _colors.slice(0);\n\n            } else if (numColors === 1) {\n                result = [f(0.5)];\n\n            } else if (numColors > 1) {\n                var dm = _domain[0];\n                var dd = _domain[1] - dm;\n                result = __range__(0, numColors, false).map(function (i) { return f( dm + ((i/(numColors-1)) * dd) ); });\n\n            } else { // returns all colors based on the defined classes\n                colors = [];\n                var samples = [];\n                if (_classes && (_classes.length > 2)) {\n                    for (var i = 1, end = _classes.length, asc = 1 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n                        samples.push((_classes[i-1]+_classes[i])*0.5);\n                    }\n                } else {\n                    samples = _domain;\n                }\n                result = samples.map(function (v) { return f(v); });\n            }\n\n            if (chroma_1[out]) {\n                result = result.map(function (c) { return c[out](); });\n            }\n            return result;\n        };\n\n        f.cache = function(c) {\n            if (c != null) {\n                _useCache = c;\n                return f;\n            } else {\n                return _useCache;\n            }\n        };\n\n        f.gamma = function(g) {\n            if (g != null) {\n                _gamma = g;\n                return f;\n            } else {\n                return _gamma;\n            }\n        };\n\n        f.nodata = function(d) {\n            if (d != null) {\n                _nacol = chroma_1(d);\n                return f;\n            } else {\n                return _nacol;\n            }\n        };\n\n        return f;\n    };\n\n    function __range__(left, right, inclusive) {\n      var range = [];\n      var ascending = left < right;\n      var end = !inclusive ? right : ascending ? right + 1 : right - 1;\n      for (var i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n        range.push(i);\n      }\n      return range;\n    }\n\n    //\n    // interpolates between a set of colors uzing a bezier spline\n    //\n\n    // @requires utils lab\n\n\n\n\n    var bezier = function(colors) {\n        var assign, assign$1, assign$2;\n\n        var I, lab0, lab1, lab2;\n        colors = colors.map(function (c) { return new Color_1(c); });\n        if (colors.length === 2) {\n            // linear interpolation\n            (assign = colors.map(function (c) { return c.lab(); }), lab0 = assign[0], lab1 = assign[1]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return lab0[i] + (t * (lab1[i] - lab0[i])); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 3) {\n            // quadratic bezier interpolation\n            (assign$1 = colors.map(function (c) { return c.lab(); }), lab0 = assign$1[0], lab1 = assign$1[1], lab2 = assign$1[2]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return ((1-t)*(1-t) * lab0[i]) + (2 * (1-t) * t * lab1[i]) + (t * t * lab2[i]); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 4) {\n            // cubic bezier interpolation\n            var lab3;\n            (assign$2 = colors.map(function (c) { return c.lab(); }), lab0 = assign$2[0], lab1 = assign$2[1], lab2 = assign$2[2], lab3 = assign$2[3]);\n            I = function(t) {\n                var lab = ([0, 1, 2].map(function (i) { return ((1-t)*(1-t)*(1-t) * lab0[i]) + (3 * (1-t) * (1-t) * t * lab1[i]) + (3 * (1-t) * t * t * lab2[i]) + (t*t*t * lab3[i]); }));\n                return new Color_1(lab, 'lab');\n            };\n        } else if (colors.length === 5) {\n            var I0 = bezier(colors.slice(0, 3));\n            var I1 = bezier(colors.slice(2, 5));\n            I = function(t) {\n                if (t < 0.5) {\n                    return I0(t*2);\n                } else {\n                    return I1((t-0.5)*2);\n                }\n            };\n        }\n        return I;\n    };\n\n    var bezier_1 = function (colors) {\n        var f = bezier(colors);\n        f.scale = function () { return scale(f); };\n        return f;\n    };\n\n    /*\n     * interpolates between a set of colors uzing a bezier spline\n     * blend mode formulas taken from http://www.venture-ware.com/kevin/coding/lets-learn-math-photoshop-blend-modes/\n     */\n\n\n\n\n    var blend = function (bottom, top, mode) {\n        if (!blend[mode]) {\n            throw new Error('unknown blend mode ' + mode);\n        }\n        return blend[mode](bottom, top);\n    };\n\n    var blend_f = function (f) { return function (bottom,top) {\n            var c0 = chroma_1(top).rgb();\n            var c1 = chroma_1(bottom).rgb();\n            return chroma_1.rgb(f(c0, c1));\n        }; };\n\n    var each = function (f) { return function (c0, c1) {\n            var out = [];\n            out[0] = f(c0[0], c1[0]);\n            out[1] = f(c0[1], c1[1]);\n            out[2] = f(c0[2], c1[2]);\n            return out;\n        }; };\n\n    var normal = function (a) { return a; };\n    var multiply = function (a,b) { return a * b / 255; };\n    var darken$1 = function (a,b) { return a > b ? b : a; };\n    var lighten = function (a,b) { return a > b ? a : b; };\n    var screen = function (a,b) { return 255 * (1 - (1-a/255) * (1-b/255)); };\n    var overlay = function (a,b) { return b < 128 ? 2 * a * b / 255 : 255 * (1 - 2 * (1 - a / 255 ) * ( 1 - b / 255 )); };\n    var burn = function (a,b) { return 255 * (1 - (1 - b / 255) / (a/255)); };\n    var dodge = function (a,b) {\n        if (a === 255) { return 255; }\n        a = 255 * (b / 255) / (1 - a / 255);\n        return a > 255 ? 255 : a\n    };\n\n    // # add = (a,b) ->\n    // #     if (a + b > 255) then 255 else a + b\n\n    blend.normal = blend_f(each(normal));\n    blend.multiply = blend_f(each(multiply));\n    blend.screen = blend_f(each(screen));\n    blend.overlay = blend_f(each(overlay));\n    blend.darken = blend_f(each(darken$1));\n    blend.lighten = blend_f(each(lighten));\n    blend.dodge = blend_f(each(dodge));\n    blend.burn = blend_f(each(burn));\n    // blend.add = blend_f(each(add));\n\n    var blend_1 = blend;\n\n    // cubehelix interpolation\n    // based on D.A. Green \"A colour scheme for the display of astronomical intensity images\"\n    // http://astron-soc.in/bulletin/11June/289392011.pdf\n\n    var type$k = utils.type;\n    var clip_rgb$3 = utils.clip_rgb;\n    var TWOPI$2 = utils.TWOPI;\n    var pow$6 = Math.pow;\n    var sin$2 = Math.sin;\n    var cos$3 = Math.cos;\n\n\n    var cubehelix = function(start, rotations, hue, gamma, lightness) {\n        if ( start === void 0 ) start=300;\n        if ( rotations === void 0 ) rotations=-1.5;\n        if ( hue === void 0 ) hue=1;\n        if ( gamma === void 0 ) gamma=1;\n        if ( lightness === void 0 ) lightness=[0,1];\n\n        var dh = 0, dl;\n        if (type$k(lightness) === 'array') {\n            dl = lightness[1] - lightness[0];\n        } else {\n            dl = 0;\n            lightness = [lightness, lightness];\n        }\n\n        var f = function(fract) {\n            var a = TWOPI$2 * (((start+120)/360) + (rotations * fract));\n            var l = pow$6(lightness[0] + (dl * fract), gamma);\n            var h = dh !== 0 ? hue[0] + (fract * dh) : hue;\n            var amp = (h * l * (1-l)) / 2;\n            var cos_a = cos$3(a);\n            var sin_a = sin$2(a);\n            var r = l + (amp * ((-0.14861 * cos_a) + (1.78277* sin_a)));\n            var g = l + (amp * ((-0.29227 * cos_a) - (0.90649* sin_a)));\n            var b = l + (amp * (+1.97294 * cos_a));\n            return chroma_1(clip_rgb$3([r*255,g*255,b*255,1]));\n        };\n\n        f.start = function(s) {\n            if ((s == null)) { return start; }\n            start = s;\n            return f;\n        };\n\n        f.rotations = function(r) {\n            if ((r == null)) { return rotations; }\n            rotations = r;\n            return f;\n        };\n\n        f.gamma = function(g) {\n            if ((g == null)) { return gamma; }\n            gamma = g;\n            return f;\n        };\n\n        f.hue = function(h) {\n            if ((h == null)) { return hue; }\n            hue = h;\n            if (type$k(hue) === 'array') {\n                dh = hue[1] - hue[0];\n                if (dh === 0) { hue = hue[1]; }\n            } else {\n                dh = 0;\n            }\n            return f;\n        };\n\n        f.lightness = function(h) {\n            if ((h == null)) { return lightness; }\n            if (type$k(h) === 'array') {\n                lightness = h;\n                dl = h[1] - h[0];\n            } else {\n                lightness = [h,h];\n                dl = 0;\n            }\n            return f;\n        };\n\n        f.scale = function () { return chroma_1.scale(f); };\n\n        f.hue(hue);\n\n        return f;\n    };\n\n    var digits = '0123456789abcdef';\n\n    var floor$2 = Math.floor;\n    var random = Math.random;\n\n    var random_1 = function () {\n        var code = '#';\n        for (var i=0; i<6; i++) {\n            code += digits.charAt(floor$2(random() * 16));\n        }\n        return new Color_1(code, 'hex');\n    };\n\n    var log$1 = Math.log;\n    var pow$7 = Math.pow;\n    var floor$3 = Math.floor;\n    var abs = Math.abs;\n\n\n    var analyze = function (data, key) {\n        if ( key === void 0 ) key=null;\n\n        var r = {\n            min: Number.MAX_VALUE,\n            max: Number.MAX_VALUE*-1,\n            sum: 0,\n            values: [],\n            count: 0\n        };\n        if (type(data) === 'object') {\n            data = Object.values(data);\n        }\n        data.forEach(function (val) {\n            if (key && type(val) === 'object') { val = val[key]; }\n            if (val !== undefined && val !== null && !isNaN(val)) {\n                r.values.push(val);\n                r.sum += val;\n                if (val < r.min) { r.min = val; }\n                if (val > r.max) { r.max = val; }\n                r.count += 1;\n            }\n        });\n\n        r.domain = [r.min, r.max];\n\n        r.limits = function (mode, num) { return limits(r, mode, num); };\n\n        return r;\n    };\n\n\n    var limits = function (data, mode, num) {\n        if ( mode === void 0 ) mode='equal';\n        if ( num === void 0 ) num=7;\n\n        if (type(data) == 'array') {\n            data = analyze(data);\n        }\n        var min = data.min;\n        var max = data.max;\n        var values = data.values.sort(function (a,b) { return a-b; });\n\n        if (num === 1) { return [min,max]; }\n\n        var limits = [];\n\n        if (mode.substr(0,1) === 'c') { // continuous\n            limits.push(min);\n            limits.push(max);\n        }\n\n        if (mode.substr(0,1) === 'e') { // equal interval\n            limits.push(min);\n            for (var i=1; i<num; i++) {\n                limits.push(min+((i/num)*(max-min)));\n            }\n            limits.push(max);\n        }\n\n        else if (mode.substr(0,1) === 'l') { // log scale\n            if (min <= 0) {\n                throw new Error('Logarithmic scales are only possible for values > 0');\n            }\n            var min_log = Math.LOG10E * log$1(min);\n            var max_log = Math.LOG10E * log$1(max);\n            limits.push(min);\n            for (var i$1=1; i$1<num; i$1++) {\n                limits.push(pow$7(10, min_log + ((i$1/num) * (max_log - min_log))));\n            }\n            limits.push(max);\n        }\n\n        else if (mode.substr(0,1) === 'q') { // quantile scale\n            limits.push(min);\n            for (var i$2=1; i$2<num; i$2++) {\n                var p = ((values.length-1) * i$2)/num;\n                var pb = floor$3(p);\n                if (pb === p) {\n                    limits.push(values[pb]);\n                } else { // p > pb\n                    var pr = p - pb;\n                    limits.push((values[pb]*(1-pr)) + (values[pb+1]*pr));\n                }\n            }\n            limits.push(max);\n\n        }\n\n        else if (mode.substr(0,1) === 'k') { // k-means clustering\n            /*\n            implementation based on\n            http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n            simplified for 1-d input values\n            */\n            var cluster;\n            var n = values.length;\n            var assignments = new Array(n);\n            var clusterSizes = new Array(num);\n            var repeat = true;\n            var nb_iters = 0;\n            var centroids = null;\n\n            // get seed values\n            centroids = [];\n            centroids.push(min);\n            for (var i$3=1; i$3<num; i$3++) {\n                centroids.push(min + ((i$3/num) * (max-min)));\n            }\n            centroids.push(max);\n\n            while (repeat) {\n                // assignment step\n                for (var j=0; j<num; j++) {\n                    clusterSizes[j] = 0;\n                }\n                for (var i$4=0; i$4<n; i$4++) {\n                    var value = values[i$4];\n                    var mindist = Number.MAX_VALUE;\n                    var best = (void 0);\n                    for (var j$1=0; j$1<num; j$1++) {\n                        var dist = abs(centroids[j$1]-value);\n                        if (dist < mindist) {\n                            mindist = dist;\n                            best = j$1;\n                        }\n                        clusterSizes[best]++;\n                        assignments[i$4] = best;\n                    }\n                }\n\n                // update centroids step\n                var newCentroids = new Array(num);\n                for (var j$2=0; j$2<num; j$2++) {\n                    newCentroids[j$2] = null;\n                }\n                for (var i$5=0; i$5<n; i$5++) {\n                    cluster = assignments[i$5];\n                    if (newCentroids[cluster] === null) {\n                        newCentroids[cluster] = values[i$5];\n                    } else {\n                        newCentroids[cluster] += values[i$5];\n                    }\n                }\n                for (var j$3=0; j$3<num; j$3++) {\n                    newCentroids[j$3] *= 1/clusterSizes[j$3];\n                }\n\n                // check convergence\n                repeat = false;\n                for (var j$4=0; j$4<num; j$4++) {\n                    if (newCentroids[j$4] !== centroids[j$4]) {\n                        repeat = true;\n                        break;\n                    }\n                }\n\n                centroids = newCentroids;\n                nb_iters++;\n\n                if (nb_iters > 200) {\n                    repeat = false;\n                }\n            }\n\n            // finished k-means clustering\n            // the next part is borrowed from gabrielflor.it\n            var kClusters = {};\n            for (var j$5=0; j$5<num; j$5++) {\n                kClusters[j$5] = [];\n            }\n            for (var i$6=0; i$6<n; i$6++) {\n                cluster = assignments[i$6];\n                kClusters[cluster].push(values[i$6]);\n            }\n            var tmpKMeansBreaks = [];\n            for (var j$6=0; j$6<num; j$6++) {\n                tmpKMeansBreaks.push(kClusters[j$6][0]);\n                tmpKMeansBreaks.push(kClusters[j$6][kClusters[j$6].length-1]);\n            }\n            tmpKMeansBreaks = tmpKMeansBreaks.sort(function (a,b){ return a-b; });\n            limits.push(tmpKMeansBreaks[0]);\n            for (var i$7=1; i$7 < tmpKMeansBreaks.length; i$7+= 2) {\n                var v = tmpKMeansBreaks[i$7];\n                if (!isNaN(v) && (limits.indexOf(v) === -1)) {\n                    limits.push(v);\n                }\n            }\n        }\n        return limits;\n    };\n\n    var analyze_1 = {analyze: analyze, limits: limits};\n\n    var contrast = function (a, b) {\n        // WCAG contrast ratio\n        // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var l1 = a.luminance();\n        var l2 = b.luminance();\n        return l1 > l2 ? (l1 + 0.05) / (l2 + 0.05) : (l2 + 0.05) / (l1 + 0.05);\n    };\n\n    var sqrt$4 = Math.sqrt;\n    var atan2$2 = Math.atan2;\n    var abs$1 = Math.abs;\n    var cos$4 = Math.cos;\n    var PI$2 = Math.PI;\n\n    var deltaE = function(a, b, L, C) {\n        if ( L === void 0 ) L=1;\n        if ( C === void 0 ) C=1;\n\n        // Delta E (CMC)\n        // see http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CMC.html\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var ref = Array.from(a.lab());\n        var L1 = ref[0];\n        var a1 = ref[1];\n        var b1 = ref[2];\n        var ref$1 = Array.from(b.lab());\n        var L2 = ref$1[0];\n        var a2 = ref$1[1];\n        var b2 = ref$1[2];\n        var c1 = sqrt$4((a1 * a1) + (b1 * b1));\n        var c2 = sqrt$4((a2 * a2) + (b2 * b2));\n        var sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + (0.01765 * L1));\n        var sc = ((0.0638 * c1) / (1.0 + (0.0131 * c1))) + 0.638;\n        var h1 = c1 < 0.000001 ? 0.0 : (atan2$2(b1, a1) * 180.0) / PI$2;\n        while (h1 < 0) { h1 += 360; }\n        while (h1 >= 360) { h1 -= 360; }\n        var t = (h1 >= 164.0) && (h1 <= 345.0) ? (0.56 + abs$1(0.2 * cos$4((PI$2 * (h1 + 168.0)) / 180.0))) : (0.36 + abs$1(0.4 * cos$4((PI$2 * (h1 + 35.0)) / 180.0)));\n        var c4 = c1 * c1 * c1 * c1;\n        var f = sqrt$4(c4 / (c4 + 1900.0));\n        var sh = sc * (((f * t) + 1.0) - f);\n        var delL = L1 - L2;\n        var delC = c1 - c2;\n        var delA = a1 - a2;\n        var delB = b1 - b2;\n        var dH2 = ((delA * delA) + (delB * delB)) - (delC * delC);\n        var v1 = delL / (L * sl);\n        var v2 = delC / (C * sc);\n        var v3 = sh;\n        return sqrt$4((v1 * v1) + (v2 * v2) + (dH2 / (v3 * v3)));\n    };\n\n    // simple Euclidean distance\n    var distance = function(a, b, mode) {\n        if ( mode === void 0 ) mode='lab';\n\n        // Delta E (CIE 1976)\n        // see http://www.brucelindbloom.com/index.html?Equations.html\n        a = new Color_1(a);\n        b = new Color_1(b);\n        var l1 = a.get(mode);\n        var l2 = b.get(mode);\n        var sum_sq = 0;\n        for (var i in l1) {\n            var d = (l1[i] || 0) - (l2[i] || 0);\n            sum_sq += d*d;\n        }\n        return Math.sqrt(sum_sq);\n    };\n\n    var valid = function () {\n        var args = [], len = arguments.length;\n        while ( len-- ) args[ len ] = arguments[ len ];\n\n        try {\n            new (Function.prototype.bind.apply( Color_1, [ null ].concat( args) ));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    };\n\n    // some pre-defined color scales:\n\n\n\n\n    var scales = {\n    \tcool: function cool() { return scale([chroma_1.hsl(180,1,.9), chroma_1.hsl(250,.7,.4)]) },\n    \thot: function hot() { return scale(['#000','#f00','#ff0','#fff'], [0,.25,.75,1]).mode('rgb') }\n    };\n\n    /**\n        ColorBrewer colors for chroma.js\n\n        Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The\n        Pennsylvania State University.\n\n        Licensed under the Apache License, Version 2.0 (the \"License\");\n        you may not use this file except in compliance with the License.\n        You may obtain a copy of the License at\n        http://www.apache.org/licenses/LICENSE-2.0\n\n        Unless required by applicable law or agreed to in writing, software distributed\n        under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n        CONDITIONS OF ANY KIND, either express or implied. See the License for the\n        specific language governing permissions and limitations under the License.\n    */\n\n    var colorbrewer = {\n        // sequential\n        OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n        PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n        BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n        Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n        BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n        YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n        YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n        Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n        RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n        Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n        YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n        Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n        GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n        Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n        YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n        PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n        Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n        PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n        Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n\n        // diverging\n\n        Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n        RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n        RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n        PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n        PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n        RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n        BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n        RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n        PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n\n        // qualitative\n\n        Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n        Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n        Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n        Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n        Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n        Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n        Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n        Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2'],\n    };\n\n    // add lowercase aliases for case-insensitive matches\n    for (var i$1 = 0, list$1 = Object.keys(colorbrewer); i$1 < list$1.length; i$1 += 1) {\n        var key = list$1[i$1];\n\n        colorbrewer[key.toLowerCase()] = colorbrewer[key];\n    }\n\n    var colorbrewer_1 = colorbrewer;\n\n    // feel free to comment out anything to rollup\n    // a smaller chroma.js built\n\n    // io --> convert colors\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    // operators --> modify existing Colors\n\n\n\n\n\n\n\n\n\n\n    // interpolators\n\n\n\n\n\n\n\n\n\n\n    // generators -- > create new colors\n    chroma_1.average = average;\n    chroma_1.bezier = bezier_1;\n    chroma_1.blend = blend_1;\n    chroma_1.cubehelix = cubehelix;\n    chroma_1.mix = chroma_1.interpolate = mix;\n    chroma_1.random = random_1;\n    chroma_1.scale = scale;\n\n    // other utility methods\n    chroma_1.analyze = analyze_1.analyze;\n    chroma_1.contrast = contrast;\n    chroma_1.deltaE = deltaE;\n    chroma_1.distance = distance;\n    chroma_1.limits = analyze_1.limits;\n    chroma_1.valid = valid;\n\n    // scale\n    chroma_1.scales = scales;\n\n    // colors\n    chroma_1.colors = w3cx11_1;\n    chroma_1.brewer = colorbrewer_1;\n\n    var chroma_js = chroma_1;\n\n    return chroma_js;\n\n})));\n","import getZones from './getZones';\n\n/**\n * Filter an array x/y based on various criteria\n * x points are expected to be sorted\n *\n * @param {object} points\n * @param {object} [options={}]\n * @param {array} [options.from]\n * @param {array} [options.to]\n * @param {array} [options.exclusions=[]]\n * @return {{x: Array<number>, y: Array<number>}}\n */\n\nexport default function filterX(points, options = {}) {\n  const { x, y } = points;\n  const { from = x[0], to = x[x.length - 1], exclusions = [] } = options;\n\n  let zones = getZones(from, to, exclusions);\n\n\n  let currentZoneIndex = 0;\n  let newX = [];\n  let newY = [];\n  let position = 0;\n  while (position < x.length) {\n    if (\n      x[position] <= zones[currentZoneIndex].to &&\n      x[position] >= zones[currentZoneIndex].from\n    ) {\n      newX.push(x[position]);\n      newY.push(y[position]);\n    } else {\n      if (x[position] > zones[currentZoneIndex].to) {\n        currentZoneIndex++;\n        if (!zones[currentZoneIndex]) break;\n      }\n    }\n    position++;\n  }\n\n  return {\n    x: newX,\n    y: newY\n  };\n}\n","export default function getZones(from, to, exclusions = []) {\n  if (from > to) {\n    [from, to] = [to, from];\n  }\n\n  // in exclusions from and to have to be defined\n  exclusions = exclusions.filter(\n    (exclusion) => exclusion.from !== undefined && exclusion.to !== undefined\n  );\n\n  exclusions = JSON.parse(JSON.stringify(exclusions));\n  // we ensure that from before to\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from > exclusion.to) {\n      [exclusion.to, exclusion.from] = [exclusion.from, exclusion.to];\n    }\n  });\n\n  exclusions.sort((a, b) => a.from - b.from);\n\n  // we will rework the exclusions in order to remove overlap and outside range (from / to)\n  exclusions.forEach((exclusion) => {\n    if (exclusion.from < from) exclusion.from = from;\n    if (exclusion.to > to) exclusion.to = to;\n  });\n  for (let i = 0; i < exclusions.length - 1; i++) {\n    if (exclusions[i].to > exclusions[i + 1].from) {\n      exclusions[i].to = exclusions[i + 1].from;\n    }\n  }\n  exclusions = exclusions.filter((exclusion) => exclusion.from < exclusion.to);\n\n  if (!exclusions || exclusions.length === 0) {\n    return [{ from, to }];\n  }\n\n  let zones = [];\n  let currentFrom = from;\n  for (let exclusion of exclusions) {\n    if (currentFrom < exclusion.from) {\n      zones.push({\n        from: currentFrom,\n        to: exclusion.from\n      });\n    }\n\n    currentFrom = exclusion.to;\n  }\n  if (currentFrom < to) {\n    zones.push({\n      from: currentFrom,\n      to: to\n    });\n  }\n\n  return zones;\n}\n","import { getBoxPlotData } from '../spectra/getBoxPlotData';\n\nexport function getBoxPlotAnnotations(spectra, options = {}) {\n  const {\n    q13FillColor = '#000',\n    q13FillOpacity = 0.3,\n    q2StrokeColor = '#000',\n    q2StrokeWidth = 3,\n    minMaxFillColor = '#000',\n    minMaxFillOpacity = 0.15,\n  } = options;\n  let annotations = [];\n\n  let data = getBoxPlotData(spectra);\n  if (q13FillOpacity && q13FillColor) {\n    let q13 = [];\n    for (let i = 0; i < data.x.length; i++) {\n      q13.push({\n        x: data.x[i],\n        y: data.Q1[i],\n      });\n    }\n    for (let i = data.x.length - 1; i >= 0; i--) {\n      q13.push({\n        x: data.x[i],\n        y: data.Q3[i],\n      });\n    }\n    annotations.push({\n      type: 'polygon',\n      layer: 0,\n      properties: {\n        fillColor: q13FillColor,\n        fillOpacity: q13FillOpacity,\n        strokeWidth: 0.0000001,\n        position: q13,\n      },\n    });\n  }\n\n  if (q2StrokeColor && q2StrokeWidth) {\n    let q2 = [];\n    for (let i = 0; i < data.x.length; i++) {\n      q2.push({\n        x: data.x[i],\n        y: data.Q2[i],\n      });\n    }\n    // Temp code because polyline is not working\n    for (let i = data.x.length - 1; i >= 0; i--) {\n      q2.push({\n        x: data.x[i],\n        y: data.Q2[i],\n      });\n    }\n\n    annotations.push({\n      type: 'polygon',\n      layer: 0,\n      properties: {\n        strokeWidth: q2StrokeWidth,\n        strokeColor: q2StrokeColor,\n        position: q2,\n      },\n    });\n  }\n\n  if (minMaxFillColor && minMaxFillOpacity) {\n    let minMax = [];\n    for (let i = 0; i < data.x.length; i++) {\n      minMax.push({\n        x: data.x[i],\n        y: data.min[i],\n      });\n    }\n    for (let i = data.x.length - 1; i >= 0; i--) {\n      minMax.push({\n        x: data.x[i],\n        y: data.max[i],\n      });\n    }\n\n    annotations.push({\n      type: 'polygon',\n      layer: 0,\n      properties: {\n        fillColor: minMaxFillColor,\n        fillOpacity: minMaxFillOpacity,\n        strokeWidth: 0.0000001,\n        strokeColor: '#FFF',\n        position: minMax,\n      },\n    });\n  }\n\n  return annotations;\n}\n","import { xBoxPlot } from 'ml-spectra-processing';\n\n/**\n * @private\n * @param {*} spectra\n */\n\nexport function getBoxPlotData(spectra) {\n  let matrix = [];\n  let x = spectra[0].normalized.x;\n  for (let spectrum of spectra) {\n    matrix.push(spectrum.normalized.y);\n  }\n\n  let nbRow = matrix.length;\n  let nbColumn = matrix[0].length;\n  let result;\n  let aColumn = new Float64Array(nbRow);\n  for (let column = 0; column < nbColumn; column++) {\n    for (let row = 0; row < nbRow; row++) {\n      aColumn[row] = matrix[row][column];\n    }\n    let info = xBoxPlot(aColumn);\n    if (!result) {\n      result = { x };\n      for (let key in info) {\n        result[key] = [];\n      }\n    }\n    for (let key in info) {\n      result[key].push(info[key]);\n    }\n  }\n  return result;\n}\n","export function addChartDataStyle(data, spectrum) {\n  data.styles = {\n    unselected: {\n      lineColor: spectrum.meta.color || 'darkgrey',\n      lineWidth: 1,\n      lineStyle: 1,\n    },\n    selected: {\n      lineColor: spectrum.meta.color || 'darkgrey',\n      lineWidth: 3,\n      lineStyle: 1,\n    },\n  };\n  data.label = spectrum.meta.id || spectrum.id;\n}\n","/**\n * @private\n * @param {*} spectra\n * @param {object} options\n */\n\nexport function getNormalizedData(spectra, options = {}) {\n  const { ids } = options;\n\n  let matrix = [];\n  let meta = [];\n  let currentIDs = [];\n  let x = [];\n\n  if (Array.isArray(spectra) && spectra.length > 0) {\n    for (let spectrum of spectra) {\n      if (!ids || ids.includes(spectrum.id)) {\n        currentIDs.push(spectrum.id);\n        matrix.push(spectrum.normalized.y);\n        meta.push(spectrum.meta);\n      }\n    }\n    x = spectra[0].normalized.x;\n  }\n\n  return { ids: currentIDs, matrix, meta, x };\n}\n","/**\n * @private\n * @param {Array<object>} [metadata]\n * @param {object} [options={}] scale spectra based on various parameters\n * @param {string} [options.propertyName=\"category\"]\n */\n\nexport function getCategoriesStats(metadata, options = {}) {\n  const { propertyName = 'category' } = options;\n  let categories = {};\n  let classNumber = 0;\n  for (let metadatum of metadata) {\n    let value = metadatum[propertyName];\n    if (!categories[value]) {\n      categories[value] = {\n        classNumber: classNumber++,\n        counter: 0,\n      };\n    }\n    categories[value].counter++;\n  }\n  return categories;\n}\n","const GC_MS_FIELDS = ['TIC', '.RIC', 'SCANNUMBER'];\n\nexport function complexChromatogram(result) {\n  let spectra = result.spectra;\n  let length = spectra.length;\n  let chromatogram = {\n    times: new Array(length),\n    series: {\n      ms: {\n        dimension: 2,\n        data: new Array(length),\n      },\n    },\n  };\n\n  let existingGCMSFields = [];\n  for (let i = 0; i < GC_MS_FIELDS.length; i++) {\n    let label = convertMSFieldToLabel(GC_MS_FIELDS[i]);\n    if (spectra[0][label]) {\n      existingGCMSFields.push(label);\n      chromatogram.series[label] = {\n        dimension: 1,\n        data: new Array(length),\n      };\n    }\n  }\n\n  for (let i = 0; i < length; i++) {\n    let spectrum = spectra[i];\n    chromatogram.times[i] = spectrum.pageValue;\n    for (let j = 0; j < existingGCMSFields.length; j++) {\n      chromatogram.series[existingGCMSFields[j]].data[i] = parseFloat(\n        spectrum[existingGCMSFields[j]],\n      );\n    }\n    if (spectrum.data) {\n      chromatogram.series.ms.data[i] = [spectrum.data.x, spectrum.data.y];\n    }\n  }\n  result.chromatogram = chromatogram;\n}\n\nexport function isMSField(canonicDataLabel) {\n  return GC_MS_FIELDS.indexOf(canonicDataLabel) !== -1;\n}\n\nexport function convertMSFieldToLabel(value) {\n  return value.toLowerCase().replace(/[^a-z0-9]/g, '');\n}\n","export default function convertToFloatArray(stringArray) {\n  let floatArray = [];\n  for (let i = 0; i < stringArray.length; i++) {\n    floatArray.push(parseFloat(stringArray[i]));\n  }\n  return floatArray;\n}\n","export default function fastParseXYData(spectrum, value) {\n  // TODO need to deal with result\n  //  console.log(value);\n  // we check if deltaX is defined otherwise we calculate it\n\n  let yFactor = spectrum.yFactor;\n  let deltaX = spectrum.deltaX;\n\n  spectrum.isXYdata = true;\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  let currentX = spectrum.firstX;\n  let currentY = spectrum.firstY;\n\n  // we skip the first line\n  //\n  let endLine = false;\n  let ascii;\n  let i = 0;\n  for (; i < value.length; i++) {\n    ascii = value.charCodeAt(i);\n    if (ascii === 13 || ascii === 10) {\n      endLine = true;\n    } else {\n      if (endLine) break;\n    }\n  }\n\n  // we proceed taking the i after the first line\n  let newLine = true;\n  let isDifference = false;\n  let isLastDifference = false;\n  let lastDifference = 0;\n  let isDuplicate = false;\n  let inComment = false;\n  let currentValue = 0; // can be a difference or a duplicate\n  let lastValue = 0; // must be the real last value\n  let isNegative = false;\n  let inValue = false;\n  let skipFirstValue = false;\n  let decimalPosition = 0;\n  for (; i <= value.length; i++) {\n    if (i === value.length) ascii = 13;\n    else ascii = value.charCodeAt(i);\n    if (inComment) {\n      // we should ignore the text if we are after $$\n      if (ascii === 13 || ascii === 10) {\n        newLine = true;\n        inComment = false;\n      }\n    } else {\n      // when is it a new value ?\n      // when it is not a digit, . or comma\n      // it is a number that is either new or we continue\n      if (ascii <= 57 && ascii >= 48) {\n        // a number\n        inValue = true;\n        if (decimalPosition > 0) {\n          currentValue += (ascii - 48) / Math.pow(10, decimalPosition++);\n        } else {\n          currentValue *= 10;\n          currentValue += ascii - 48;\n        }\n      } else if (ascii === 44 || ascii === 46) {\n        // a \",\" or \".\"\n        inValue = true;\n        decimalPosition++;\n      } else {\n        if (inValue) {\n          // need to process the previous value\n          if (newLine) {\n            newLine = false; // we don't check the X value\n            // console.log(\"NEW LINE\",isDifference, lastDifference);\n            // if new line and lastDifference, the first value is just a check !\n            // that we don't check ...\n            if (isLastDifference) skipFirstValue = true;\n          } else {\n            // need to deal with duplicate and differences\n            if (skipFirstValue) {\n              skipFirstValue = false;\n            } else {\n              if (isDifference) {\n                lastDifference = isNegative ? 0 - currentValue : currentValue;\n                isLastDifference = true;\n                isDifference = false;\n              } else if (!isDuplicate) {\n                lastValue = isNegative ? 0 - currentValue : currentValue;\n              }\n              let duplicate = isDuplicate ? currentValue - 1 : 1;\n              for (let j = 0; j < duplicate; j++) {\n                if (isLastDifference) {\n                  currentY += lastDifference;\n                } else {\n                  currentY = lastValue;\n                }\n                currentData.x.push(currentX);\n                currentData.y.push(currentY * yFactor);\n                currentX += deltaX;\n              }\n            }\n          }\n          isNegative = false;\n          currentValue = 0;\n          decimalPosition = 0;\n          inValue = false;\n          isDuplicate = false;\n        }\n\n        // positive SQZ digits @ A B C D E F G H I (ascii 64-73)\n        if (ascii < 74 && ascii > 63) {\n          inValue = true;\n          isLastDifference = false;\n          currentValue = ascii - 64;\n        } else if (ascii > 96 && ascii < 106) {\n          // negative SQZ digits a b c d e f g h i (ascii 97-105)\n          inValue = true;\n          isLastDifference = false;\n          currentValue = ascii - 96;\n          isNegative = true;\n        } else if (ascii === 115) {\n          // DUP digits S T U V W X Y Z s (ascii 83-90, 115)\n          inValue = true;\n          isDuplicate = true;\n          currentValue = 9;\n        } else if (ascii > 82 && ascii < 91) {\n          inValue = true;\n          isDuplicate = true;\n          currentValue = ascii - 82;\n        } else if (ascii > 73 && ascii < 83) {\n          // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n          inValue = true;\n          isDifference = true;\n          currentValue = ascii - 73;\n        } else if (ascii > 105 && ascii < 115) {\n          // negative DIF digits j k l m n o p q r (ascii 106-114)\n          inValue = true;\n          isDifference = true;\n          currentValue = ascii - 105;\n          isNegative = true;\n        } else if (ascii === 36 && value.charCodeAt(i + 1) === 36) {\n          // $ sign, we need to check the next one\n          inValue = true;\n          inComment = true;\n        } else if (ascii === 37) {\n          // positive DIF digits % J K L M N O P Q R (ascii 37, 74-82)\n          inValue = true;\n          isDifference = true;\n          currentValue = 0;\n          isNegative = false;\n        } else if (ascii === 45) {\n          // a \"-\"\n          // check if after there is a number, decimal or comma\n          let ascii2 = value.charCodeAt(i + 1);\n          if (\n            (ascii2 >= 48 && ascii2 <= 57) ||\n            ascii2 === 44 ||\n            ascii2 === 46\n          ) {\n            inValue = true;\n            if (!newLine) isLastDifference = false;\n            isNegative = true;\n          }\n        } else if (ascii === 13 || ascii === 10) {\n          newLine = true;\n          inComment = false;\n        }\n        // and now analyse the details ... space or tabulation\n        // if \"+\" we just don't care\n      }\n    }\n  }\n}\n","const removeCommentRegExp = /\\$\\$.*/;\nconst peakTableSplitRegExp = /[,\\t ]+/;\n\nexport default function parsePeakTable(spectrum, value, result) {\n  spectrum.isPeaktable = true;\n\n  if (!spectrum.variables || Object.keys(spectrum.variables) === 2) {\n    parseXY(spectrum, value, result);\n  } else {\n    parseXYZ(spectrum, value, result);\n  }\n\n  // we will add the data in the variables\n  if (spectrum.variables) {\n    for (let key in spectrum.variables) {\n      spectrum.variables[key].data = spectrum.data[key];\n    }\n  }\n}\n\nfunction parseXY(spectrum, value, result) {\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  // counts for around 20% of the time\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    let values = lines[i]\n      .trim()\n      .replace(removeCommentRegExp, '')\n      .split(peakTableSplitRegExp);\n    if (values.length % 2 === 0) {\n      for (let j = 0; j < values.length; j = j + 2) {\n        // takes around 40% of the time to add and parse the 2 values nearly exclusively because of parseFloat\n        currentData.x.push(parseFloat(values[j]) * spectrum.xFactor);\n        currentData.y.push(parseFloat(values[j + 1]) * spectrum.yFactor);\n      }\n    } else {\n      result.logs.push(`Format error: ${values}`);\n    }\n  }\n}\n\nfunction parseXYZ(spectrum, value, result) {\n  let currentData = {};\n  let variables = Object.keys(spectrum.variables);\n  let numberOfVariables = variables.length;\n  variables.forEach((variable) => (currentData[variable] = []));\n  spectrum.data = currentData;\n\n  // counts for around 20% of the time\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    let values = lines[i]\n      .trim()\n      .replace(removeCommentRegExp, '')\n      .split(peakTableSplitRegExp);\n    if (values.length % numberOfVariables === 0) {\n      for (let j = 0; j < values.length; j++) {\n        // todo should try to find a xFactor (y, ...)\n        currentData[variables[j % numberOfVariables]].push(\n          parseFloat(values[j]),\n        );\n      }\n    } else {\n      result.logs.push(`Format error: ${values}`);\n    }\n  }\n}\n","export default function parseXYA(spectrum, value) {\n  let removeSymbolRegExp = /(\\(+|\\)+|<+|>+|\\s+)/g;\n\n  spectrum.isXYAdata = true;\n  let values;\n  let currentData = { x: [], y: [] };\n  spectrum.data = currentData;\n\n  let lines = value.split(/,? *,?[;\\r\\n]+ */);\n\n  for (let i = 1; i < lines.length; i++) {\n    values = lines[i].trim().replace(removeSymbolRegExp, '').split(',');\n    currentData.x.push(parseFloat(values[0]));\n    currentData.y.push(parseFloat(values[1]));\n  }\n}\n","import convertTo3DZ from './convertTo3DZ';\nimport generateContourLines from './generateContourLines';\n\nexport default function add2D(result, options) {\n  let zData = convertTo3DZ(result.spectra);\n  if (!options.noContour) {\n    result.contourLines = generateContourLines(zData, options);\n    delete zData.z;\n  }\n  result.minMax = zData;\n}\n","import getMedian from 'ml-array-median';\n\nexport default function convertTo3DZ(spectra) {\n  let minZ = spectra[0].data.y[0];\n  let maxZ = minZ;\n  let ySize = spectra.length;\n  let xSize = spectra[0].data.x.length;\n\n  let z = new Array(ySize);\n  for (let i = 0; i < ySize; i++) {\n    z[i] = spectra[i].data.y;\n    for (let j = 0; j < xSize; j++) {\n      let value = z[i][j];\n      if (value < minZ) minZ = value;\n      if (value > maxZ) maxZ = value;\n    }\n  }\n\n  const firstX = spectra[0].data.x[0];\n  const lastX = spectra[0].data.x[spectra[0].data.x.length - 1]; // has to be -2 because it is a 1D array [x,y,x,y,...]\n  const firstY = spectra[0].pageValue;\n  const lastY = spectra[ySize - 1].pageValue;\n\n  // Because the min / max value are the only information about the matrix if we invert\n  // min and max we need to invert the array\n  if (firstX > lastX) {\n    for (let spectrum of z) {\n      spectrum.reverse();\n    }\n  }\n  if (firstY > lastY) {\n    z.reverse();\n  }\n\n  return {\n    z: z,\n    minX: Math.min(firstX, lastX),\n    maxX: Math.max(firstX, lastX),\n    minY: Math.min(firstY, lastY),\n    maxY: Math.max(firstY, lastY),\n    minZ: minZ,\n    maxZ: maxZ,\n    noise: getMedian(z[0].map(Math.abs)),\n  };\n}\n","export default function generateContourLines(zData, options) {\n  let noise = zData.noise;\n  let z = zData.z;\n  let povarHeight0, povarHeight1, povarHeight2, povarHeight3;\n  let isOver0, isOver1, isOver2, isOver3;\n  let nbSubSpectra = z.length;\n  let nbPovars = z[0].length;\n  let pAx, pAy, pBx, pBy;\n\n  let x0 = zData.minX;\n  let xN = zData.maxX;\n  let dx = (xN - x0) / (nbPovars - 1);\n  let y0 = zData.minY;\n  let yN = zData.maxY;\n  let dy = (yN - y0) / (nbSubSpectra - 1);\n  let minZ = zData.minZ;\n  let maxZ = zData.maxZ;\n\n  // System.out.prvarln('y0 '+y0+' yN '+yN);\n  // -------------------------\n  // Povars attribution\n  //\n  // 0----1\n  // |  / |\n  // | /  |\n  // 2----3\n  //\n  // ---------------------d------\n\n  let iter = options.nbContourLevels * 2;\n  let contourLevels = new Array(iter);\n  let lineZValue;\n  for (let level = 0; level < iter; level++) {\n    // multiply by 2 for positif and negatif\n    let contourLevel = {};\n    contourLevels[level] = contourLevel;\n    let side = level % 2;\n    let factor =\n      (maxZ - options.noiseMultiplier * noise) *\n      Math.exp((level >> 1) - options.nbContourLevels);\n    if (side === 0) {\n      lineZValue = factor + options.noiseMultiplier * noise;\n    } else {\n      lineZValue = 0 - factor - options.noiseMultiplier * noise;\n    }\n    let lines = [];\n    contourLevel.zValue = lineZValue;\n    contourLevel.lines = lines;\n\n    if (lineZValue <= minZ || lineZValue >= maxZ) continue;\n\n    for (let iSubSpectra = 0; iSubSpectra < nbSubSpectra - 1; iSubSpectra++) {\n      let subSpectra = z[iSubSpectra];\n      let subSpectraAfter = z[iSubSpectra + 1];\n      for (let povar = 0; povar < nbPovars - 1; povar++) {\n        povarHeight0 = subSpectra[povar];\n        povarHeight1 = subSpectra[povar + 1];\n        povarHeight2 = subSpectraAfter[povar];\n        povarHeight3 = subSpectraAfter[povar + 1];\n\n        isOver0 = povarHeight0 > lineZValue;\n        isOver1 = povarHeight1 > lineZValue;\n        isOver2 = povarHeight2 > lineZValue;\n        isOver3 = povarHeight3 > lineZValue;\n\n        // Example povar0 is over the plane and povar1 and\n        // povar2 are below, we find the varersections and add\n        // the segment\n        if (isOver0 !== isOver1 && isOver0 !== isOver2) {\n          pAx =\n            povar + (lineZValue - povarHeight0) / (povarHeight1 - povarHeight0);\n          pAy = iSubSpectra;\n          pBx = povar;\n          pBy =\n            iSubSpectra +\n            (lineZValue - povarHeight0) / (povarHeight2 - povarHeight0);\n          lines.push(pAx * dx + x0);\n          lines.push(pAy * dy + y0);\n          lines.push(pBx * dx + x0);\n          lines.push(pBy * dy + y0);\n        }\n        // remove push does not help !!!!\n        if (isOver3 !== isOver1 && isOver3 !== isOver2) {\n          pAx = povar + 1;\n          pAy =\n            iSubSpectra +\n            1 -\n            (lineZValue - povarHeight3) / (povarHeight1 - povarHeight3);\n          pBx =\n            povar +\n            1 -\n            (lineZValue - povarHeight3) / (povarHeight2 - povarHeight3);\n          pBy = iSubSpectra + 1;\n          lines.push(pAx * dx + x0);\n          lines.push(pAy * dy + y0);\n          lines.push(pBx * dx + x0);\n          lines.push(pBy * dy + y0);\n        }\n        // test around the diagonal\n        if (isOver1 !== isOver2) {\n          pAx =\n            (povar +\n              1 -\n              (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n              dx +\n            x0;\n          pAy =\n            (iSubSpectra +\n              (lineZValue - povarHeight1) / (povarHeight2 - povarHeight1)) *\n              dy +\n            y0;\n          if (isOver1 !== isOver0) {\n            pBx =\n              povar +\n              1 -\n              (lineZValue - povarHeight1) / (povarHeight0 - povarHeight1);\n            pBy = iSubSpectra;\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver2 !== isOver0) {\n            pBx = povar;\n            pBy =\n              iSubSpectra +\n              1 -\n              (lineZValue - povarHeight2) / (povarHeight0 - povarHeight2);\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver1 !== isOver3) {\n            pBx = povar + 1;\n            pBy =\n              iSubSpectra +\n              (lineZValue - povarHeight1) / (povarHeight3 - povarHeight1);\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n          if (isOver2 !== isOver3) {\n            pBx =\n              povar +\n              (lineZValue - povarHeight2) / (povarHeight3 - povarHeight2);\n            pBy = iSubSpectra + 1;\n            lines.push(pAx);\n            lines.push(pAy);\n            lines.push(pBx * dx + x0);\n            lines.push(pBy * dy + y0);\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    minX: zData.minX,\n    maxX: zData.maxX,\n    minY: zData.minY,\n    maxY: zData.maxY,\n    segments: contourLevels,\n  };\n}\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var maxValue = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport default max;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var minValue = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport default min;\n","import isArray from 'is-any-array';\nimport max from 'ml-array-max';\nimport min from 'ml-array-min';\n\n/**\n *\n * @param {Array} input\n * @param {object} [options={}]\n * @param {Array} [options.output=[]] specify the output array, can be the input array for in place modification\n */\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport default rescale;\n","const indent = ' '.repeat(2);\nconst indentData = ' '.repeat(4);\n\nexport function inspectMatrix() {\n  return inspectMatrixWithOptions(this);\n}\n\nexport function inspectMatrixWithOptions(matrix, options = {}) {\n  const { maxRows = 15, maxColumns = 10, maxNumSize = 8 } = options;\n  return `${matrix.constructor.name} {\n${indent}[\n${indentData}${inspectData(matrix, maxRows, maxColumns, maxNumSize)}\n${indent}]\n${indent}rows: ${matrix.rows}\n${indent}columns: ${matrix.columns}\n}`;\n}\n\nfunction inspectData(matrix, maxRows, maxColumns, maxNumSize) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j), maxNumSize));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indentData}`);\n}\n\nfunction formatNumber(num, maxNumSize) {\n  const numStr = String(num);\n  if (numStr.length <= maxNumSize) {\n    return numStr.padEnd(maxNumSize, ' ');\n  }\n  const precise = num.toPrecision(maxNumSize - 2);\n  if (precise.length <= maxNumSize) {\n    return precise;\n  }\n  const exponential = num.toExponential(maxNumSize - 2);\n  const eIndex = exponential.indexOf('e');\n  const e = exponential.slice(eIndex);\n  return exponential.slice(0, maxNumSize - e.length) + e;\n}\n","/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nexport function checkIndices(matrix, rowIndices, columnIndices) {\n  return {\n    row: checkRowIndices(matrix, rowIndices),\n    column: checkColumnIndices(matrix, columnIndices),\n  };\n}\n\nexport function checkRowIndices(matrix, rowIndices) {\n  if (typeof rowIndices !== 'object') {\n    throw new TypeError('unexpected type for row indices');\n  }\n\n  let rowOut = rowIndices.some((r) => {\n    return r < 0 || r >= matrix.rows;\n  });\n\n  if (rowOut) {\n    throw new RangeError('row indices are out of range');\n  }\n\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\n\n  return rowIndices;\n}\n\nexport function checkColumnIndices(matrix, columnIndices) {\n  if (typeof columnIndices !== 'object') {\n    throw new TypeError('unexpected type for column indices');\n  }\n\n  let columnOut = columnIndices.some((c) => {\n    return c < 0 || c >= matrix.columns;\n  });\n\n  if (columnOut) {\n    throw new RangeError('column indices are out of range');\n  }\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\n\n  return columnIndices;\n}\n\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nexport function newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n","import rescale from 'ml-array-rescale';\n\nimport { inspectMatrix, inspectMatrixWithOptions } from './inspect';\nimport { installMathOperations } from './mathOperations';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll,\n} from './stat';\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkIndices,\n} from './util';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max() {\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  maxIndex() {\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min() {\n    let v = this.get(0, 0);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n        }\n      }\n    }\n    return v;\n  }\n\n  minIndex() {\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    let result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      rescale(row, { min, max, output: row });\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      rescale(column, {\n        min: min,\n        max: max,\n        output: column,\n      });\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    let indices = checkIndices(this, rowIndices, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < indices.row.length; i++) {\n      let rowIndex = indices.row[i];\n      for (let j = 0; j < indices.column.length; j++) {\n        let columnIndex = indices.column[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let row = 0; row < this.rows; row++) {\n      for (let column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!Array.isArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!Array.isArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!Array.isArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[\n    Symbol.for('nodejs.util.inspect.custom')\n  ] = inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows > 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns > 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (Array.isArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = arrayData[0].length;\n      if (typeof nColumns !== 'number' || nColumns === 0) {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n    return this;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    if (this.rows === 1) {\n      throw new RangeError('A matrix cannot have less than one row');\n    }\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array, true));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    if (this.columns === 1) {\n      throw new RangeError('A matrix cannot have less than one column');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n","import { newArray } from './util';\n\nexport function sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nexport function varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nexport function varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nexport function centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nexport function centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nexport function centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nexport function getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nexport function getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nexport function getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nexport function scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n","export function installMathOperations(AbstractMatrix, Matrix) {\r\n  AbstractMatrix.prototype.add = function add(value) {\r\n    if (typeof value === 'number') return this.addS(value);\r\n    return this.addM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.addS = function addS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) + value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.addM = function addM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.add = function add(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.add(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.sub = function sub(value) {\r\n    if (typeof value === 'number') return this.subS(value);\r\n    return this.subM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.subS = function subS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) - value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.subM = function subM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.sub = function sub(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.sub(value);\r\n  };\r\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\r\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\r\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\r\n  AbstractMatrix.subtract = AbstractMatrix.sub;\r\n\r\n  AbstractMatrix.prototype.mul = function mul(value) {\r\n    if (typeof value === 'number') return this.mulS(value);\r\n    return this.mulM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.mulS = function mulS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) * value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.mul = function mul(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.mul(value);\r\n  };\r\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\r\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\r\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\r\n  AbstractMatrix.multiply = AbstractMatrix.mul;\r\n\r\n  AbstractMatrix.prototype.div = function div(value) {\r\n    if (typeof value === 'number') return this.divS(value);\r\n    return this.divM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.divS = function divS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) / value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.divM = function divM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.div = function div(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.div(value);\r\n  };\r\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\r\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\r\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\r\n  AbstractMatrix.divide = AbstractMatrix.div;\r\n\r\n  AbstractMatrix.prototype.mod = function mod(value) {\r\n    if (typeof value === 'number') return this.modS(value);\r\n    return this.modM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.modS = function modS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) % value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.modM = function modM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.mod = function mod(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.mod(value);\r\n  };\r\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\r\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\r\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\r\n  AbstractMatrix.modulus = AbstractMatrix.mod;\r\n\r\n  AbstractMatrix.prototype.and = function and(value) {\r\n    if (typeof value === 'number') return this.andS(value);\r\n    return this.andM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.andS = function andS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) & value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.andM = function andM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.and = function and(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.and(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.or = function or(value) {\r\n    if (typeof value === 'number') return this.orS(value);\r\n    return this.orM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.orS = function orS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) | value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.orM = function orM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.or = function or(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.or(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.xor = function xor(value) {\r\n    if (typeof value === 'number') return this.xorS(value);\r\n    return this.xorM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.xorS = function xorS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) ^ value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.xor = function xor(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.xor(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\r\n    if (typeof value === 'number') return this.leftShiftS(value);\r\n    return this.leftShiftM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) << value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.leftShift(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\r\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\r\n    return this.signPropagatingRightShiftM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) >> value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.signPropagatingRightShift(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\r\n    if (typeof value === 'number') return this.rightShiftS(value);\r\n    return this.rightShiftM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) >>> value);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.rightShift(value);\r\n  };\r\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\r\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\r\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\r\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\r\n\r\n  AbstractMatrix.prototype.not = function not() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, ~(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.not = function not(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.not();\r\n  };\r\n\r\n  AbstractMatrix.prototype.abs = function abs() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.abs(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.abs = function abs(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.abs();\r\n  };\r\n\r\n  AbstractMatrix.prototype.acos = function acos() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.acos(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.acos = function acos(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.acos();\r\n  };\r\n\r\n  AbstractMatrix.prototype.acosh = function acosh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.acosh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.acosh = function acosh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.acosh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.asin = function asin() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.asin(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.asin = function asin(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.asin();\r\n  };\r\n\r\n  AbstractMatrix.prototype.asinh = function asinh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.asinh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.asinh = function asinh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.asinh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.atan = function atan() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.atan(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.atan = function atan(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.atan();\r\n  };\r\n\r\n  AbstractMatrix.prototype.atanh = function atanh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.atanh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.atanh = function atanh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.atanh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.cbrt = function cbrt() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.cbrt(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.cbrt = function cbrt(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.cbrt();\r\n  };\r\n\r\n  AbstractMatrix.prototype.ceil = function ceil() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.ceil(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.ceil = function ceil(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.ceil();\r\n  };\r\n\r\n  AbstractMatrix.prototype.clz32 = function clz32() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.clz32(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.clz32 = function clz32(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.clz32();\r\n  };\r\n\r\n  AbstractMatrix.prototype.cos = function cos() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.cos(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.cos = function cos(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.cos();\r\n  };\r\n\r\n  AbstractMatrix.prototype.cosh = function cosh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.cosh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.cosh = function cosh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.cosh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.exp = function exp() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.exp(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.exp = function exp(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.exp();\r\n  };\r\n\r\n  AbstractMatrix.prototype.expm1 = function expm1() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.expm1(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.expm1 = function expm1(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.expm1();\r\n  };\r\n\r\n  AbstractMatrix.prototype.floor = function floor() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.floor(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.floor = function floor(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.floor();\r\n  };\r\n\r\n  AbstractMatrix.prototype.fround = function fround() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.fround(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.fround = function fround(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.fround();\r\n  };\r\n\r\n  AbstractMatrix.prototype.log = function log() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.log(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.log = function log(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.log();\r\n  };\r\n\r\n  AbstractMatrix.prototype.log1p = function log1p() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.log1p(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.log1p = function log1p(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.log1p();\r\n  };\r\n\r\n  AbstractMatrix.prototype.log10 = function log10() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.log10(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.log10 = function log10(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.log10();\r\n  };\r\n\r\n  AbstractMatrix.prototype.log2 = function log2() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.log2(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.log2 = function log2(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.log2();\r\n  };\r\n\r\n  AbstractMatrix.prototype.round = function round() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.round(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.round = function round(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.round();\r\n  };\r\n\r\n  AbstractMatrix.prototype.sign = function sign() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.sign(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.sign = function sign(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.sign();\r\n  };\r\n\r\n  AbstractMatrix.prototype.sin = function sin() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.sin(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.sin = function sin(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.sin();\r\n  };\r\n\r\n  AbstractMatrix.prototype.sinh = function sinh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.sinh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.sinh = function sinh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.sinh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.sqrt = function sqrt() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.sqrt(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.sqrt = function sqrt(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.sqrt();\r\n  };\r\n\r\n  AbstractMatrix.prototype.tan = function tan() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.tan(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.tan = function tan(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.tan();\r\n  };\r\n\r\n  AbstractMatrix.prototype.tanh = function tanh() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.tanh(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.tanh = function tanh(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.tanh();\r\n  };\r\n\r\n  AbstractMatrix.prototype.trunc = function trunc() {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.trunc(this.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.trunc = function trunc(matrix) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.trunc();\r\n  };\r\n\r\n  AbstractMatrix.pow = function pow(matrix, arg0) {\r\n    const newMatrix = new Matrix(matrix);\r\n    return newMatrix.pow(arg0);\r\n  };\r\n\r\n  AbstractMatrix.prototype.pow = function pow(value) {\r\n    if (typeof value === 'number') return this.powS(value);\r\n    return this.powM(value);\r\n  };\r\n\r\n  AbstractMatrix.prototype.powS = function powS(value) {\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.pow(this.get(i, j), value));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  AbstractMatrix.prototype.powM = function powM(matrix) {\r\n    matrix = Matrix.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n      this.columns !== matrix.columns) {\r\n      throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (let i = 0; i < this.rows; i++) {\r\n      for (let j = 0; j < this.columns; j++) {\r\n        this.set(i, j, Math.pow(this.get(i, j), matrix.get(i, j)));\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n}\r\n","/**\n * Fast Fourier Transform module\n * 1D-FFT/IFFT, 2D-FFT/IFFT (radix-2)\n */\nvar FFT = (function(){\n  var FFT;  \n  \n  if(typeof exports !== 'undefined') {\n    FFT = exports;   // for CommonJS\n  } else {\n    FFT = {};\n  }\n  \n  var version = {\n    release: '0.3.0',\n    date: '2013-03'\n  };\n  FFT.toString = function() {\n    return \"version \" + version.release + \", released \" + version.date;\n  };\n\n  // core operations\n  var _n = 0,          // order\n      _bitrev = null,  // bit reversal table\n      _cstb = null;    // sin/cos table\n\n  var core = {\n    init : function(n) {\n      if(n !== 0 && (n & (n - 1)) === 0) {\n        _n = n;\n        core._initArray();\n        core._makeBitReversalTable();\n        core._makeCosSinTable();\n      } else {\n        throw new Error(\"init: radix-2 required\");\n      }\n    },\n    // 1D-FFT\n    fft1d : function(re, im) {\n      core.fft(re, im, 1);\n    },\n    // 1D-IFFT\n    ifft1d : function(re, im) {\n      var n = 1/_n;\n      core.fft(re, im, -1);\n      for(var i=0; i<_n; i++) {\n        re[i] *= n;\n        im[i] *= n;\n      }\n    },\n     // 1D-IFFT\n    bt1d : function(re, im) {\n      core.fft(re, im, -1);\n    },\n    // 2D-FFT Not very useful if the number of rows have to be equal to cols\n    fft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.fft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.fft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // 2D-IFFT\n    ifft2d : function(re, im) {\n      var tre = [],\n          tim = [],\n          i = 0;\n      // x-axis\n      for(var y=0; y<_n; y++) {\n        i = y*_n;\n        for(var x1=0; x1<_n; x1++) {\n          tre[x1] = re[x1 + i];\n          tim[x1] = im[x1 + i];\n        }\n        core.ifft1d(tre, tim);\n        for(var x2=0; x2<_n; x2++) {\n          re[x2 + i] = tre[x2];\n          im[x2 + i] = tim[x2];\n        }\n      }\n      // y-axis\n      for(var x=0; x<_n; x++) {\n        for(var y1=0; y1<_n; y1++) {\n          i = x + y1*_n;\n          tre[y1] = re[i];\n          tim[y1] = im[i];\n        }\n        core.ifft1d(tre, tim);\n        for(var y2=0; y2<_n; y2++) {\n          i = x + y2*_n;\n          re[i] = tre[y2];\n          im[i] = tim[y2];\n        }\n      }\n    },\n    // core operation of FFT\n    fft : function(re, im, inv) {\n      var d, h, ik, m, tmp, wr, wi, xr, xi,\n          n4 = _n >> 2;\n      // bit reversal\n      for(var l=0; l<_n; l++) {\n        m = _bitrev[l];\n        if(l < m) {\n          tmp = re[l];\n          re[l] = re[m];\n          re[m] = tmp;\n          tmp = im[l];\n          im[l] = im[m];\n          im[m] = tmp;\n        }\n      }\n      // butterfly operation\n      for(var k=1; k<_n; k<<=1) {\n        h = 0;\n        d = _n/(k << 1);\n        for(var j=0; j<k; j++) {\n          wr = _cstb[h + n4];\n          wi = inv*_cstb[h];\n          for(var i=j; i<_n; i+=(k<<1)) {\n            ik = i + k;\n            xr = wr*re[ik] + wi*im[ik];\n            xi = wr*im[ik] - wi*re[ik];\n            re[ik] = re[i] - xr;\n            re[i] += xr;\n            im[ik] = im[i] - xi;\n            im[i] += xi;\n          }\n          h += d;\n        }\n      }\n    },\n    // initialize the array (supports TypedArray)\n    _initArray : function() {\n      if(typeof Uint32Array !== 'undefined') {\n        _bitrev = new Uint32Array(_n);\n      } else {\n        _bitrev = [];\n      }\n      if(typeof Float64Array !== 'undefined') {\n        _cstb = new Float64Array(_n*1.25);\n      } else {\n        _cstb = [];\n      }\n    },\n    // zero padding\n    _paddingZero : function() {\n      // TODO\n    },\n    // makes bit reversal table\n    _makeBitReversalTable : function() {\n      var i = 0,\n          j = 0,\n          k = 0;\n      _bitrev[0] = 0;\n      while(++i < _n) {\n        k = _n >> 1;\n        while(k <= j) {\n          j -= k;\n          k >>= 1;\n        }\n        j += k;\n        _bitrev[i] = j;\n      }\n    },\n    // makes trigonometiric function table\n    _makeCosSinTable : function() {\n      var n2 = _n >> 1,\n          n4 = _n >> 2,\n          n8 = _n >> 3,\n          n2p4 = n2 + n4,\n          t = Math.sin(Math.PI/_n),\n          dc = 2*t*t,\n          ds = Math.sqrt(dc*(2 - dc)),\n          c = _cstb[n4] = 1,\n          s = _cstb[0] = 0;\n      t = 2*dc;\n      for(var i=1; i<n8; i++) {\n        c -= dc;\n        dc += t*c;\n        s += ds;\n        ds -= t*s;\n        _cstb[i] = s;\n        _cstb[n4 - i] = c;\n      }\n      if(n8 !== 0) {\n        _cstb[n8] = Math.sqrt(0.5);\n      }\n      for(var j=0; j<n4; j++) {\n        _cstb[n2 - j]  = _cstb[j];\n      }\n      for(var k=0; k<n2p4; k++) {\n        _cstb[k + n2] = -_cstb[k];\n      }\n    }\n  };\n  // aliases (public APIs)\n  var apis = ['init', 'fft1d', 'ifft1d', 'fft2d', 'ifft2d'];\n  for(var i=0; i<apis.length; i++) {\n    FFT[apis[i]] = core[apis[i]];\n  }\n  FFT.bt = core.bt1d;\n  FFT.fft = core.fft1d;\n  FFT.ifft = core.ifft1d;\n  \n  return FFT;\n}).call(this);\n","// sources:\n// https://en.wikipedia.org/wiki/Gyromagnetic_ratio\n\n// TODO: can we have a better source and more digits ? @jwist\n\nexport const gyromagneticRatio = {\n  '1H': 267.52218744e6,\n  '2H': 41.065e6,\n  '3H': 285.3508e6,\n  '3He': -203.789e6,\n  '7Li': 103.962e6,\n  '13C': 67.28284e6,\n  '14N': 19.331e6,\n  '15N': -27.116e6,\n  '17O': -36.264e6,\n  '19F': 251.662e6,\n  '23Na': 70.761e6,\n  '27Al': 69.763e6,\n  '29Si': -53.19e6,\n  '31P': 108.291e6,\n  '57Fe': 8.681e6,\n  '63Cu': 71.118e6,\n  '67Zn': 16.767e6,\n  '129Xe': -73.997e6,\n};\n","export default function profiling(result, action, options) {\n  if (result.profiling) {\n    result.profiling.push({\n      action,\n      time: Date.now() - options.start,\n    });\n  }\n}\n","export default function simpleChromatogram(result) {\n  let data = result.spectra[0].data;\n  result.chromatogram = {\n    times: data.x.slice(),\n    series: {\n      intensity: {\n        dimension: 1,\n        data: data.y.slice(),\n      },\n    },\n  };\n}\n","import add2D from './2d/add2D';\nimport { complexChromatogram } from './complexChromatogram';\nimport postProcessingNMR from './postProcessingNMR';\nimport profiling from './profiling';\nimport simpleChromatogram from './simpleChromatogram';\n\nexport default function postProcessing(entriesFlat, result, options) {\n  // converting Hz to ppm\n  postProcessingNMR(entriesFlat);\n\n  for (let entry of entriesFlat) {\n    if (Object.keys(entry.ntuples).length > 0) {\n      let newNtuples = [];\n      let keys = Object.keys(entry.ntuples);\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let values = entry.ntuples[key];\n        for (let j = 0; j < values.length; j++) {\n          if (!newNtuples[j]) newNtuples[j] = {};\n          newNtuples[j][key] = values[j];\n        }\n      }\n      entry.ntuples = newNtuples;\n    }\n\n    if (entry.twoD && options.wantXY) {\n      add2D(entry, options);\n\n      profiling(result, 'Finished countour plot calculation', options);\n\n      if (!options.keepSpectra) {\n        delete entry.spectra;\n      }\n    }\n\n    // maybe it is a GC (HPLC) / MS. In this case we add a new format\n    if (options.chromatogram) {\n      if (entry.spectra.length > 1) {\n        complexChromatogram(entry);\n      } else {\n        simpleChromatogram(entry);\n      }\n      profiling(result, 'Finished chromatogram calculation', options);\n    }\n  }\n}\n","import { gyromagneticRatio } from 'nmr-processing';\n\nexport default function postProcessingNMR(entriesFlat) {\n  // specific NMR functions\n  let observeFrequency = 0;\n  let shiftOffsetVal = 0;\n\n  for (let entry of entriesFlat) {\n    for (let spectrum of entry.spectra) {\n      if (entry.ntuples && entry.ntuples.symbol) {\n        if (!observeFrequency && spectrum.observeFrequency) {\n          observeFrequency = spectrum.observeFrequency;\n        }\n        if (!shiftOffsetVal && spectrum.shiftOffsetVal) {\n          shiftOffsetVal = spectrum.shiftOffsetVal;\n        }\n      } else {\n        observeFrequency = spectrum.observeFrequency;\n        shiftOffsetVal = spectrum.shiftOffsetVal;\n      }\n\n      if (observeFrequency) {\n        if (spectrum.xUnits && spectrum.xUnits.toUpperCase().includes('HZ')) {\n          spectrum.xUnits = 'PPM';\n          spectrum.xFactor = spectrum.xFactor / observeFrequency;\n          spectrum.firstX = spectrum.firstX / observeFrequency;\n          spectrum.lastX = spectrum.lastX / observeFrequency;\n          spectrum.deltaX = spectrum.deltaX / observeFrequency;\n          for (let i = 0; i < spectrum.data.x.length; i++) {\n            spectrum.data.x[i] /= observeFrequency;\n          }\n        }\n      }\n      if (shiftOffsetVal) {\n        let shift = spectrum.firstX - shiftOffsetVal;\n        spectrum.firstX = spectrum.firstX - shift;\n        spectrum.lastX = spectrum.lastX - shift;\n        for (let i = 0; i < spectrum.data.x.length; i++) {\n          spectrum.data.x[i] -= shift;\n        }\n      }\n\n      if (\n        observeFrequency &&\n        entry.ntuples &&\n        entry.ntuples.symbol &&\n        entry.ntuples.nucleus\n      ) {\n        let unit = '';\n        let pageSymbolIndex = entry.ntuples.symbol.indexOf(spectrum.pageSymbol);\n        if (entry.ntuples.units && entry.ntuples.units[pageSymbolIndex]) {\n          unit = entry.ntuples.units[pageSymbolIndex];\n        }\n        if (unit !== 'PPM') {\n          if (pageSymbolIndex !== 0) {\n            throw Error('Not sure about this ntuples format');\n          }\n\n          let ratio0 = gyromagneticRatio[entry.ntuples.nucleus[0]];\n          let ratio1 = gyromagneticRatio[entry.ntuples.nucleus[1]];\n          if (!ratio0 || !ratio1) {\n            throw Error('Problem with determination of gyromagnetic ratio');\n          }\n          let ratio = (ratio0 / ratio1) * observeFrequency;\n          spectrum.pageValue /= ratio;\n        }\n      }\n    }\n  }\n}\n","export default function prepareNtuplesDatatable(currentEntry, spectrum, kind) {\n  let xIndex = -1;\n  let yIndex = -1;\n  let firstVariable = '';\n  let secondVariable = '';\n  if (kind.indexOf('++') > 0) {\n    firstVariable = kind.replace(/.*\\(([a-zA-Z0-9]+)\\+\\+.*/, '$1');\n    secondVariable = kind.replace(/.*\\.\\.([a-zA-Z0-9]+).*/, '$1');\n  } else {\n    kind = kind.replace(/[^a-zA-Z]/g, '');\n    firstVariable = kind.charAt(0);\n    secondVariable = kind.charAt(1);\n    spectrum.variables = {};\n    for (let symbol of kind) {\n      let lowerCaseSymbol = symbol.toLowerCase();\n      let index = currentEntry.ntuples.symbol.indexOf(symbol);\n      if (index === -1) throw Error(`Symbol undefined: ${symbol}`);\n      spectrum.variables[lowerCaseSymbol] = {};\n      for (let key in currentEntry.ntuples) {\n        if (currentEntry.ntuples[key][index]) {\n          spectrum.variables[lowerCaseSymbol][key.replace(/^var/, '')] =\n            currentEntry.ntuples[key][index];\n        }\n      }\n    }\n  }\n  xIndex = currentEntry.ntuples.symbol.indexOf(firstVariable);\n  yIndex = currentEntry.ntuples.symbol.indexOf(secondVariable);\n\n  if (xIndex === -1) xIndex = 0;\n  if (yIndex === -1) yIndex = 0;\n\n  if (currentEntry.ntuples.first) {\n    if (currentEntry.ntuples.first.length > xIndex) {\n      spectrum.firstX = currentEntry.ntuples.first[xIndex];\n    }\n    if (currentEntry.ntuples.first.length > yIndex) {\n      spectrum.firstY = currentEntry.ntuples.first[yIndex];\n    }\n  }\n  if (currentEntry.ntuples.last) {\n    if (currentEntry.ntuples.last.length > xIndex) {\n      spectrum.lastX = currentEntry.ntuples.last[xIndex];\n    }\n    if (currentEntry.ntuples.last.length > yIndex) {\n      spectrum.lastY = currentEntry.ntuples.last[yIndex];\n    }\n  }\n  if (\n    currentEntry.ntuples.vardim &&\n    currentEntry.ntuples.vardim.length > xIndex\n  ) {\n    spectrum.nbPoints = currentEntry.ntuples.vardim[xIndex];\n  }\n  if (currentEntry.ntuples.factor) {\n    if (currentEntry.ntuples.factor.length > xIndex) {\n      spectrum.xFactor = currentEntry.ntuples.factor[xIndex];\n    }\n    if (currentEntry.ntuples.factor.length > yIndex) {\n      spectrum.yFactor = currentEntry.ntuples.factor[yIndex];\n    }\n  }\n  if (currentEntry.ntuples.units) {\n    if (currentEntry.ntuples.units.length > xIndex) {\n      if (\n        currentEntry.ntuples.varname &&\n        currentEntry.ntuples.varname[xIndex]\n      ) {\n        spectrum.xUnits = `${currentEntry.ntuples.varname[xIndex]} [${currentEntry.ntuples.units[xIndex]}]`;\n      } else {\n        spectrum.xUnits = currentEntry.ntuples.units[xIndex];\n      }\n    }\n    if (currentEntry.ntuples.units.length > yIndex) {\n      if (\n        currentEntry.ntuples.varname &&\n        currentEntry.ntuples.varname[yIndex]\n      ) {\n        spectrum.yUnits = `${currentEntry.ntuples.varname[yIndex]} [${currentEntry.ntuples.units[yIndex]}]`;\n      } else {\n        spectrum.yUnits = currentEntry.ntuples.units[yIndex];\n      }\n    }\n  }\n}\n","export default function prepareSpectrum(spectrum) {\n  if (!spectrum.xFactor) spectrum.xFactor = 1;\n  if (!spectrum.yFactor) spectrum.yFactor = 1;\n}\n","import { isMSField, convertMSFieldToLabel } from './complexChromatogram';\nimport convertToFloatArray from './convertToFloatArray';\nimport fastParseXYData from './parse/fastParseXYData';\nimport parsePeakTable from './parse/parsePeakTable';\nimport parseXYA from './parse/parseXYA';\nimport postProcessing from './postProcessing';\nimport prepareNtuplesDatatable from './prepareNtuplesDatatable';\nimport prepareSpectrum from './prepareSpectrum';\nimport profiling from './profiling';\n\n// the following RegExp can only be used for XYdata, some peakTables have values with a \"E-5\" ...\nconst ntuplesSeparator = /[ \\t]*,[ \\t]*/;\n\nclass Spectrum {}\n\nconst defaultOptions = {\n  keepRecordsRegExp: /^$/,\n  canonicDataLabels: true,\n  canonicMetadataLabels: false,\n  dynamicTyping: true,\n  withoutXY: false,\n  chromatogram: false,\n  keepSpectra: false,\n  noContour: false,\n  nbContourLevels: 7,\n  noiseMultiplier: 5,\n  profiling: false,\n};\n\n/**\n *\n * @param {text} jcamp\n * @param {object} [options]\n * @param {number} [options.keepRecordsRegExp=/^$/] By default we don't keep meta information\n * @param {number} [options.canonicDataLabels=true] Canonize the Labels (uppercase without symbol)\n * @param {number} [options.canonicMetadataLabels=false] Canonize the metadata Labels (uppercase without symbol)\n * @param {number} [options.dynamicTyping=false] Convert numbers to Number\n * @param {number} [options.withoutXY=false] Remove the XY data\n * @param {number} [options.chromatogram=false] Special post-processing for GC / HPLC / MS\n * @param {number} [options.keepSpectra=false] Force to keep the spectra in case of 2D\n * @param {number} [options.noContour=false] Don't calculate countour in case of 2D\n * @param {number} [options.nbContourLevels=7] Number of positive / negative contour levels to calculate\n * @param {number} [options.noiseMultiplier=5] Define for 2D the level as 5 times the median as default\n * @param {number} [options.profiling=false] Add profiling information\n */\n\nexport default function convert(jcamp, options = {}) {\n  options = Object.assign({}, defaultOptions, options);\n  options.wantXY = !options.withoutXY;\n  options.start = Date.now();\n\n  let entriesFlat = [];\n\n  let result = {\n    profiling: options.profiling ? [] : false,\n    logs: [],\n    entries: [],\n  };\n\n  let tmpResult = { children: [] };\n  let currentEntry = tmpResult;\n  let parentsStack = [];\n\n  let spectrum = new Spectrum();\n\n  if (typeof jcamp !== 'string') {\n    throw new TypeError('the JCAMP should be a string');\n  }\n\n  profiling(result, 'Before split to LDRS', options);\n\n  let ldrs = jcamp.replace(/[\\r\\n]+##/g, '\\n##').split('\\n##');\n\n  profiling(result, 'Split to LDRS', options);\n\n  if (ldrs[0]) ldrs[0] = ldrs[0].replace(/^[\\r\\n ]*##/, '');\n\n  for (let ldr of ldrs) {\n    // This is a new LDR\n    let position = ldr.indexOf('=');\n    let dataLabel = position > 0 ? ldr.substring(0, position) : ldr;\n    let dataValue = position > 0 ? ldr.substring(position + 1).trim() : '';\n\n    let canonicDataLabel = dataLabel.replace(/[_ -]/g, '').toUpperCase();\n\n    if (canonicDataLabel === 'DATATABLE') {\n      let endLine = dataValue.indexOf('\\n');\n      if (endLine === -1) endLine = dataValue.indexOf('\\r');\n      if (endLine > 0) {\n        // ##DATA TABLE= (X++(I..I)), XYDATA\n        // We need to find the variables\n\n        let infos = dataValue.substring(0, endLine).split(/[ ,;\\t]+/);\n        prepareNtuplesDatatable(currentEntry, spectrum, infos[0]);\n\n        spectrum.datatable = infos[0];\n        if (infos[1] && infos[1].indexOf('PEAKS') > -1) {\n          canonicDataLabel = 'PEAKTABLE';\n        } else if (\n          infos[1] &&\n          (infos[1].indexOf('XYDATA') || infos[0].indexOf('++') > 0)\n        ) {\n          canonicDataLabel = 'XYDATA';\n          spectrum.deltaX =\n            (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n        }\n      }\n    }\n\n    if (canonicDataLabel === 'XYDATA') {\n      if (options.wantXY) {\n        prepareSpectrum(spectrum);\n        // well apparently we should still consider it is a PEAK TABLE if there are no '++' after\n        if (dataValue.match(/.*\\+\\+.*/)) {\n          // ex: (X++(Y..Y))\n          if (!spectrum.deltaX) {\n            spectrum.deltaX =\n              (spectrum.lastX - spectrum.firstX) / (spectrum.nbPoints - 1);\n          }\n          fastParseXYData(spectrum, dataValue, result);\n        } else {\n          parsePeakTable(spectrum, dataValue, result);\n        }\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    } else if (canonicDataLabel === 'PEAKTABLE') {\n      if (options.wantXY) {\n        prepareSpectrum(spectrum);\n        parsePeakTable(spectrum, dataValue, result);\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    }\n    if (canonicDataLabel === 'PEAKASSIGNMENTS') {\n      if (options.wantXY) {\n        if (dataValue.match(/.*(XYA).*/)) {\n          // ex: (XYA)\n          parseXYA(spectrum, dataValue);\n        }\n        currentEntry.spectra.push(spectrum);\n        spectrum = new Spectrum();\n      }\n      continue;\n    }\n\n    if (canonicDataLabel === 'TITLE') {\n      let parentEntry = currentEntry;\n      if (!parentEntry.children) {\n        parentEntry.children = [];\n      }\n      currentEntry = {\n        spectra: [],\n        ntuples: {},\n        info: {},\n        meta: {},\n      };\n      parentEntry.children.push(currentEntry);\n      parentsStack.push(parentEntry);\n      entriesFlat.push(currentEntry);\n      currentEntry.title = dataValue;\n    } else if (canonicDataLabel === 'DATATYPE') {\n      currentEntry.dataType = dataValue;\n      if (dataValue.toLowerCase().indexOf('nd') > -1) {\n        currentEntry.twoD = true;\n      }\n    } else if (canonicDataLabel === 'NTUPLES') {\n      if (dataValue.toLowerCase().indexOf('nd') > -1) {\n        currentEntry.twoD = true;\n      }\n    } else if (canonicDataLabel === 'DATACLASS') {\n      currentEntry.dataClass = dataValue;\n    } else if (canonicDataLabel === 'XUNITS') {\n      spectrum.xUnits = dataValue;\n    } else if (canonicDataLabel === 'YUNITS') {\n      spectrum.yUnits = dataValue;\n    } else if (canonicDataLabel === 'FIRSTX') {\n      spectrum.firstX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'LASTX') {\n      spectrum.lastX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'FIRSTY') {\n      spectrum.firstY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'LASTY') {\n      spectrum.lastY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'NPOINTS') {\n      spectrum.nbPoints = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'XFACTOR') {\n      spectrum.xFactor = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'YFACTOR') {\n      spectrum.yFactor = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MAXX') {\n      spectrum.maxX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MINX') {\n      spectrum.minX = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MAXY') {\n      spectrum.maxY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'MINY') {\n      spectrum.minY = parseFloat(dataValue);\n    } else if (canonicDataLabel === 'DELTAX') {\n      spectrum.deltaX = parseFloat(dataValue);\n    } else if (\n      canonicDataLabel === '.OBSERVEFREQUENCY' ||\n      canonicDataLabel === '$SFO1'\n    ) {\n      if (!spectrum.observeFrequency) {\n        spectrum.observeFrequency = parseFloat(dataValue);\n      }\n    } else if (canonicDataLabel === '.OBSERVENUCLEUS') {\n      if (!spectrum.xType) {\n        currentEntry.xType = dataValue.replace(/[^a-zA-Z0-9]/g, '');\n      }\n    } else if (canonicDataLabel === '$OFFSET') {\n      // OFFSET for Bruker spectra\n      currentEntry.shiftOffsetNum = 0;\n      if (!spectrum.shiftOffsetVal) {\n        spectrum.shiftOffsetVal = parseFloat(dataValue);\n      }\n    } else if (canonicDataLabel === '$REFERENCEPOINT') {\n      // OFFSET for Varian spectra\n      // if we activate this part it does not work for ACD specmanager\n      //         } else if (canonicDataLabel=='.SHIFTREFERENCE') {   // OFFSET FOR Bruker Spectra\n      //                 var parts = dataValue.split(/ *, */);\n      //                 currentEntry.shiftOffsetNum = parseInt(parts[2].trim());\n      //                 spectrum.shiftOffsetVal = parseFloat(parts[3].trim());\n    } else if (canonicDataLabel === 'VARNAME') {\n      currentEntry.ntuples.varname = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'SYMBOL') {\n      currentEntry.ntuples.symbol = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARTYPE') {\n      currentEntry.ntuples.vartype = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARFORM') {\n      currentEntry.ntuples.varform = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'VARDIM') {\n      currentEntry.ntuples.vardim = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'UNITS') {\n      currentEntry.ntuples.units = dataValue.split(ntuplesSeparator);\n    } else if (canonicDataLabel === 'FACTOR') {\n      currentEntry.ntuples.factor = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'FIRST') {\n      currentEntry.ntuples.first = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'LAST') {\n      currentEntry.ntuples.last = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'MIN') {\n      currentEntry.ntuples.min = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === 'MAX') {\n      currentEntry.ntuples.max = convertToFloatArray(\n        dataValue.split(ntuplesSeparator),\n      );\n    } else if (canonicDataLabel === '.NUCLEUS') {\n      if (currentEntry.ntuples) {\n        currentEntry.ntuples.nucleus = dataValue.split(ntuplesSeparator);\n      }\n      if (currentEntry.twoD) {\n        currentEntry.yType = dataValue.split(ntuplesSeparator)[0];\n      }\n    } else if (canonicDataLabel === 'PAGE') {\n      spectrum.page = dataValue.trim();\n      spectrum.pageValue = parseFloat(dataValue.replace(/^.*=/, ''));\n      spectrum.pageSymbol = spectrum.page.replace(/[=].*/, '');\n    } else if (canonicDataLabel === 'RETENTIONTIME') {\n      spectrum.pageValue = parseFloat(dataValue);\n    } else if (isMSField(canonicDataLabel)) {\n      spectrum[convertMSFieldToLabel(canonicDataLabel)] = dataValue;\n    } else if (canonicDataLabel === 'SAMPLEDESCRIPTION') {\n      spectrum.sampleDescription = dataValue;\n    } else if (canonicDataLabel === 'END') {\n      currentEntry = parentsStack.pop();\n    }\n\n    if (\n      currentEntry &&\n      currentEntry.info &&\n      currentEntry.meta &&\n      canonicDataLabel.match(options.keepRecordsRegExp)\n    ) {\n      let value = dataValue.trim();\n      let target, label;\n      if (dataLabel.startsWith('$')) {\n        label = options.canonicMetadataLabels\n          ? canonicDataLabel.substring(1)\n          : dataLabel.substring(1);\n        target = currentEntry.meta;\n      } else {\n        label = options.canonicDataLabels ? canonicDataLabel : dataLabel;\n        target = currentEntry.info;\n      }\n\n      if (options.dynamicTyping) {\n        let parsedValue = Number.parseFloat(value);\n        if (!Number.isNaN(parsedValue)) value = parsedValue;\n      }\n      if (target[label]) {\n        if (!Array.isArray(target[label])) {\n          target[label] = [target[label]];\n        }\n        target[label].push(value);\n      } else {\n        target[label] = value;\n      }\n    }\n  }\n\n  profiling(result, 'Finished parsing', options);\n\n  postProcessing(entriesFlat, result, options);\n\n  profiling(result, 'Total time', options);\n\n  /*\n  if (result.children && result.children.length>0) {\n    result = { ...result, ...result.children[0] };\n  }\n  */\n  result.entries = tmpResult.children;\n  result.flatten = entriesFlat;\n\n  return result;\n}\n","export function getJcampKind(data) {\n  let dataType = data.dataType.toLowerCase();\n  let yUnits = data.spectra[0].yUnits.toLowerCase();\n\n  if (dataType.match(/infrared/)) {\n    if (yUnits.match(/absorbance/)) {\n      return IR_ABSORBANCE;\n    } else {\n      return IR_TRANSMITTANCE;\n    }\n  }\n  return undefined;\n}\n\nexport const IR_TRANSMITTANCE = {\n  normalization: {},\n  importation: {\n    converter: (transmittance) => -Math.log10(transmittance),\n  },\n  kind: 'Infrared',\n  display: {\n    xLabel: 'wavelength [cm-1]',\n    xInverted: true,\n    yLabel: 'Absorbance',\n  },\n};\n\nexport const IR_ABSORBANCE = {\n  normalization: {},\n  kind: 'Infrared',\n  display: {\n    xLabel: 'wavelength [cm-1]',\n    xInverted: true,\n    yLabel: 'Absorbance',\n  },\n};\n\nexport const nmr1H = {\n  display: {\n    xLabel: ' [ppm]',\n    xInverted: true,\n    yLabel: 'Intensity',\n  },\n};\n\nexport const nmr13C = {\n  display: {\n    xLabel: ' [ppm]',\n    xInverted: true,\n    yLabel: 'Intensity',\n  },\n};\n","import { convert } from 'jcampconverter';\n\nimport { getJcampKind } from '../Kinds';\n/**\n * Create a spectrum from a jcamp\n * @param {string} jcampText - String containing the JCAMP data\n * @return {Spectrum} - new instance of Spectrum with the provided data\n */\nexport default function jcamp(jcampText) {\n  const parsed = convert(jcampText, { xy: true, keepRecordsRegExp: /TITLE/ })\n    .flatten[0];\n  const kind = getJcampKind(parsed);\n  const data = parsed.spectra[0].data;\n  const meta = parsed.info;\n  // we convert the data\n  if (kind && kind.importation && kind.importation.converter) {\n    data.y = data.y.map(kind.importation.converter);\n  }\n\n  return { data, kind, meta };\n}\n","import uniqueXFunction from 'ml-arrayxy-uniquex';\n\n/**\n * Parse a text-file and convert it to an array of XY points\n * @param {string} text - csv or tsv strings\n * @param {object} [options={}]\n * @param {boolean} [options.rescale = false] - will set the maximum value to 1\n * @param {boolean} [options.uniqueX = false] - Make the X values unique (works only with 'xxyy' format). If the X value is repeated the sum of Y is done.\n * @param {number} [options.xColumn = 0] - A number that specifies the x column\n * @param {number} [options.yColumn = 1] - A number that specifies the y column\n * @param {number} [options.maxNumberColumns = (Math.max(xColumn, yColumn)+1)] - A number that specifies the maximum number of y columns\n * @param {number} [options.minNumberColumns = (Math.min(xColumn, yColumn)+1)] - A number that specifies the minimum number of y columns\n * @param {boolean} [options.keepInfo = false] - shoud we keep the non numeric lines. In this case the system will return an object {data, info}\n * @return {object{x:<Array<number>>,y:<Array<number>>}\n */\nexport function parseXY(text, options = {}) {\n  let {\n    rescale = false,\n    uniqueX = false,\n    xColumn = 0,\n    yColumn = 1,\n    keepInfo = false,\n    maxNumberColumns = Number.MAX_SAFE_INTEGER,\n    minNumberColumns = 2,\n  } = options;\n\n  maxNumberColumns = Math.max(maxNumberColumns, xColumn + 1, yColumn + 1);\n  minNumberColumns = Math.max(xColumn + 1, yColumn + 1, minNumberColumns);\n\n  let lines = text.split(/[\\r\\n]+/);\n\n  let maxY = Number.MIN_VALUE;\n  let result = { x: [], y: [] };\n  let info = [];\n  for (let l = 0; l < lines.length; l++) {\n    let line = lines[l].trim();\n    // we will consider only lines that contains only numbers\n    if (line.match(/[0-9]+/) && line.match(/^[0-9eE,;. \\t+-]+$/)) {\n      let fields = line.split(/,[; \\t]+|[; \\t]+/);\n      if (fields.length === 1) {\n        fields = line.split(/[,; \\t]+/);\n      }\n      if (\n        fields &&\n        fields.length >= minNumberColumns &&\n        fields.length <= maxNumberColumns\n      ) {\n        let x = parseFloat(fields[xColumn].replace(',', '.'));\n        let y = parseFloat(fields[yColumn].replace(',', '.'));\n\n        if (y > maxY) maxY = y;\n        result.x.push(x);\n        result.y.push(y);\n      }\n    } else if (line) {\n      info.push({ position: result.x.length, value: line });\n    }\n  }\n\n  if (uniqueX) {\n    uniqueXFunction(result);\n  }\n\n  if (rescale) {\n    for (let i = 0; i < result.y.length; i++) {\n      result.y[i] /= maxY;\n    }\n  }\n\n  if (!keepInfo) return result;\n\n  return {\n    info,\n    data: result,\n  };\n}\n","\n/**\n * In place modification of the 2 arrays to make X unique and sum the Y if X has the same value\n * @param {object} [points={}] : Object of points contains property x (an array) and y (an array)\n * @return points\n */\n\nexport default function uniqueX(points = {}) {\n  const { x, y } = points;\n  if (x.length < 2) return;\n  if (x.length !== y.length) {\n    throw new Error('The X and Y arrays mush have the same length');\n  }\n\n  let current = x[0];\n  let counter = 0;\n\n  for (let i = 1; i < x.length; i++) {\n    if (current !== x[i]) {\n      counter++;\n      current = x[i];\n      x[counter] = x[i];\n      if (i !== counter) {\n        y[counter] = 0;\n      }\n    }\n    if (i !== counter) {\n      y[counter] += y[i];\n    }\n  }\n\n  x.length = counter + 1;\n  y.length = counter + 1;\n}\n","import { xFindClosestIndex } from 'ml-spectra-processing';\n\nexport function getFromToIndex(xs, range) {\n  let { from, to } = range;\n  if (from === undefined) {\n    from = xs[0];\n  }\n  if (to === undefined) {\n    to = xs[xs.length - 1];\n  }\n\n  return {\n    fromIndex: xFindClosestIndex(xs, from),\n    toIndex: xFindClosestIndex(xs, to),\n  };\n}\n","export default function maybeToPrecision(value, digits) {\n  if (value < 0) {\n    value = 0 - value;\n    if (typeof digits === 'number') {\n      return `- ${value.toPrecision(digits)}`;\n    } else {\n      return `- ${value.toString()}`;\n    }\n  } else {\n    if (typeof digits === 'number') {\n      return value.toPrecision(digits);\n    } else {\n      return value.toString();\n    }\n  }\n}\n","import isAnyArray from 'is-any-array';\n\nexport { default as maybeToPrecision } from './maybeToPrecision';\nexport { default as checkArrayLength } from './checkArrayLength';\nexport default class BaseRegression {\n  constructor() {\n    if (new.target === BaseRegression) {\n      throw new Error('BaseRegression must be subclassed');\n    }\n  }\n\n  predict(x) {\n    if (typeof x === 'number') {\n      return this._predict(x);\n    } else if (isAnyArray(x)) {\n      const y = [];\n      for (let i = 0; i < x.length; i++) {\n        y.push(this._predict(x[i]));\n      }\n      return y;\n    } else {\n      throw new TypeError('x must be a number or array');\n    }\n  }\n\n  _predict() {\n    throw new Error('_predict must be implemented');\n  }\n\n  train() {\n    // Do nothing for this package\n  }\n\n  toString() {\n    return '';\n  }\n\n  toLaTeX() {\n    return '';\n  }\n\n  /**\n   * Return the correlation coefficient of determination (r) and chi-square.\n   * @param {Array<number>} x\n   * @param {Array<number>} y\n   * @return {object}\n   */\n  score(x, y) {\n    if (!isAnyArray(x) || !isAnyArray(y) || x.length !== y.length) {\n      throw new Error('x and y must be arrays of the same length');\n    }\n\n    const n = x.length;\n    const y2 = new Array(n);\n    for (let i = 0; i < n; i++) {\n      y2[i] = this._predict(x[i]);\n    }\n\n    let xSum = 0;\n    let ySum = 0;\n    let chi2 = 0;\n    let rmsd = 0;\n    let xSquared = 0;\n    let ySquared = 0;\n    let xY = 0;\n    for (let i = 0; i < n; i++) {\n      xSum += y2[i];\n      ySum += y[i];\n      xSquared += y2[i] * y2[i];\n      ySquared += y[i] * y[i];\n      xY += y2[i] * y[i];\n      if (y[i] !== 0) {\n        chi2 += ((y[i] - y2[i]) * (y[i] - y2[i])) / y[i];\n      }\n      rmsd += (y[i] - y2[i]) * (y[i] - y2[i]);\n    }\n\n    const r =\n      (n * xY - xSum * ySum) /\n      Math.sqrt((n * xSquared - xSum * xSum) * (n * ySquared - ySum * ySum));\n\n    return {\n      r: r,\n      r2: r * r,\n      chi2: chi2,\n      rmsd: Math.sqrt(rmsd / n),\n    };\n  }\n}\n","import BaseRegression, {\n  checkArrayLength,\n  maybeToPrecision\n} from 'ml-regression-base';\n\nexport default class SimpleLinearRegression extends BaseRegression {\n  constructor(x, y) {\n    super();\n    if (x === true) {\n      this.slope = y.slope;\n      this.intercept = y.intercept;\n      this.coefficients = [y.intercept, y.slope];\n    } else {\n      checkArrayLength(x, y);\n      regress(this, x, y);\n    }\n  }\n\n  toJSON() {\n    return {\n      name: 'simpleLinearRegression',\n      slope: this.slope,\n      intercept: this.intercept\n    };\n  }\n\n  _predict(x) {\n    return this.slope * x + this.intercept;\n  }\n\n  computeX(y) {\n    return (y - this.intercept) / this.slope;\n  }\n\n  toString(precision) {\n    let result = 'f(x) = ';\n    if (this.slope !== 0) {\n      const xFactor = maybeToPrecision(this.slope, precision);\n      result += `${xFactor === '1' ? '' : `${xFactor} * `}x`;\n      if (this.intercept !== 0) {\n        const absIntercept = Math.abs(this.intercept);\n        const operator = absIntercept === this.intercept ? '+' : '-';\n        result += ` ${operator} ${maybeToPrecision(absIntercept, precision)}`;\n      }\n    } else {\n      result += maybeToPrecision(this.intercept, precision);\n    }\n    return result;\n  }\n\n  toLaTeX(precision) {\n    return this.toString(precision);\n  }\n\n  static load(json) {\n    if (json.name !== 'simpleLinearRegression') {\n      throw new TypeError('not a SLR model');\n    }\n    return new SimpleLinearRegression(true, json);\n  }\n}\n\nfunction regress(slr, x, y) {\n  const n = x.length;\n  let xSum = 0;\n  let ySum = 0;\n\n  let xSquared = 0;\n  let xY = 0;\n\n  for (let i = 0; i < n; i++) {\n    xSum += x[i];\n    ySum += y[i];\n    xSquared += x[i] * x[i];\n    xY += x[i] * y[i];\n  }\n\n  const numerator = n * xY - xSum * ySum;\n  slr.slope = numerator / (n * xSquared - xSum * xSum);\n  slr.intercept = (1 / n) * ySum - slr.slope * (1 / n) * xSum;\n  slr.coefficients = [slr.intercept, slr.slope];\n}\n","import isAnyArray from 'is-any-array';\n\nexport default function checkArraySize(x, y) {\n  if (!isAnyArray(x) || !isAnyArray(y)) {\n    throw new TypeError('x and y must be arrays');\n  }\n  if (x.length !== y.length) {\n    throw new RangeError('x and y arrays must have the same length');\n  }\n}\n","import { xSubtract, xyMaxYPoint, xyIntegration } from 'ml-spectra-processing';\n\nimport { getNormalizedData } from './getNormalizedData';\nimport { getFromToIndex } from './scaled/getFromToIndex';\nimport { max } from './scaled/max';\nimport { min } from './scaled/min';\nimport { minMax } from './scaled/minMax';\nimport { range as rangeFct } from './scaled/range';\n/**\n * @private\n * @param {Array<Spectrum>} spectra\n * @param {object} [options={}] scale spectra based on various parameters\n * @param {object} [options.range] from - to\n * @param {Array} [options.ids] ids of selected spectra\n * @param {string} [options.targetID=spectra[0].id]\n * @param {string} [options.method='max'] min, max, range, minMax\n * @param {boolean} [options.relative=false]\n * @param {Array} [options.ranges] Array of object containing {from:'', to:'', label:''}\n * @param {Array} [options.calculations] Array of object containing {label:'', formula:''}\n * @returns {object} { ids:[], matrix:[Array], meta:[object], x:[], ranges:[object] }\n */\n\nexport function getScaledData(spectraProcessor, options = {}) {\n  if (!spectraProcessor.spectra || !spectraProcessor.spectra[0]) return {};\n  const {\n    range,\n    targetID,\n    relative,\n    method,\n    ids,\n    ranges,\n    calculations,\n  } = options;\n  let targetSpectrum =\n    spectraProcessor.getSpectrum(targetID) || spectraProcessor.spectra[0];\n  let spectra = spectraProcessor.getSpectra(ids);\n  let result;\n\n  if (method === '' || method === undefined) {\n    result = getNormalizedData(spectra);\n  } else {\n    let matrix;\n    switch (method.toLowerCase()) {\n      case 'min':\n        matrix = min(spectra, targetSpectrum, range);\n        break;\n      case 'max':\n        matrix = max(spectra, targetSpectrum, range);\n        break;\n      case 'minmax':\n        matrix = minMax(spectra, targetSpectrum, range);\n        break;\n      case 'range':\n        matrix = rangeFct(spectra, targetSpectrum, range);\n        break;\n      default:\n        throw new Error(`getScaledData: unknown method: ${method}`);\n    }\n    let meta = [];\n    let currentIDs = [];\n    for (let spectrum of spectra) {\n      currentIDs.push(spectrum.id);\n      meta.push(spectrum.meta);\n    }\n    let x = spectra[0].normalized.x;\n    result = { ids: currentIDs, matrix, meta, x };\n  }\n\n  if (relative) {\n    for (let i = 0; i < result.matrix.length; i++) {\n      result.matrix[i] = xSubtract(\n        result.matrix[i],\n        targetSpectrum.normalized.y,\n      );\n    }\n  }\n\n  if (ranges) {\n    result.ranges = [];\n    for (let i = 0; i < result.matrix.length; i++) {\n      let rangesCopy = JSON.parse(JSON.stringify(ranges));\n      let yNormalized = result.matrix[i];\n      let resultRanges = {};\n      result.ranges.push(resultRanges);\n      for (let currentRange of rangesCopy) {\n        if (currentRange.label) {\n          let fromToIndex = getFromToIndex(\n            targetSpectrum.normalized.x,\n            currentRange,\n          );\n          currentRange.integration = xyIntegration(\n            { x: result.x, y: yNormalized },\n            fromToIndex,\n          );\n          currentRange.maxPoint = xyMaxYPoint(\n            { x: result.x, y: yNormalized },\n            fromToIndex,\n          );\n          resultRanges[currentRange.label] = currentRange;\n        }\n      }\n    }\n  }\n\n  if (calculations && result.ranges) {\n    result.calculations = result.ranges.map(() => {\n      return {};\n    });\n    const parameters = Object.keys(result.ranges[0]);\n    for (let calculation of calculations) {\n      // eslint-disable-next-line no-new-func\n      const callback = new Function(\n        ...parameters,\n        `return ${calculation.formula}`,\n      );\n      for (let i = 0; i < result.ranges.length; i++) {\n        let oneRanges = result.ranges[i];\n        let values = parameters.map((key) => oneRanges[key].integration);\n        result.calculations[i][calculation.label] = callback(...values);\n      }\n    }\n  }\n\n  return result;\n}\n","import { xyMinYPoint, xMultiply } from 'ml-spectra-processing';\n\nimport { getFromToIndex } from './getFromToIndex';\n\nexport function min(spectra, targetSpectrum, range = {}) {\n  let fromToIndex = getFromToIndex(targetSpectrum.normalized.x, range);\n\n  let targetValue = xyMinYPoint(targetSpectrum.normalized, fromToIndex).y;\n\n  let values = spectra.map(\n    (spectrum) => xyMinYPoint(spectrum.normalized, fromToIndex).y,\n  );\n\n  let matrix = [];\n  for (let i = 0; i < spectra.length; i++) {\n    let spectrum = spectra[i];\n    let factor = targetValue / values[i];\n    matrix.push(xMultiply(spectrum.normalized.y, factor));\n  }\n\n  return matrix;\n}\n","import { xyMaxYPoint, xMultiply } from 'ml-spectra-processing';\n\nimport { getFromToIndex } from './getFromToIndex';\n\nexport function max(spectra, targetSpectrum, range = {}) {\n  let fromToIndex = getFromToIndex(targetSpectrum.normalized.x, range);\n\n  let targetValue = xyMaxYPoint(targetSpectrum.normalized, fromToIndex).y;\n\n  let values = spectra.map(\n    (spectrum) => xyMaxYPoint(spectrum.normalized, fromToIndex).y,\n  );\n\n  let matrix = [];\n  for (let i = 0; i < spectra.length; i++) {\n    let spectrum = spectra[i];\n    let factor = targetValue / values[i];\n    matrix.push(xMultiply(spectrum.normalized.y, factor));\n  }\n\n  return matrix;\n}\n","import SimpleLinearRegression from 'ml-regression-simple-linear';\nimport { xyMinYPoint, xyMaxYPoint } from 'ml-spectra-processing';\n\nimport { getFromToIndex } from './getFromToIndex';\n\nexport function minMax(spectra, targetSpectrum, range = {}) {\n  let fromToIndex = getFromToIndex(targetSpectrum.normalized.x, range);\n\n  let targetValue = {\n    min: xyMinYPoint(targetSpectrum.normalized, fromToIndex).y,\n    max: xyMaxYPoint(targetSpectrum.normalized, fromToIndex).y,\n  };\n\n  let values = spectra.map((spectrum) => {\n    return {\n      min: xyMinYPoint(spectrum.normalized, fromToIndex).y,\n      max: xyMaxYPoint(spectrum.normalized, fromToIndex).y,\n    };\n  });\n\n  let matrix = [];\n  for (let i = 0; i < spectra.length; i++) {\n    let spectrum = spectra[i];\n    const regression = new SimpleLinearRegression(\n      [targetValue.min, targetValue.max],\n      [values[i].min, values[i].max],\n    );\n\n    let length = spectrum.normalized.y.length;\n    let scaled = new Array(length);\n    for (let j = 0; j < length; j++) {\n      scaled[j] = regression.computeX(spectrum.normalized.y[j]);\n    }\n    matrix.push(scaled);\n  }\n\n  return matrix;\n}\n","import { xyIntegration, xMultiply } from 'ml-spectra-processing';\n\nimport { getFromToIndex } from './getFromToIndex';\n\nexport function range(spectra, targetSpectrum, currentrange = {}) {\n  let fromToIndex = getFromToIndex(targetSpectrum.normalized.x, currentrange);\n\n  let targetValue = xyIntegration(targetSpectrum.normalized, fromToIndex);\n\n  let values = spectra.map((spectrum) =>\n    xyIntegration(spectrum.normalized, fromToIndex),\n  );\n\n  let matrix = [];\n  for (let i = 0; i < spectra.length; i++) {\n    let spectrum = spectra[i];\n    let factor = targetValue / values[i];\n    matrix.push(xMultiply(spectrum.normalized.y, factor));\n  }\n\n  return matrix;\n}\n","'use strict';\n\nfunction compareNumbers(a, b) {\n    return a - b;\n}\n\n/**\n * Computes the sum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.sum = function sum(values) {\n    var sum = 0;\n    for (var i = 0; i < values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n};\n\n/**\n * Computes the maximum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.max = function max(values) {\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] > max) max = values[i];\n    }\n    return max;\n};\n\n/**\n * Computes the minimum of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.min = function min(values) {\n    var min = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n    }\n    return min;\n};\n\n/**\n * Computes the min and max of the given values\n * @param {Array} values\n * @returns {{min: number, max: number}}\n */\nexports.minMax = function minMax(values) {\n    var min = values[0];\n    var max = values[0];\n    var l = values.length;\n    for (var i = 1; i < l; i++) {\n        if (values[i] < min) min = values[i];\n        if (values[i] > max) max = values[i];\n    }\n    return {\n        min: min,\n        max: max\n    };\n};\n\n/**\n * Computes the arithmetic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.arithmeticMean = function arithmeticMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        sum += values[i];\n    }\n    return sum / l;\n};\n\n/**\n * {@link arithmeticMean}\n */\nexports.mean = exports.arithmeticMean;\n\n/**\n * Computes the geometric mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.geometricMean = function geometricMean(values) {\n    var mul = 1;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        mul *= values[i];\n    }\n    return Math.pow(mul, 1 / l);\n};\n\n/**\n * Computes the mean of the log of the given values\n * If the return value is exponentiated, it gives the same result as the\n * geometric mean.\n * @param {Array} values\n * @returns {number}\n */\nexports.logMean = function logMean(values) {\n    var lnsum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        lnsum += Math.log(values[i]);\n    }\n    return lnsum / l;\n};\n\n/**\n * Computes the weighted grand mean for a list of means and sample sizes\n * @param {Array} means - Mean values for each set of samples\n * @param {Array} samples - Number of original values for each set of samples\n * @returns {number}\n */\nexports.grandMean = function grandMean(means, samples) {\n    var sum = 0;\n    var n = 0;\n    var l = means.length;\n    for (var i = 0; i < l; i++) {\n        sum += samples[i] * means[i];\n        n += samples[i];\n    }\n    return sum / n;\n};\n\n/**\n * Computes the truncated mean of the given values using a given percentage\n * @param {Array} values\n * @param {number} percent - The percentage of values to keep (range: [0,1])\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.truncatedMean = function truncatedMean(values, percent, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var k = Math.floor(l * percent);\n    var sum = 0;\n    for (var i = k; i < (l - k); i++) {\n        sum += values[i];\n    }\n    return sum / (l - 2 * k);\n};\n\n/**\n * Computes the harmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.harmonicMean = function harmonicMean(values) {\n    var sum = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        if (values[i] === 0) {\n            throw new RangeError('value at index ' + i + 'is zero');\n        }\n        sum += 1 / values[i];\n    }\n    return l / sum;\n};\n\n/**\n * Computes the contraharmonic mean of the given values\n * @param {Array} values\n * @returns {number}\n */\nexports.contraHarmonicMean = function contraHarmonicMean(values) {\n    var r1 = 0;\n    var r2 = 0;\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n        r1 += values[i] * values[i];\n        r2 += values[i];\n    }\n    if (r2 < 0) {\n        throw new RangeError('sum of values is negative');\n    }\n    return r1 / r2;\n};\n\n/**\n * Computes the median of the given values\n * @param {Array} values\n * @param {boolean} [alreadySorted=false]\n * @returns {number}\n */\nexports.median = function median(values, alreadySorted) {\n    if (alreadySorted === undefined) alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n    var l = values.length;\n    var half = Math.floor(l / 2);\n    if (l % 2 === 0) {\n        return (values[half - 1] + values[half]) * 0.5;\n    } else {\n        return values[half];\n    }\n};\n\n/**\n * Computes the variance of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.variance = function variance(values, unbiased) {\n    if (unbiased === undefined) unbiased = true;\n    var theMean = exports.mean(values);\n    var theVariance = 0;\n    var l = values.length;\n\n    for (var i = 0; i < l; i++) {\n        var x = values[i] - theMean;\n        theVariance += x * x;\n    }\n\n    if (unbiased) {\n        return theVariance / (l - 1);\n    } else {\n        return theVariance / l;\n    }\n};\n\n/**\n * Computes the standard deviation of the given values\n * @param {Array} values\n * @param {boolean} [unbiased=true] - if true, divide by (n-1); if false, divide by n.\n * @returns {number}\n */\nexports.standardDeviation = function standardDeviation(values, unbiased) {\n    return Math.sqrt(exports.variance(values, unbiased));\n};\n\nexports.standardError = function standardError(values) {\n    return exports.standardDeviation(values) / Math.sqrt(values.length);\n};\n\n/**\n * IEEE Transactions on biomedical engineering, vol. 52, no. 1, january 2005, p. 76-\n * Calculate the standard deviation via the Median of the absolute deviation\n *  The formula for the standard deviation only holds for Gaussian random variables.\n * @returns {{mean: number, stdev: number}}\n */\nexports.robustMeanAndStdev = function robustMeanAndStdev(y) {\n    var mean = 0, stdev = 0;\n    var length = y.length, i = 0;\n    for (i = 0; i < length; i++) {\n        mean += y[i];\n    }\n    mean /= length;\n    var averageDeviations = new Array(length);\n    for (i = 0; i < length; i++)\n        averageDeviations[i] = Math.abs(y[i] - mean);\n    averageDeviations.sort(compareNumbers);\n    if (length % 2 === 1) {\n        stdev = averageDeviations[(length - 1) / 2] / 0.6745;\n    } else {\n        stdev = 0.5 * (averageDeviations[length / 2] + averageDeviations[length / 2 - 1]) / 0.6745;\n    }\n\n    return {\n        mean: mean,\n        stdev: stdev\n    };\n};\n\nexports.quartiles = function quartiles(values, alreadySorted) {\n    if (typeof (alreadySorted) === 'undefined') alreadySorted = false;\n    if (!alreadySorted) {\n        values = [].concat(values).sort(compareNumbers);\n    }\n\n    var quart = values.length / 4;\n    var q1 = values[Math.ceil(quart) - 1];\n    var q2 = exports.median(values, true);\n    var q3 = values[Math.ceil(quart * 3) - 1];\n\n    return {q1: q1, q2: q2, q3: q3};\n};\n\nexports.pooledStandardDeviation = function pooledStandardDeviation(samples, unbiased) {\n    return Math.sqrt(exports.pooledVariance(samples, unbiased));\n};\n\nexports.pooledVariance = function pooledVariance(samples, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var sum = 0;\n    var length = 0, l = samples.length;\n    for (var i = 0; i < l; i++) {\n        var values = samples[i];\n        var vari = exports.variance(values);\n\n        sum += (values.length - 1) * vari;\n\n        if (unbiased)\n            length += values.length - 1;\n        else\n            length += values.length;\n    }\n    return sum / length;\n};\n\nexports.mode = function mode(values) {\n    var l = values.length,\n        itemCount = new Array(l),\n        i;\n    for (i = 0; i < l; i++) {\n        itemCount[i] = 0;\n    }\n    var itemArray = new Array(l);\n    var count = 0;\n\n    for (i = 0; i < l; i++) {\n        var index = itemArray.indexOf(values[i]);\n        if (index >= 0)\n            itemCount[index]++;\n        else {\n            itemArray[count] = values[i];\n            itemCount[count] = 1;\n            count++;\n        }\n    }\n\n    var maxValue = 0, maxIndex = 0;\n    for (i = 0; i < count; i++) {\n        if (itemCount[i] > maxValue) {\n            maxValue = itemCount[i];\n            maxIndex = i;\n        }\n    }\n\n    return itemArray[maxIndex];\n};\n\nexports.covariance = function covariance(vector1, vector2, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var mean1 = exports.mean(vector1);\n    var mean2 = exports.mean(vector2);\n\n    if (vector1.length !== vector2.length)\n        throw 'Vectors do not have the same dimensions';\n\n    var cov = 0, l = vector1.length;\n    for (var i = 0; i < l; i++) {\n        var x = vector1[i] - mean1;\n        var y = vector2[i] - mean2;\n        cov += x * y;\n    }\n\n    if (unbiased)\n        return cov / (l - 1);\n    else\n        return cov / l;\n};\n\nexports.skewness = function skewness(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n\n    var s2 = 0, s3 = 0, l = values.length;\n    for (var i = 0; i < l; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s3 += dev * dev * dev;\n    }\n    var m2 = s2 / l;\n    var m3 = s3 / l;\n\n    var g = m3 / (Math.pow(m2, 3 / 2.0));\n    if (unbiased) {\n        var a = Math.sqrt(l * (l - 1));\n        var b = l - 2;\n        return (a / b) * g;\n    } else {\n        return g;\n    }\n};\n\nexports.kurtosis = function kurtosis(values, unbiased) {\n    if (typeof (unbiased) === 'undefined') unbiased = true;\n    var theMean = exports.mean(values);\n    var n = values.length, s2 = 0, s4 = 0;\n\n    for (var i = 0; i < n; i++) {\n        var dev = values[i] - theMean;\n        s2 += dev * dev;\n        s4 += dev * dev * dev * dev;\n    }\n    var m2 = s2 / n;\n    var m4 = s4 / n;\n\n    if (unbiased) {\n        var v = s2 / (n - 1);\n        var a = (n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3));\n        var b = s4 / (v * v);\n        var c = ((n - 1) * (n - 1)) / ((n - 2) * (n - 3));\n\n        return a * b - 3 * c;\n    } else {\n        return m4 / (m2 * m2) - 3;\n    }\n};\n\nexports.entropy = function entropy(values, eps) {\n    if (typeof (eps) === 'undefined') eps = 0;\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * Math.log(values[i] + eps);\n    return -sum;\n};\n\nexports.weightedMean = function weightedMean(values, weights) {\n    var sum = 0, l = values.length;\n    for (var i = 0; i < l; i++)\n        sum += values[i] * weights[i];\n    return sum;\n};\n\nexports.weightedStandardDeviation = function weightedStandardDeviation(values, weights) {\n    return Math.sqrt(exports.weightedVariance(values, weights));\n};\n\nexports.weightedVariance = function weightedVariance(values, weights) {\n    var theMean = exports.weightedMean(values, weights);\n    var vari = 0, l = values.length;\n    var a = 0, b = 0;\n\n    for (var i = 0; i < l; i++) {\n        var z = values[i] - theMean;\n        var w = weights[i];\n\n        vari += w * (z * z);\n        b += w;\n        a += w * w;\n    }\n\n    return vari * (b / (b * b - a));\n};\n\nexports.center = function center(values, inPlace) {\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n\n    var result = values;\n    if (!inPlace)\n        result = [].concat(values);\n\n    var theMean = exports.mean(result), l = result.length;\n    for (var i = 0; i < l; i++)\n        result[i] -= theMean;\n};\n\nexports.standardize = function standardize(values, standardDev, inPlace) {\n    if (typeof (standardDev) === 'undefined') standardDev = exports.standardDeviation(values);\n    if (typeof (inPlace) === 'undefined') inPlace = false;\n    var l = values.length;\n    var result = inPlace ? values : new Array(l);\n    for (var i = 0; i < l; i++)\n        result[i] = values[i] / standardDev;\n    return result;\n};\n\nexports.cumulativeSum = function cumulativeSum(array) {\n    var l = array.length;\n    var result = new Array(l);\n    result[0] = array[0];\n    for (var i = 1; i < l; i++)\n        result[i] = result[i - 1] + array[i];\n    return result;\n};\n","const toString = Object.prototype.toString;\n\nexport default function isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n","import isArray from 'is-any-array';\n\n/**\n * Computes the mean of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction sum(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var sumValue = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sumValue += input[i];\n  }\n\n  return sumValue;\n}\n\nexport default sum;\n","import isArray from 'is-any-array';\nimport max from 'ml-array-max';\nimport sum from 'ml-array-sum';\n\n/**\n * Computes the norm of the given values\n * @param {Array<number>} input\n * @param {object} [options={}]\n * @param {string} [options.algorithm='absolute'] absolute, sum or max\n * @param {number} [options.maxValue=1] new max value for algo max\n * @param {number} [options.sumValue=1] new max value for algo absolute and sum\n * @param {Array} [options.output=[]] specify the output array, can be the input array for in place modification\n * @return {number}\n */\n\nfunction norm(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$algorithm = options.algorithm,\n      algorithm = _options$algorithm === void 0 ? 'absolute' : _options$algorithm,\n      _options$sumValue = options.sumValue,\n      sumValue = _options$sumValue === void 0 ? 1 : _options$sumValue,\n      _options$maxValue = options.maxValue,\n      maxValue = _options$maxValue === void 0 ? 1 : _options$maxValue;\n\n  if (!isArray(input)) {\n    throw new Error('input must be an array');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  if (input.length === 0) {\n    throw new Error('input must not be empty');\n  }\n\n  switch (algorithm.toLowerCase()) {\n    case 'absolute':\n      {\n        var absoluteSumValue = absoluteSum(input) / sumValue;\n        if (absoluteSumValue === 0) return input.slice(0);\n\n        for (var i = 0; i < input.length; i++) {\n          output[i] = input[i] / absoluteSumValue;\n        }\n\n        return output;\n      }\n\n    case 'max':\n      {\n        var currentMaxValue = max(input);\n        if (currentMaxValue === 0) return input.slice(0);\n        var factor = maxValue / currentMaxValue;\n\n        for (var _i = 0; _i < input.length; _i++) {\n          output[_i] = input[_i] * factor;\n        }\n\n        return output;\n      }\n\n    case 'sum':\n      {\n        var sumFactor = sum(input) / sumValue;\n        if (sumFactor === 0) return input.slice(0);\n\n        for (var _i2 = 0; _i2 < input.length; _i2++) {\n          output[_i2] = input[_i2] / sumFactor;\n        }\n\n        return output;\n      }\n\n    default:\n      throw new Error(\"norm: unknown algorithm: \".concat(algorithm));\n  }\n}\n\nfunction absoluteSum(input) {\n  var sumValue = 0;\n\n  for (var i = 0; i < input.length; i++) {\n    sumValue += Math.abs(input[i]);\n  }\n\n  return sumValue;\n}\n\nexport default norm;\n","import isArray from 'is-any-array';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * Fill an array with sequential numbers\n * @param {Array<number>} [input] - optional destination array (if not provided a new array will be created)\n * @param {object} [options={}]\n * @param {number} [options.from=0] - first value in the array\n * @param {number} [options.to=10] - last value in the array\n * @param {number} [options.size=input.length] - size of the array (if not provided calculated from step)\n * @param {number} [options.step] - if not provided calculated from size\n * @return {Array<number>}\n */\n\nfunction sequentialFill() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(input) === 'object' && !isArray(input)) {\n    options = input;\n    input = [];\n  }\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  var _options = options,\n      _options$from = _options.from,\n      from = _options$from === void 0 ? 0 : _options$from,\n      _options$to = _options.to,\n      to = _options$to === void 0 ? 10 : _options$to,\n      _options$size = _options.size,\n      size = _options$size === void 0 ? input.length : _options$size,\n      step = _options.step;\n\n  if (size && step) {\n    throw new Error('step is defined by the array size');\n  }\n\n  if (!size) {\n    if (step) {\n      size = Math.floor((to - from) / step) + 1;\n    } else {\n      size = to - from + 1;\n    }\n  }\n\n  if (!step && size) {\n    step = (to - from) / (size - 1);\n  }\n\n  if (Array.isArray(input)) {\n    input.length = 0; // only works with normal array\n\n    for (var i = 0; i < size; i++) {\n      input.push(from);\n      from += step;\n    }\n  } else {\n    if (input.length !== size) {\n      throw new Error('sequentialFill typed array must have the correct length');\n    }\n\n    for (var _i = 0; _i < size; _i++) {\n      input[_i] = from;\n      from += step;\n    }\n  }\n\n  return input;\n}\n\nexport default sequentialFill;\n","/**\n * Normalize an array of zones:\n * - ensure than from < to\n * - merge overlapping zones\n *\n * The method will always check if from if lower than to and will swap if required.\n * @param {Array} [zones=[]]\n * @param {object} [options={}]\n * @param {number} [options.from=Number.NEGATIVE_INFINITY] Specify min value of a zone\n * @param {number} [options.to=Number.POSITIVE_INFINITY] Specify max value of a zone\n */\n\nexport function normalize(zones = [], options = {}) {\n  if (zones.length === 0) return [];\n  let {\n    from = Number.NEGATIVE_INFINITY,\n    to = Number.POSITIVE_INFINITY,\n  } = options;\n  if (from > to) [from, to] = [to, from];\n\n  zones = JSON.parse(JSON.stringify(zones)).map((zone) =>\n    zone.from > zone.to ? { from: zone.to, to: zone.from } : zone,\n  );\n  zones = zones.sort((a, b) => {\n    if (a.from !== b.from) return a.from - b.from;\n    return a.to - b.to;\n  });\n\n  zones.forEach((zone) => {\n    if (from > zone.from) zone.from = from;\n    if (to < zone.to) zone.to = to;\n  });\n\n  zones = zones.filter((zone) => zone.from <= zone.to);\n  if (zones.length === 0) return [];\n\n  let currentZone = zones[0];\n  let result = [currentZone];\n  for (let i = 1; i < zones.length; i++) {\n    let zone = zones[i];\n    if (zone.from <= currentZone.to) {\n      currentZone.to = zone.to;\n    } else {\n      currentZone = zone;\n      result.push(currentZone);\n    }\n  }\n  return result;\n}\n","/**\n * Function that calculates the integral of the line between two\n * x-coordinates, given the slope and intercept of the line.\n * @param {number} x0\n * @param {number} x1\n * @param {number} slope\n * @param {number} intercept\n * @return {number} integral value.\n */\nexport default function integral(x0, x1, slope, intercept) {\n  return (\n    0.5 * slope * x1 * x1 +\n    intercept * x1 -\n    (0.5 * slope * x0 * x0 + intercept * x0)\n  );\n}\n","import sequentialFill from 'ml-array-sequential-fill';\nimport { zonesWithPoints, invert } from 'ml-zones';\n\nimport equallySpacedSmooth from './equallySpacedSmooth';\nimport equallySpacedSlot from './equallySpacedSlot';\n\n/**\n * Function that returns a Number array of equally spaced numberOfPoints\n * containing a representation of intensities of the spectra arguments x\n * and y.\n *\n * The options parameter contains an object in the following form:\n * from: starting point\n * to: last point\n * numberOfPoints: number of points between from and to\n * variant: \"slot\" or \"smooth\" - smooth is the default option\n *\n * The slot variant consist that each point in the new array is calculated\n * averaging the existing points between the slot that belongs to the current\n * value. The smooth variant is the same but takes the integral of the range\n * of the slot and divide by the step size between two points in the new array.\n *\n * If exclusions zone are present, zones are ignored !\n * @param {object} [arrayXY={}] - object containing 2 properties x and y (both an array)\n * @param {object} [options={}]\n * @param {number} [options.from=x[0]]\n * @param {number} [options.to=x[x.length-1]]\n * @param {string} [options.variant='smooth']\n * @param {number} [options.numberOfPoints=100]\n * @param {Array} [options.exclusions=[]] array of from / to that should be skipped for the generation of the points\n * @param {Array} [options.zones=[]] array of from / to that should be kept\n * @return {object<x: Array, y:Array>} new object with x / y array with the equally spaced data.\n */\n\nexport default function equallySpaced(arrayXY = {}, options = {}) {\n  let { x, y } = arrayXY;\n  let xLength = x.length;\n  let reverse = false;\n  if (x.length > 1 && x[0] > x[1]) {\n    x = x.slice().reverse();\n    y = y.slice().reverse();\n    reverse = true;\n  }\n\n  let {\n    from = x[0],\n    to = x[xLength - 1],\n    variant = 'smooth',\n    numberOfPoints = 100,\n    exclusions = [],\n    zones = [],\n  } = options;\n\n  if (xLength !== y.length) {\n    throw new RangeError(\"the x and y vector doesn't have the same size.\");\n  }\n\n  if (typeof from !== 'number' || isNaN(from)) {\n    throw new RangeError(\"'from' option must be a number\");\n  }\n\n  if (typeof to !== 'number' || isNaN(to)) {\n    throw new RangeError(\"'to' option must be a number\");\n  }\n\n  if (typeof numberOfPoints !== 'number' || isNaN(numberOfPoints)) {\n    throw new RangeError(\"'numberOfPoints' option must be a number\");\n  }\n\n  if (numberOfPoints < 2) {\n    throw new RangeError(\"'numberOfPoints' option must be greater than 1\");\n  }\n\n  if (zones.length === 0) {\n    zones = invert(exclusions, { from, to });\n  }\n\n  zones = zonesWithPoints(zones, numberOfPoints, { from, to });\n\n  let xResult = [];\n  let yResult = [];\n  for (let zone of zones) {\n    let zoneResult = processZone(\n      x,\n      y,\n      zone.from,\n      zone.to,\n      zone.numberOfPoints,\n      variant,\n      reverse,\n    );\n\n    xResult = xResult.concat(zoneResult.x);\n    yResult = yResult.concat(zoneResult.y);\n  }\n  if (reverse) {\n    if (from < to) {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    } else {\n      return { x: xResult, y: yResult };\n    }\n  } else {\n    if (from < to) {\n      return { x: xResult, y: yResult };\n    } else {\n      return { x: xResult.reverse(), y: yResult.reverse() };\n    }\n  }\n}\n\nfunction processZone(x, y, from, to, numberOfPoints, variant) {\n  if (numberOfPoints < 1) {\n    throw new RangeError('the number of points must be at least 1');\n  }\n\n  let output =\n    variant === 'slot'\n      ? equallySpacedSlot(x, y, from, to, numberOfPoints)\n      : equallySpacedSmooth(x, y, from, to, numberOfPoints);\n\n  return {\n    x: sequentialFill({\n      from,\n      to,\n      size: numberOfPoints,\n    }),\n    y: output,\n  };\n}\n","import { normalize } from './normalize';\n\n/**\n * Convert an array of exclusions and keep only from / to\n *\n * The method will always check if from if lower than to and will swap if required.\n * @param {Array} [exclusions=[]]\n * @param {object} [options={}]\n * @param {number} [options.from=Number.NEGATIVE_INFINITY] Specify min value of zones (after inversion)\n * @param {number} [options.to=Number.POSITIVE_INFINITY] Specify max value of zones (after inversion)\n */\n\nexport function invert(exclusions = [], options = {}) {\n  let {\n    from = Number.NEGATIVE_INFINITY,\n    to = Number.POSITIVE_INFINITY,\n  } = options;\n  if (from > to) [from, to] = [to, from];\n\n  exclusions = normalize(exclusions, { from, to });\n  if (exclusions.length === 0) return [{ from, to }];\n\n  let zones = [];\n  for (let i = 0; i < exclusions.length; i++) {\n    let exclusion = exclusions[i];\n    let nextExclusion = exclusions[i + 1];\n    if (i === 0) {\n      if (exclusion.from > from) {\n        zones.push({ from, to: exclusion.from });\n      }\n    }\n    if (i === exclusions.length - 1) {\n      if (exclusion.to < to) {\n        zones.push({ from: exclusion.to, to });\n      }\n    } else {\n      zones.push({ from: exclusion.to, to: nextExclusion.from });\n    }\n  }\n\n  return zones;\n}\n","import { normalize } from './normalize';\n\n/**\n * Add the number of points per zone to reach a specified total\n * @param {Array} [zones=[]]\n * @param {number} [numberOfPoints] Total number of points to distribute between zones\n * @param {object} [options={}]\n * @param {number} [options.from=Number.NEGATIVE_INFINITY] Specify min value of a zone\n * @param {number} [options.to=Number.POSITIVE_INFINITY] Specify max value of a zone\n */\n\nexport function zonesWithPoints(zones, numberOfPoints, options = {}) {\n  if (zones.length === 0) return zones;\n  zones = normalize(zones, options);\n\n  const totalSize = zones.reduce((previous, current) => {\n    return previous + (current.to - current.from);\n  }, 0);\n\n  let unitsPerPoint = totalSize / numberOfPoints;\n  let currentTotal = 0;\n  for (let i = 0; i < zones.length - 1; i++) {\n    let zone = zones[i];\n    zone.numberOfPoints = Math.min(\n      Math.round((zone.to - zone.from) / unitsPerPoint),\n      numberOfPoints - currentTotal,\n    );\n    currentTotal += zone.numberOfPoints;\n  }\n\n  zones[zones.length - 1].numberOfPoints = numberOfPoints - currentTotal;\n\n  return zones;\n}\n","/**\n * function that retrieves the getEquallySpacedData with the variant \"slot\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"slot\"\n */\nexport default function equallySpacedSlot(x, y, from, to, numberOfPoints) {\n  let xLength = x.length;\n\n  let step = (to - from) / (numberOfPoints - 1);\n  let halfStep = step / 2;\n  let lastStep = x[x.length - 1] - x[x.length - 2];\n\n  let start = from - halfStep;\n  let output = new Array(numberOfPoints);\n\n  // Init main variables\n  let min = start;\n  let max = start + step;\n\n  let previousX = -Number.MAX_VALUE;\n  let previousY = 0;\n  let nextX = x[0];\n  let nextY = y[0];\n  let frontOutsideSpectra = 0;\n  let backOutsideSpectra = true;\n\n  let currentValue = 0;\n\n  // for slot algorithm\n  let currentPoints = 0;\n\n  let i = 1; // index of input\n  let j = 0; // index of output\n\n  main: while (true) {\n    if (previousX >= nextX) throw new Error('x must be an increasing serie');\n    while (previousX - max > 0) {\n      // no overlap with original point, just consume current value\n      if (backOutsideSpectra) {\n        currentPoints++;\n        backOutsideSpectra = false;\n      }\n\n      output[j] = currentPoints <= 0 ? 0 : currentValue / currentPoints;\n      j++;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      currentValue = 0;\n      currentPoints = 0;\n    }\n\n    if (previousX > min) {\n      currentValue += previousY;\n      currentPoints++;\n    }\n\n    if (previousX === -Number.MAX_VALUE || frontOutsideSpectra > 1) {\n      currentPoints--;\n    }\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else {\n      nextX += lastStep;\n      nextY = 0;\n      frontOutsideSpectra++;\n    }\n  }\n\n  return output;\n}\n","import integral from './integral';\n\n/**\n * function that retrieves the getEquallySpacedData with the variant \"smooth\"\n *\n * @param {Array<number>} x\n * @param {Array<number>} y\n * @param {number} from - Initial point\n * @param {number} to - Final point\n * @param {number} numberOfPoints\n * @return {Array} - Array of y's equally spaced with the variant \"smooth\"\n */\nexport default function equallySpacedSmooth(x, y, from, to, numberOfPoints) {\n  let xLength = x.length;\n\n  let step = (to - from) / (numberOfPoints - 1);\n  let halfStep = step / 2;\n\n  let output = new Array(numberOfPoints);\n\n  let initialOriginalStep = x[1] - x[0];\n  let lastOriginalStep = x[xLength - 1] - x[xLength - 2];\n\n  // Init main variables\n  let min = from - halfStep;\n  let max = from + halfStep;\n\n  let previousX = Number.MIN_VALUE;\n  let previousY = 0;\n  let nextX = x[0] - initialOriginalStep;\n  let nextY = 0;\n\n  let currentValue = 0;\n  let slope = 0;\n  let intercept = 0;\n  let sumAtMin = 0;\n  let sumAtMax = 0;\n\n  let i = 0; // index of input\n  let j = 0; // index of output\n\n  function getSlope(x0, y0, x1, y1) {\n    return (y1 - y0) / (x1 - x0);\n  }\n\n  let add = 0;\n  main: while (true) {\n    if (previousX <= min && min <= nextX) {\n      add = integral(0, min - previousX, slope, previousY);\n      sumAtMin = currentValue + add;\n    }\n\n    while (nextX - max >= 0) {\n      // no overlap with original point, just consume current value\n      add = integral(0, max - previousX, slope, previousY);\n      sumAtMax = currentValue + add;\n\n      output[j++] = (sumAtMax - sumAtMin) / step;\n\n      if (j === numberOfPoints) {\n        break main;\n      }\n\n      min = max;\n      max += step;\n      sumAtMin = sumAtMax;\n    }\n\n    currentValue += integral(previousX, nextX, slope, intercept);\n\n    previousX = nextX;\n    previousY = nextY;\n\n    if (i < xLength) {\n      nextX = x[i];\n      nextY = y[i];\n      i++;\n    } else if (i === xLength) {\n      nextX += lastOriginalStep;\n      nextY = 0;\n    }\n\n    slope = getSlope(previousX, previousY, nextX, nextY);\n    intercept = -slope * previousX + previousY;\n  }\n\n  return output;\n}\n","import { minMax } from 'ml-stat/array';\n\nimport { getData } from './getData';\nimport { getNormalized } from './getNormalized';\nimport { updateRangesInfo } from './updateRangesInfo';\n\n/**\n * Class allowing manipulate one IR spectrum\n * @class spectrum\n * @param {object} [json={}] - object containing a spectrum\n * @param {Array} [json.x=[]] - x values\n * @param {Array} [json.y=[]] - y values\n */\nexport class Spectrum {\n  /**\n   *\n   * @param {array} x\n   * @param {array} y\n   * @param {string} id\n   * @param {object} [options={}]\n   * @param {object} [options.meta={}]\n   * @param {object} [options.normalization]\n   * @param {object} [options.normalized]\n   */\n  constructor(x, y, id, options = {}) {\n    const { meta = {}, normalization = {}, normalized } = options;\n\n    if (x && x.length > 1 && x[0] > x[1]) {\n      this.x = x.reverse();\n      this.y = y.reverse();\n    } else {\n      this.x = x || [];\n      this.y = y || [];\n    }\n    this.id = id;\n    this.meta = meta;\n    this.normalizedBoundary = { x: { min: 0, max: 0 }, y: { min: 0, max: 0 } };\n    if (normalized) {\n      this.normalized = normalized;\n      this.updateNormalizedBoundary();\n    } else {\n      this.updateNormalization(normalization);\n    }\n\n    this.updateMemory();\n  }\n\n  get minX() {\n    return this.x[0];\n  }\n\n  get maxX() {\n    return this.x[this.x.length - 1];\n  }\n\n  updateMemory() {\n    let original = ((this.x && this.x.length) || 0) * 16;\n    let normalized = this.normalized.x.length * 16;\n    this.memory = { original, normalized, total: original + normalized };\n  }\n\n  removeOriginal() {\n    this.x = undefined;\n    this.y = undefined;\n    this.updateMemory();\n  }\n\n  getXY() {\n    if (!Array.isArray(this.x) || !Array.isArray(this.y)) {\n      throw new Error('Can not get normalized data');\n    }\n    return { x: this.x, y: this.y };\n  }\n}\n\nSpectrum.prototype.getData = function (options) {\n  return getData(this, options);\n};\n\nSpectrum.prototype.updateNormalization = function (normalization) {\n  this.normalized = getNormalized(this, normalization);\n  this.ranges = {};\n  this.updateMemory();\n  this.updateNormalizedBoundary();\n};\n\nSpectrum.prototype.updateRangesInfo = function (ranges) {\n  updateRangesInfo(this, ranges);\n};\n\nSpectrum.prototype.updateNormalizedBoundary = function () {\n  this.normalizedBoundary.x = {\n    min: this.normalized.x[0],\n    max: this.normalized.x[this.normalized.x.length - 1],\n  };\n  this.normalizedBoundary.y = minMax(this.normalized.y);\n};\n","import filterX from 'ml-array-xy-filter-x';\n\n/**\n *\n * @private\n * @param {Spectrum} spectrum\n * @param {object} [options.xFilter={}]\n * @param {array} [options.xFilter.from]\n * @param {array} [options.xFilter.to]\n * @param {array} [options.xFilter.exclusions=[]]\n * @param {array} [options.yFactor=1]\n */\n\nexport function getData(spectrum, options = {}) {\n  const { xFilter = {}, yFactor = 1 } = options;\n  let data = { x: spectrum.x, y: spectrum.y };\n\n  if (xFilter) {\n    data = filterX({ x: spectrum.x, y: spectrum.y }, xFilter);\n  }\n  if (yFactor && yFactor !== 1) {\n    data.y = data.y.map((y) => y * yFactor);\n  }\n  return data;\n}\n","import normed from 'ml-array-normed';\nimport rescale from 'ml-array-rescale';\nimport equallySpaced from 'ml-array-xy-equally-spaced';\nimport Stat from 'ml-stat/array';\n\n/**\n *\n * @private\n * @param {*} spectrum\n * @param {*} options\n */\nexport function getNormalized(spectrum, options = {}) {\n  if (!Array.isArray(spectrum.x) || !Array.isArray(spectrum.y)) {\n    throw new Error(\n      'getNormalized: Can not get normalized data, missing original data.',\n    );\n  }\n\n  let {\n    from = spectrum.x[0],\n    to = spectrum.x[spectrum.x.length - 1],\n    numberOfPoints = 1024,\n    filters = [],\n    exclusions = [],\n  } = options;\n\n  let ys = spectrum.y.slice(0);\n\n  for (let filter of filters) {\n    switch (filter.name) {\n      case 'centerMean': {\n        let mean = Stat.mean(spectrum.y);\n        let meanFct = (y) => y - mean;\n        ys = ys.map(meanFct);\n        break;\n      }\n      case 'scaleSD': {\n        let std = Stat.standardDeviation(spectrum.y);\n        let stdFct = (y) => y / std;\n        ys = ys.map(stdFct);\n        break;\n      }\n      case 'normalize': {\n        ys = normed(ys);\n        break;\n      }\n      case 'rescale': {\n        ys = rescale(ys);\n        break;\n      }\n      case '':\n      case undefined:\n        break;\n      default:\n        throw new Error(`Unknown process kind: ${process.kind}`);\n    }\n  }\n  let result = equallySpaced(\n    { x: spectrum.x, y: ys },\n    { from, to, numberOfPoints, exclusions },\n  );\n  return result;\n}\n","import {\n  xyIntegration,\n  xyMaxYPoint,\n  xyMinYPoint,\n  xFindClosestIndex,\n} from 'ml-spectra-processing';\n\n/**\n * @private\n * @param {*} spectrum\n * @param {*} ranges\n */\nexport function updateRangesInfo(spectrum, ranges = []) {\n  spectrum.ranges = {};\n  for (let range of ranges) {\n    range = JSON.parse(JSON.stringify(range));\n    spectrum.ranges[range.label] = range;\n    let fromToIndex = {\n      fromIndex: xFindClosestIndex(spectrum.normalized.x, range.from),\n      toIndex: xFindClosestIndex(spectrum.normalized.x, range.to),\n    };\n    range.integration = xyIntegration(spectrum.normalized, fromToIndex);\n    range.maxPoint = xyMaxYPoint(spectrum.normalized, fromToIndex);\n    range.minPoint = xyMinYPoint(spectrum.normalized, fromToIndex);\n    range.x = spectrum.normalized.x.slice(\n      fromToIndex.fromIndex,\n      fromToIndex.toIndex + 1,\n    );\n    range.y = spectrum.normalized.y.slice(\n      fromToIndex.fromIndex,\n      fromToIndex.toIndex + 1,\n    );\n  }\n}\n","import { xFindClosestIndex } from 'ml-spectra-processing';\n\nimport { getAutocorrelationChart } from './jsgraph/getAutocorrelationChart';\nimport { getBoxPlotAnnotations } from './jsgraph/getBoxPlotAnnotations';\nimport { getChart } from './jsgraph/getChart';\nimport { getNormalizationAnnotations } from './jsgraph/getNormalizationAnnotations';\nimport { getNormalizedChart } from './jsgraph/getNormalizedChart';\nimport { getScaledChart } from './jsgraph/getScaledChart';\nimport { getTrackAnnotation } from './jsgraph/getTrackAnnotation';\nimport { getCategoriesStats } from './metadata/getCategoriesStats';\nimport { getClasses } from './metadata/getClasses';\nimport { getMetadata } from './metadata/getMetadata';\nimport parseJcamp from './parser/jcamp';\nimport parseMatrix from './parser/matrix';\nimport parseText from './parser/text';\nimport { getAutocorrelation } from './spectra/getAutocorrelation';\nimport { getMeanData } from './spectra/getMeanData';\nimport { getNormalizedData } from './spectra/getNormalizedData';\nimport { getNormalizedText } from './spectra/getNormalizedText';\nimport { getScaledData } from './spectra/getScaledData';\nimport { Spectrum } from './spectrum/Spectrum';\n\nexport class SpectraProcessor {\n  /**\n   * Manager a large number of spectra with the possibility to normalize the data\n   * and skip the original data.\n   * @param {object} [options={}]\n   * @param {boolean} [options.maxMemory=64M]\n   * @param {object} [options.normalization={}] options to normalize the spectra before comparison\n   * @param {number} [options.normalization.from]\n   * @param {number} [options.normalization.to]\n   * @param {number} [options.normalization.numberOfPoints]\n   * @param {array<object>} [options.normalization.filters]\n   * @param {string} [options.normalization.filters.X.name]\n   * @param {object} [options.normalization.filters.X.options]\n   * @param {array<object>} [options.normalization.exclusions]\n   * @param {string} [options.normalization.exclusions.X.from]\n   * @param {object} [options.normalization.exclusions.X.to]\n   */\n  constructor(options = {}) {\n    this.normalization = options.normalization;\n    this.maxMemory = options.maxMemory || 64 * 1024 * 1024;\n    this.keepOriginal = true;\n    this.spectra = [];\n    this.boundaries = {\n      minX: Number.MAX_VALUE,\n      maxX: Number.MIN_VALUE,\n      minY: Number.MAX_VALUE,\n      maxY: Number.MIN_VALUE,\n    };\n  }\n\n  getNormalizationAnnotations() {\n    return getNormalizationAnnotations(\n      this.normalization,\n      this.getNormalizedBoundary(),\n    );\n  }\n\n  /**\n   * Recalculate the normalized data using the stored original data if available\n   * This will throw an error in the original data is not present\n   * @param {number} [normalization.from]\n   * @param {number} [normalization.to]\n   * @param {number} [normalization.numberOfPoints]\n   * @param {array<object>} [normalization.filters]\n   * @param {string} [normalization.filters.X.name]\n   * @param {object} [normalization.filters.X.options]\n   * @param {array<object>} [normalization.exclusions]\n   * @param {string} [normalization.exclusions.X.from]\n   * @param {object} [normalization.exclusions.X.to]\n   */\n  setNormalization(normalization = {}) {\n    if (JSON.stringify(this.normalization) === JSON.stringify(normalization)) {\n      return;\n    }\n    this.normalization = normalization;\n    for (let spectrum of this.spectra) {\n      spectrum.updateNormalization(this.normalization);\n    }\n  }\n\n  getNormalization() {\n    return this.normalization;\n  }\n\n  /**\n   * Returns an object {x:[], y:[]} containing the autocorrelation for the\n   * specified index\n   * @param {integer} [index|undefined] x index of the spectrum to autocorrelate\n   * @param {object} [options={}]\n   * @param {array} [options.ids=[]] list of ids, by default all spectra\n   * @param {array} [options.x] x value if index is undefined\n   */\n  getAutocorrelation(index, options = {}) {\n    const { x } = options;\n    const normalizedData = this.getNormalizedData(options);\n    if (index === undefined && x !== undefined) {\n      index = xFindClosestIndex(normalizedData.x, x);\n    }\n    return getAutocorrelation(normalizedData, index);\n  }\n\n  /**\n   * Returns a {x:[], y:[]} containg the average of specified spectra\n   * @param {object} [options={}]\n   * @param {array} [options.ids=[]] list of ids, by default all spectra\n   */\n  getMeanData(options) {\n    return getMeanData(this.getNormalizedData(options));\n  }\n\n  /**\n   * Returns an object contains 4 parameters with the normalized data\n   * @returns {object} { ids:[], matrix:[Array], meta:[object], x:[] }\n   * @param {object} [options={}]\n   * @param {Array} [options.ids] List of spectra ids to export, by default all\n   */\n  getNormalizedData(options = {}) {\n    const { ids } = options;\n    let spectra = this.getSpectra(ids);\n    return getNormalizedData(spectra);\n  }\n\n  /**\n   * Returns a tab separated value containing the normalized data\n   * @param {object} [options={}]\n   * @param {Array} [options.ids] List of spectra ids to export, by default all\n   * @param {string} [options.fs='\\t'] field separator\n   * @param {string} [options.rs='\\n'] record (line) separator\n   * @returns {string}\n   */\n  getNormalizedText(options = {}) {\n    const { ids } = options;\n    let spectra = this.getSpectra(ids);\n    return getNormalizedText(spectra, options);\n  }\n\n  getMinMaxX() {\n    let min = Number.MAX_VALUE;\n    let max = Number.MIN_VALUE;\n    for (let spectrum of this.spectra) {\n      if (spectrum.minX < min) min = spectrum.minX;\n      if (spectrum.maxX > max) max = spectrum.maxX;\n    }\n    return { min, max };\n  }\n\n  /**\n\n   * Returns an object contains 4 parameters with the scaled data\n   * @param {object} [options={}] scale spectra based on various parameters\n   * @param {object} [options.range] from - to\n   * @param {Array} [options.ids] ids of selected spectra, by default all\n   * @param {string} [options.targetID=spectra[0].id]\n   * @param {string} [options.method='max'] min, max, range, minMax\n   * @param {boolean} [options.relative=false]\n   * @returns {object} { ids:[], matrix:[Array], meta:[object], x:[] }\n   */\n  getScaledData(options) {\n    return getScaledData(this, options);\n  }\n\n  /**\n   * Add from text\n   * By default TITLE from the jcamp will be in the meta information\n   * @param {string} text\n   * @param {object} [options={}]\n   * @param {object} [options.parserOptions={}] XY parser options\n   * @param {object} [options.meta={}]\n   * @param {string} [options.meta.color]\n   * @param {object} [options.id={}]\n   * @param {object} [options.kind]\n   * @param {boolean} [options.force=false] replace existing spectrum (same ID)\n   */\n\n  addFromText(text, options = {}) {\n    if (options.force !== true && options.id && this.contains(options.id)) {\n      return;\n    }\n    let parsed = parseText(text, options);\n    let meta = { ...parsed.meta, ...(options.meta || {}) };\n    this.addFromData(parsed.data, { meta, id: options.id });\n  }\n\n  /**\n   * Add jcamp\n   * By default TITLE from the jcamp will be in the meta information\n   * @param {string} jcamp\n   * @param {object} [options={}]\n   * @param {object} [options.meta={}]\n   * @param {string} [options.meta.color]\n   * @param {object} [options.id={}]\n   * @param {boolean} [options.force=false] replace existing spectrum (same ID)\n   */\n\n  addFromJcamp(jcamp, options = {}) {\n    if (options.force !== true && options.id && this.contains(options.id)) {\n      return;\n    }\n    let parsed = parseJcamp(jcamp);\n    let meta = { ...parsed.meta, ...(options.meta || {}) };\n    this.addFromData(parsed.data, { meta, id: options.id });\n  }\n\n  updateRangesInfo(options) {\n    for (let spectrum of this.spectra) {\n      spectrum.updateRangesInfo(options);\n    }\n  }\n\n  getMetadata() {\n    return getMetadata(this.spectra);\n  }\n\n  /**\n   *\n   * @param {object} [options={}]\n   * @param {string} [options.propertyName=\"category\"]\n   */\n  getClasses(options) {\n    return getClasses(this.getMetadata(), options);\n  }\n\n  /**\n   *\n   * @param {object} [options={}]\n   * @param {string} [options.propertyName=\"category\"]\n   */\n  getCategoriesStats(options) {\n    return getCategoriesStats(this.getMetadata(), options);\n  }\n\n  /**\n   * Add a spectrum based on the data\n   * @param {object} data {x, y}}\n   * @param {object} [options={}]\n   * @param {object} [options.meta={}]\n   * @param {object} [options.id]\n   * @param {object} [options.normalization={}]\n   * @param {object} [options.normalized]\n   * @return {Spectrum}\n   */\n\n  addFromData(data, options = {}) {\n    if (this.spectra.length === 0) this.keepOriginal = true;\n    const id = options.id || Math.random().toString(36).substring(2, 10);\n    let index = this.getSpectrumIndex(id);\n    if (index === undefined) index = this.spectra.length;\n    let spectrum = new Spectrum(data.x, data.y, id, {\n      meta: options.meta,\n      normalized: options.normalized,\n      normalization: this.normalization,\n    });\n    this.spectra[index] = spectrum;\n    if (!this.keepOriginal) {\n      spectrum.removeOriginal();\n    } else {\n      let memoryInfo = this.getMemoryInfo();\n      if (memoryInfo.total > this.maxMemory) {\n        this.keepOriginal = false;\n        this.removeOriginals();\n      }\n    }\n  }\n\n  removeOriginals() {\n    for (let spectrum of this.spectra) {\n      spectrum.removeOriginal();\n    }\n  }\n\n  /**\n   * Remove the spectrum from the SpectraProcessor for the specified id\n   * @param {string} id\n   */\n  removeSpectrum(id) {\n    let index = this.getSpectrumIndex(id);\n    if (index === undefined) return undefined;\n    return this.spectra.splice(index, 1);\n  }\n\n  /**\n   * Remove all the spectra not present in the list\n   * @param {Array} [ids] Array of ids of the spectra to keep\n   */\n  removeSpectraNotIn(ids) {\n    let currentIDs = this.spectra.map((spectrum) => spectrum.id);\n    for (let id of currentIDs) {\n      if (!ids.includes(id)) {\n        this.removeSpectrum(id);\n      }\n    }\n  }\n\n  /**\n   * Checks if the ID of a spectrum exists in the SpectraProcessor\n   * @param {string} id\n   */\n  contains(id) {\n    return !isNaN(this.getSpectrumIndex(id));\n  }\n\n  /**\n   * Returns the index of the spectrum in the spectra array\n   * @param {string} id\n   * @returns {number}\n   */\n  getSpectrumIndex(id) {\n    if (!id) return undefined;\n    for (let i = 0; i < this.spectra.length; i++) {\n      let spectrum = this.spectra[i];\n      if (spectrum.id === id) return i;\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns an array of spectrum from their ids\n   * @param {Array} ids\n   * @returns {Array<Spectrum}\n   */\n  getSpectra(ids) {\n    if (!ids || !Array.isArray(ids)) return this.spectra;\n    let spectra = [];\n    for (let id of ids) {\n      let index = this.getSpectrumIndex(id);\n      if (index !== undefined) {\n        spectra.push(this.spectra[index]);\n      }\n    }\n    return spectra;\n  }\n\n  /**\n   * Returns the index of the spectrum in the spectra array\n   * @param {string} id\n   * @returns {number}\n   */\n  getSpectrum(id) {\n    let index = this.getSpectrumIndex(id);\n    if (index === undefined) return undefined;\n    return this.spectra[index];\n  }\n\n  /**\n   * Returns a JSGraph chart object for all the spectra\n   * @returns {object}\n   */\n  getChart(options) {\n    return getChart(this.spectra, options);\n  }\n\n  /**\n   * Returns a JSGraph chart object for all the spectra\n   * @returns {object}\n   */\n  getAutocorrelationChart(index, options) {\n    return getAutocorrelationChart(this, index, options);\n  }\n\n  /**\n   * Returns a JSGraph annotation object for the specified index\n   * @returns {object}\n   */\n  getTrackAnnotation(index, options) {\n    return getTrackAnnotation(this.spectra, index, options);\n  }\n\n  /**\n   * Returns a JSGraph annotation object for box plot\n   * @returns {object}\n   */\n  getBoxPlotAnnotations(options) {\n    return getBoxPlotAnnotations(this.spectra, options);\n  }\n\n  /**\n   * Returns a JSGraph chart object for all the normalized spectra\n   * @param {object} [options={}]\n   * @param {Array} [options.ids] ids of the spectra to select, by default all\n   * @returns {object}\n   */\n  getNormalizedChart(options) {\n    return getNormalizedChart(this.spectra, options);\n  }\n\n  /**\n   * Returns a JSGraph chart object for all the scaled normalized spectra\n   * @param {object} [options={}]\n   * @param {Array} [options.ids] ids of the spectra to select, by default all\n   * @param {object} [options.range] from - to\n   * @param {string} [options.targetID=spectra[0].id]\n   * @param {string} [options.method='max'] min, max, range, minMax\n   * @param {boolean} [options.relative=false]\n   * @returns {object}\n   */\n  getScaledChart(options) {\n    return getScaledChart(this, options);\n  }\n\n  getMemoryInfo() {\n    let memoryInfo = { original: 0, normalized: 0, total: 0 };\n    this.spectra.forEach((spectrum) => {\n      let memory = spectrum.memory;\n      memoryInfo.original += memory.original;\n      memoryInfo.normalized += memory.normalized;\n      memoryInfo.total += memory.total;\n    });\n    memoryInfo.keepOriginal = this.keepOriginal;\n    memoryInfo.maxMemory = this.maxMemory;\n    return memoryInfo;\n  }\n\n  getNormalizedBoundary() {\n    let boundary = {\n      x: { min: Number.MAX_VALUE, max: Number.MIN_VALUE },\n      y: { min: Number.MAX_VALUE, max: Number.MIN_VALUE },\n    };\n    for (let spectrum of this.spectra) {\n      if (spectrum.normalizedBoundary.x.min < boundary.x.min) {\n        boundary.x.min = spectrum.normalizedBoundary.x.min;\n      }\n      if (spectrum.normalizedBoundary.x.max > boundary.x.max) {\n        boundary.x.max = spectrum.normalizedBoundary.x.max;\n      }\n      if (spectrum.normalizedBoundary.y.min < boundary.y.min) {\n        boundary.y.min = spectrum.normalizedBoundary.y.min;\n      }\n      if (spectrum.normalizedBoundary.y.max > boundary.y.max) {\n        boundary.y.max = spectrum.normalizedBoundary.y.max;\n      }\n    }\n    return boundary;\n  }\n\n  /**\n   * Create SpectraProcessor from normalized TSV\n   * @param {string} text\n   * @param {object} [options={}]\n   * @param {object} [options.separator='\\t']\n   */\n  static fromNormalizedMatrix(text, options = {}) {\n    let parsed = parseMatrix(text, options);\n    if (!parsed) {\n      throw new Error('Can not parse TSV file');\n    }\n    let spectraProcessor = new SpectraProcessor();\n\n    spectraProcessor.setNormalization({\n      from: parsed.x[0],\n      to: parsed.x[parsed.x.length - 1],\n      numberOfPoints: parsed.x.length,\n    });\n    spectraProcessor.keepOriginal = false;\n\n    for (let i = 0; i < parsed.ids.length; i++) {\n      spectraProcessor.addFromData(\n        { x: [], y: [] },\n        {\n          normalized: {\n            x: parsed.x,\n            y: parsed.matrix[i],\n          },\n          id: parsed.ids[i],\n          meta: parsed.meta[i],\n        },\n      );\n    }\n\n    return spectraProcessor;\n  }\n}\n","export function getNormalizationAnnotations(filter = {}, boundary = {}) {\n  let { exclusions = [] } = filter;\n  let annotations = [];\n  exclusions = exclusions.filter((exclusion) => !exclusion.ignore);\n  annotations = exclusions.map((exclusion) => {\n    let annotation = {\n      type: 'rect',\n      position: [\n        { x: exclusion.from, y: boundary.y.min },\n        { x: exclusion.to, y: boundary.y.max },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)',\n    };\n    return annotation;\n  });\n  if (filter.from !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [\n        { x: Number.MIN_SAFE_INTEGER, y: boundary.y.min },\n        { x: filter.from, y: boundary.y.max },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)',\n    });\n  }\n  if (filter.to !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [\n        { x: filter.to, y: boundary.y.min },\n        { x: Number.MAX_SAFE_INTEGER, y: boundary.y.max },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)',\n    });\n  }\n  return annotations;\n}\n","import { xCorrelation } from 'ml-spectra-processing';\n\n/**\n * @private\n */\n\nexport function getAutocorrelation(normalized, index) {\n  let matrix = normalized.matrix;\n  let nbRow = matrix.length;\n  let nbColumn = matrix[0].length;\n  let array1 = new Float64Array(nbRow);\n  let array2 = new Float64Array(nbRow);\n  let result = new Array(nbColumn);\n  for (let j = 0; j < nbRow; j++) {\n    array1[j] = matrix[j][index];\n  }\n  for (let i = 0; i < nbColumn; i++) {\n    for (let j = 0; j < nbRow; j++) {\n      array2[j] = matrix[j][i];\n    }\n    result[i] = xCorrelation(array1, array2);\n  }\n  return {\n    x: normalized.x,\n    y: result,\n  };\n}\n","import { Matrix } from 'ml-matrix';\n\n/**\n * @private\n */\n\nexport function getMeanData(normalized) {\n  let matrix = new Matrix(normalized.matrix);\n  return {\n    x: normalized.x,\n    y: matrix.mean('column'),\n  };\n}\n","import { getNormalizedData } from './getNormalizedData.js';\n\n/**\n * @private\n * @param {*} spectra\n * @param {object} [options={}]\n * @param {string} [options.fs='\\t'] field separator\n * @param {string} [options.rs='\\n'] record (line) separator\n */\n\nexport function getNormalizedText(spectra, options = {}) {\n  let { fs = '\\t', rs = '\\n' } = options;\n  let { matrix, meta, ids, x } = getNormalizedData(spectra);\n  let allKeysObject = {};\n  for (let metum of meta) {\n    for (let key of Object.keys(metum)) {\n      let type = typeof metum[key];\n      if (type === 'number' || type === 'string' || type === 'boolean') {\n        allKeysObject[key] = true;\n      }\n    }\n  }\n  let allKeys = Object.keys(allKeysObject);\n\n  let lines = [];\n  let line = [];\n  line.push('id', ...allKeys, ...x);\n  lines.push(line.join(fs));\n\n  for (let i = 0; i < ids.length; i++) {\n    line = [];\n    line.push(ids[i]);\n    for (let key of allKeys) {\n      line.push(meta[i][key]);\n    }\n    line.push(...matrix[i]);\n    lines.push(line.join(fs));\n  }\n\n  return lines.join(rs);\n}\n","import { parseXY } from 'xy-parser';\n\n/**\n * Create a spectrum from a text file\n * @param {string} value - String containing the JCAMP data\n * @return {Spectrum} - new instance of Spectrum with the provided data\n */\nexport default function text(value, options = {}) {\n  const { kind, parserOptions = {} } = options;\n\n  const data = parseXY(value, parserOptions);\n\n  // we convert the data\n  if (kind && kind.importation && kind.importation.converter) {\n    data.y = data.y.map(kind.importation.converter);\n  }\n\n  return { data };\n}\n","/**\n * @private\n * @param {*} spectra\n * @param {object} options\n */\n\nexport function getMetadata(spectra, options = {}) {\n  const { ids } = options;\n\n  let metadata = [];\n\n  if (Array.isArray(spectra) && spectra.length > 0) {\n    for (let spectrum of spectra) {\n      if (!ids || ids.includes(spectrum.id)) {\n        metadata.push(spectrum.meta);\n      }\n    }\n  }\n\n  return metadata;\n}\n","import { getCategoriesStats } from './getCategoriesStats';\n\n/**\n * @private\n * @param {Array<object>} [metadata]\n * @param {object} [options={}] scale spectra based on various parameters\n * @param {string} [options.propertyName=\"category\"]\n */\n\nexport function getClasses(metadata, options = {}) {\n  const { propertyName = 'category' } = options;\n  const categoriesStats = getCategoriesStats(metadata, options);\n  const result = new Array(metadata.length);\n  for (let i = 0; i < metadata.length; i++) {\n    result[i] = categoriesStats[metadata[i][propertyName]].classNumber;\n  }\n  return result;\n}\n","import { addChartDataStyle } from './addChartDataStyle';\n/**\n * Retrieve a chart with selected original data\n * @param {object} [options={}]\n * @param {Array} [options.ids] List of spectra ids, by default all\n * @param {Array} [options.yFactor=1]\n */\nexport function getChart(spectra, options = {}) {\n  const { ids, yFactor, xFilter = {} } = options;\n  let chart = {\n    data: [],\n  };\n\n  for (let spectrum of spectra) {\n    if (!ids || ids.includes(spectrum.id)) {\n      let data = spectrum.getData({ yFactor, xFilter });\n      addChartDataStyle(data, spectrum);\n      chart.data.push(data);\n    }\n  }\n  return chart;\n}\n","import chroma from 'chroma-js';\nimport filterX from 'ml-array-xy-filter-x';\n\n/**\n * Retrieve a chart with autocorrelation color\n * @param {SpectraProcessor} [spectraProcessor]\n * @param {number} [index]\n * @param {object} [options={}]\n * @param {Array} [options.autocorrelation] precalculated autocorrelation {x,y}\n * @param {Array} [options.maxDataPoints=]\n * @param {array} [options.xFilter.from]\n * @param {array} [options.xFilter.to]\n * @param {array} [options.xFilter.exclusions=[]]\n */\nexport function getAutocorrelationChart(spectraProcessor, index, options = {}) {\n  const {\n    autocorrelation = spectraProcessor.getAutocorrelation(index),\n    xFilter,\n  } = options;\n\n  let max = autocorrelation.y.reduce(function (a, b) {\n    return isNaN(b) ? a : Math.max(a, b);\n  }, Number.MIN_VALUE);\n\n  let min = autocorrelation.y.reduce(function (a, b) {\n    return isNaN(b) ? a : Math.min(a, b);\n  }, Number.MAX_VALUE);\n\n  let colorCallback = chroma\n    .scale(['blue', 'cyan', 'yellow', 'red'])\n    .domain([min, max])\n    .mode('lch');\n\n  let colorScale = autocorrelation.y.map(\n    (y) => `rgb(${colorCallback(y).rgb().join()})`,\n  );\n\n  let mean = spectraProcessor.getMeanData();\n  if (xFilter) {\n    mean = filterX({ x: mean.x, y: mean.y }, xFilter);\n  }\n\n  let colorSpectrum = {\n    type: 'color',\n    x: mean.x,\n    y: mean.y,\n    color: colorScale,\n    styles: {\n      unselected: {\n        lineWidth: 1,\n        lineStyle: 1,\n      },\n      selected: {\n        lineWidth: 3,\n        lineStyle: 1,\n      },\n    },\n  };\n\n  return colorSpectrum;\n}\n","import { getNormalizedData } from '../spectra/getNormalizedData';\n\nexport function getTrackAnnotation(spectra, index, options = {}) {\n  const { ids, showSpectrumID = true } = options;\n  let annotations = [];\n\n  let normalized = getNormalizedData(spectra, { ids });\n\n  if (normalized.ids.length === 0) return annotations;\n  let line = 0;\n\n  // header containing X coordinate\n  annotations.push({\n    type: 'line',\n    position: [\n      { x: `${70}px`, y: `${15 + 15 * line}px` },\n      { x: `${85}px`, y: `${15 + 15 * line}px` },\n    ],\n    strokeWidth: 0.0000001,\n    label: {\n      size: 16,\n      text: `x: ${normalized.x[index].toPrecision(6)}`,\n      position: { x: `${130}px`, y: `${20 + 15 * line}px` },\n    },\n  });\n  line++;\n\n  for (let i = 0; i < normalized.ids.length; i++) {\n    let id = normalized.ids[i];\n    let meta = normalized.meta[i];\n    let y = normalized.matrix[i][index];\n    annotations.push({\n      type: 'line',\n      position: [\n        { x: `${70}px`, y: `${15 + 15 * line}px` },\n        { x: `${85}px`, y: `${15 + 15 * line}px` },\n      ],\n      strokeColor: meta.color,\n      strokeWidth: 2,\n      label: {\n        text: `${y.toPrecision(4)}${showSpectrumID ? ` - ${id}` : ''}`,\n        position: { x: `${90}px`, y: `${20 + 15 * line}px` },\n      },\n    });\n    line++;\n  }\n\n  return annotations;\n}\n","import filterX from 'ml-array-xy-filter-x';\n\nimport { addChartDataStyle } from './addChartDataStyle';\n\n/**\n * @param {Array<Spectrum>} spectra\n * @param {object} [options={}]\n * @param {array} [options.ids]\n * @param {object} [options.xFilter={}]\n * @param {array} [options.xFilter.from]\n * @param {array} [options.xFilter.to]\n * @param {array} [options.xFilter.exclusions=[]]\n */\n\nexport function getNormalizedChart(spectra, options = {}) {\n  const { ids, xFilter } = options;\n  let chart = {\n    data: [],\n  };\n  for (let spectrum of spectra) {\n    if (!ids || ids.includes(spectrum.id)) {\n      let data = spectrum.normalized;\n      if (xFilter) {\n        data = filterX({ x: data.x, y: data.y }, xFilter);\n      }\n      addChartDataStyle(data, spectrum);\n      chart.data.push(data);\n    }\n  }\n  return chart;\n}\n","import { addChartDataStyle } from './addChartDataStyle';\n/**\n *\n * @param {SpectraProcessor} spectraProcessor\n * @param {object} [options={}] scale spectra based on various parameters\n * @param {object} [options.range] from - to\n * @param {Array} [options.ids] ids of selected spectra\n * @param {string} [options.targetID=spectra[0].id]\n * @param {string} [options.method='max'] min, max, range, minMax\n * @param {Array} [options.ranges] Array of object containing {from:'', to:'', label:''}\n * @param {Array} [options.calculations] Array of object containing {label:'', formula:''}\n * @param {boolean} [options.relative=false]\n */\nexport function getScaledChart(spectraProcessor, options = {}) {\n  let scaled = spectraProcessor.getScaledData(options);\n\n  let chart = {\n    data: [],\n  };\n  if (!scaled || !scaled.matrix) return chart;\n\n  for (let i = 0; i < scaled.matrix.length; i++) {\n    let data = {\n      x: scaled.x,\n      y: Array.from(scaled.matrix[i]), // need to ensure not a typed array\n    };\n    addChartDataStyle(data, { meta: scaled.meta[i], id: scaled.ids[i] });\n    chart.data.push(data);\n  }\n\n  return chart;\n}\n","/**\n * Creates a g\n * @param {string} text - String containing the text data\n * @param {object} [options={}]\n * @param {string} [options.fs='\\t'] Field separator\n * @return {object} - {matrix, data, x, ids}\n */\nexport default function matrix(text, options = {}) {\n  const lines = text.split(/[\\r\\n]+/).filter((value) => value);\n  const { fs = '\\t' } = options;\n  let currentMatrix = [];\n  let ids = [];\n  let meta = [];\n  let x = [];\n\n  let headers = lines[0].split(fs);\n  let labels = [];\n\n  for (let i = 0; i < headers.length; i++) {\n    let header = headers[i];\n    if (isNaN(header)) {\n      labels[i] = header;\n    } else {\n      x = headers.slice(i).map((value) => Number(value));\n      break;\n    }\n  }\n\n  for (let i = 1; i < lines.length; i++) {\n    let line = lines[i];\n    let parts = line.split('\\t');\n    ids.push(parts[0]);\n    let oneMeta = {};\n    meta.push(oneMeta);\n    for (let j = 1; j < parts.length; j++) {\n      if (j < labels.length) {\n        oneMeta[labels[j]] = parts[j];\n      } else {\n        currentMatrix.push(\n          parts.slice(labels.length).map((value) => Number(value)),\n        );\n        break;\n      }\n    }\n  }\n  return { x, meta, matrix: currentMatrix, ids };\n}\n","export function getFilterAnnotations(filter = {}) {\n  let { exclusions = [] } = filter;\n  let annotations = [];\n  exclusions = exclusions.filter((exclusion) => !exclusion.ignore);\n  annotations = exclusions.map((exclusion) => {\n    let annotation = {\n      type: 'rect',\n      position: [\n        { x: exclusion.from, y: '0px' },\n        { x: exclusion.to, y: '2000px' },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,128,1)',\n    };\n    return annotation;\n  });\n  if (filter.from !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [\n        { x: Number.MIN_SAFE_INTEGER, y: '0px' },\n        { x: filter.from, y: '2000px' },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)',\n    });\n  }\n  if (filter.to !== undefined) {\n    annotations.push({\n      type: 'rect',\n      position: [\n        { x: filter.to, y: '0px' },\n        { x: Number.MAX_SAFE_INTEGER, y: '2000px' },\n      ],\n      strokeWidth: 0,\n      fillColor: 'rgba(255,255,224,1)',\n    });\n  }\n  return annotations;\n}\n"],"names":["toString","Object","prototype","object","call","endsWith","a","d","e","f","length","g","h","i","j","c","b","_ref","module","exports","window","median","input","isArray","TypeError","quickSelectMedian","slice","xMultiply","array1","array2","constant","isConstant","Array","Error","Number","array3","Float64Array","xBoxPlot","array","sort","q1max","q3min","info","Q1","Q2","Q3","min","max","middle","middleOver","xCorrelation","A","B","n","sumA","sumA2","sumB","sumB2","sumAB","Math","sqrt","xFindClosestIndex","target","low","high","abs","xGetFromToIndex","x","options","fromIndex","toIndex","from","to","undefined","ascending","NaN","bisector","compare","ascendingComparator","left","lo","hi","mid","right","ascendingBisect","bisectRight","bisectLeft","descending","number$1","variance","m","s","isNaN","deviation","v","extent","identity","range","start","stop","step","arguments","ceil","e10","e5","e2","ticks","count","tickStep","floor","step0","step1","pow","log","LN10","error","sturges","values","LN2","number","histogram","value","domain","threshold","data","xz","x0","x1","tz","shift","pop","bin","bins","push","_","thresholds","map","quantile","p","freedmanDiaconis","scott","mean","numbers","merge","arrays","merged","pairs","permute","indexes","permutes","scan","xi","xj","shuffle","i0","i1","t","random","sum","transpose","matrix","row","zip","version","bisect","thresholdFreedmanDiaconis","thresholdScott","thresholdSturges","factory","xSubtract","isAnyArray","xyCheck","y","xyIntegration","currentxyIntegration","xyMaxYPoint","current","index","xyMinYPoint","limit","clip_rgb","rgb","_clipped","_unclipped","classToType","list","name","toLowerCase","type","obj","unpack","args","keyOrder","split","filter","k","last","l","PI","utils","TWOPI","PITHIRD","DEG2RAD","RAD2DEG","format","autodetect","last$1","clip_rgb$1","type$1","Color","len","me","this","constructor","mode","sorted","chk","test","apply","_rgb","hex","join","Color_1","chroma","Function","bind","concat","chroma_1","unpack$1","rgb2cmyk_1","ref","r","unpack$2","cmyk2rgb_1","alpha","unpack$3","type$2","cmyk","unpack$4","last$2","rnd","round","hsl2css_1","hsla","unpack$5","rgb2hsl_1","unpack$6","last$3","rgb2css_1","rgba","substr","unpack$7","round$1","hsl2rgb_1","assign","t3","t2","t1","h_","RE_RGB","RE_RGBA","RE_RGB_PCT","RE_RGBA_PCT","RE_HSL","RE_HSLA","round$2","css2rgb","css","trim","named","match","rgb$1","i$1","rgb$2","i$2","rgb$3","i$3","hsl","rgb$4","hsl$1","rgb$5","css2rgb_1","type$3","rest","unpack$8","gl","unpack$9","rgb2hcg_1","delta","_g","unpack$a","hcg2rgb_1","assign$1","assign$2","assign$3","assign$4","assign$5","_c","q","unpack$b","type$4","hcg","unpack$c","last$4","round$3","rgb2hex_1","str","hxa","RE_HEX","RE_HEXA","hex2rgb_1","u","parseInt","u$1","type$5","indexOf","unpack$d","acos","rgb2hsi_1","min_","unpack$e","limit$1","TWOPI$1","cos","hsi2rgb_1","unpack$f","type$6","hsi","unpack$g","type$7","unpack$h","min$1","max$1","rgb2hsv","max_","unpack$i","floor$1","hsv2rgb_1","unpack$j","type$8","hsv","labConstants","Kn","Xn","Yn","Zn","t0","unpack$k","rgb2lab","ref$1","rgb2xyz","rgb_xyz","xyz_lab","rgb2lab_1","unpack$l","pow$1","lab2rgb","z","lab_xyz","xyz_rgb","lab2rgb_1","unpack$m","type$9","lab","unpack$n","sqrt$1","atan2","round$4","lab2lch_1","unpack$o","rgb2lch_1","b_","unpack$p","sin","cos$1","lch2lab_1","unpack$q","lch2rgb_1","L","unpack$r","hcl2rgb_1","hcl","reverse","unpack$s","type$a","lch","forEach","w3cx11_1","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflower","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","laserlemon","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrod","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","maroon2","maroon3","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","purple2","purple3","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","type$b","keys","unpack$t","rgb2num_1","type$c","num2rgb_1","num","type$d","unpack$u","type$e","round$5","temperature2rgb_1","kelvin","temp","unpack$v","round$6","rgb2temperature_1","minTemp","maxTemp","eps","temperature","type$f","mutate","clipped","darken","amount","brighten","darker","brighter","get","mc","channel","src","type$g","pow$2","EPS","MAX_ITER","luminance","lum","cur_lum","max_iter","interpolate","lm","rgb2luminance","luminance_x","interpolator","type$h","mix","col1","col2","premultiply","saturate","desaturate","type$i","set","charAt","out","xyz0","xyz1","sqrt$2","pow$3","lrgb","y1","z1","x2","y2","z2","lab$1","_hsx","hue0","hue1","sat0","sat1","lbv0","lbv1","sat","hue","lch$1","num$1","c1","c2","hcg$1","hsi$1","hsv$1","clip_rgb$2","pow$4","sqrt$3","PI$1","cos$2","sin$1","atan2$1","average","colors","weights","reduce","w","_average_lrgb","first","xyz","cnt","dx","dy","ci","xyz2","A$1","col","type$j","pow$5","scale","_mode","_nacol","_spread","_domain","_pos","_padding","_classes","_colors","_out","_min","_max","_correctLightness","_colorCache","_useCache","_gamma","setColors","brewer","c$1","resetCache","getClass","tMapLightness","tMapDomain","getColor","val","bypassMap","classes","analyze","limits","tOut","tBreaks","every","_m","_o","spread","correctLightness","L0","L1","pol","L_actual","L_ideal","L_diff","padding","numColors","result","dm","dd","__range__","samples","end","asc","cache","gamma","nodata","inclusive","bezier","I","lab0","lab1","lab2","lab3","I0","I1","bezier_1","blend","bottom","top","blend_f","c0","each","normal","multiply","darken$1","lighten","screen","overlay","burn","dodge","blend_1","type$k","clip_rgb$3","TWOPI$2","pow$6","sin$2","cos$3","cubehelix","rotations","lightness","dl","dh","fract","amp","cos_a","sin_a","digits","floor$2","random_1","code","log$1","pow$7","floor$3","key","MAX_VALUE","min_log","LOG10E","max_log","pb","pr","cluster","assignments","clusterSizes","repeat","nb_iters","centroids","i$4","mindist","best","j$1","dist","newCentroids","j$2","i$5","j$3","j$4","kClusters","j$5","i$6","tmpKMeansBreaks","j$6","i$7","analyze_1","contrast","l1","l2","sqrt$4","atan2$2","abs$1","cos$4","PI$2","deltaE","C","a1","b1","L2","a2","b2","sl","sc","h1","c4","sh","delC","delA","delB","v1","v2","distance","sum_sq","valid","scales","cool","hot","colorbrewer","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Viridis","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","list$1","colorbrewer_1","filterX","points","exclusions","zones","exclusion","JSON","parse","stringify","currentFrom","getZones","currentZoneIndex","newX","newY","position","getBoxPlotAnnotations","spectra","q13FillColor","q13FillOpacity","q2StrokeColor","q2StrokeWidth","minMaxFillColor","minMaxFillOpacity","annotations","normalized","spectrum","nbRow","nbColumn","aColumn","column","getBoxPlotData","q13","layer","properties","fillColor","fillOpacity","strokeWidth","q2","strokeColor","minMax","addChartDataStyle","styles","unselected","lineColor","meta","color","lineWidth","lineStyle","selected","label","id","getNormalizedData","ids","currentIDs","includes","getCategoriesStats","metadata","propertyName","categories","classNumber","metadatum","counter","GC_MS_FIELDS","complexChromatogram","chromatogram","times","series","ms","dimension","existingGCMSFields","convertMSFieldToLabel","pageValue","parseFloat","isMSField","canonicDataLabel","replace","convertToFloatArray","stringArray","floatArray","fastParseXYData","yFactor","deltaX","isXYdata","currentData","ascii","currentX","firstX","currentY","firstY","endLine","charCodeAt","newLine","isDifference","isLastDifference","lastDifference","isDuplicate","inComment","currentValue","lastValue","isNegative","inValue","skipFirstValue","decimalPosition","duplicate","ascii2","removeCommentRegExp","peakTableSplitRegExp","parsePeakTable","isPeaktable","variables","numberOfVariables","variable","lines","logs","parseXYZ","xFactor","parseXY","parseXYA","removeSymbolRegExp","isXYAdata","add2D","zData","minZ","maxZ","ySize","xSize","lastX","lastY","minX","maxX","minY","maxY","noise","getMedian","convertTo3DZ","noContour","contourLines","povarHeight0","povarHeight1","povarHeight2","povarHeight3","isOver0","isOver1","isOver2","isOver3","pAx","pAy","pBx","pBy","lineZValue","nbSubSpectra","nbPovars","y0","iter","nbContourLevels","contourLevels","level","contourLevel","side","factor","noiseMultiplier","exp","zValue","iSubSpectra","subSpectra","subSpectraAfter","povar","segments","generateContourLines","maxValue","minValue","rescale","output","currentMin","currentMax","RangeError","_options$min","autoMinMax","_options$max","indent","indentData","inspectMatrixWithOptions","maxRows","maxColumns","maxNumSize","rows","columns","maxI","maxJ","line","formatNumber","inspectData","numStr","String","padEnd","precise","toPrecision","exponential","toExponential","eIndex","checkRowIndex","outer","checkColumnIndex","checkRowVector","vector","to1DArray","checkColumnVector","checkRowIndices","rowIndices","some","checkColumnIndices","columnIndices","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","newArray","AbstractMatrix","newRows","newColumns","newData","newMatrix","Matrix","fill","isInteger","interval","zeros","matrix1","matrix2","checkMatrix","isMatrix","klass","callback","to2DArray","copy","toJSON","isRowVector","isColumnVector","isVector","isSquare","isSymmetric","isEchelonForm","previousColumn","checked","isReducedEchelonForm","echelonForm","clone","iMax","swapRows","tmp","reducedEchelonForm","maxRow","pivot","setSubMatrix","neg","mulS","getRow","getRowVector","rowVector","setRow","row1","row2","getColumn","getColumnVector","columnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","maxIndex","idx","minIndex","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","diag","norm","cumulativeSum","dot","vector2","vector1","mmul","other","Bcolj","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m1","m2","m3","m4","m5","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m6","m7","m8","m9","m12","m13","m14","m15","m16","m17","m18","c02","c12","c20","c21","c22","mmulStrassen","r1","r2","embed","mat","cols","resultat","console","warn","blockMult","halfRows","halfCols","subMatrix","add","sub","scaleRows","isFinite","scaleColumns","flipRows","flipColumns","kroneckerProduct","sortRows","compareFunction","compareNumbers","sortColumns","subMatrixRow","indices","subMatrixColumn","selection","checkIndices","rowIndex","columnIndex","trace","by","sumByRow","sumByColumn","sumAll","product","productByRow","productByColumn","productAll","size","unbiased","sum1","sum2","varianceByRow","varianceByColumn","varianceAll","standardDeviation","center","centerByRow","centerByColumn","centerAll","getScaleByRow","scaleByRow","getScaleByColumn","scaleByColumn","divider","getScaleAll","scaleAll","Symbol","for","rand","randomInt","randInt","diagonal","eye","negate","tensorProduct","nRows","nColumns","arrayData","removeRow","splice","addRow","removeColumn","newRow","addColumn","addS","addM","subS","subM","subtract","subtractS","subtractM","mul","mulM","multiplyS","multiplyM","div","divS","divM","divide","divideS","divideM","mod","modS","modM","modulus","modulusS","modulusM","and","andS","andM","or","orS","orM","xor","xorS","xorM","leftShift","leftShiftS","leftShiftM","signPropagatingRightShift","signPropagatingRightShiftS","signPropagatingRightShiftM","rightShift","rightShiftS","rightShiftM","zeroFillRightShift","zeroFillRightShiftS","zeroFillRightShiftM","not","acosh","asin","asinh","atan","atanh","cbrt","clz32","cosh","expm1","fround","log1p","log10","log2","sign","sinh","tanh","trunc","arg0","powS","powM","installMathOperations","FFT","_n","_bitrev","_cstb","core","init","_initArray","_makeBitReversalTable","_makeCosSinTable","fft1d","re","im","fft","ifft1d","bt1d","fft2d","tre","tim","ifft2d","inv","ik","wr","wi","xr","n4","Uint32Array","_paddingZero","n2","n8","n2p4","dc","ds","apis","bt","ifft","gyromagneticRatio","profiling","action","time","Date","now","simpleChromatogram","intensity","postProcessing","entriesFlat","observeFrequency","shiftOffsetVal","entry","ntuples","symbol","xUnits","toUpperCase","nucleus","unit","pageSymbolIndex","pageSymbol","units","ratio0","ratio1","ratio","postProcessingNMR","newNtuples","twoD","wantXY","keepSpectra","prepareNtuplesDatatable","currentEntry","kind","xIndex","yIndex","firstVariable","secondVariable","lowerCaseSymbol","vardim","nbPoints","varname","yUnits","prepareSpectrum","ntuplesSeparator","Spectrum","defaultOptions","keepRecordsRegExp","canonicDataLabels","canonicMetadataLabels","dynamicTyping","withoutXY","IR_TRANSMITTANCE","normalization","importation","converter","transmittance","display","xLabel","xInverted","yLabel","IR_ABSORBANCE","jcamp","jcampText","parsed","entries","tmpResult","children","parentsStack","ldrs","ldr","dataLabel","substring","dataValue","infos","datatable","parentEntry","title","dataType","dataClass","xType","shiftOffsetNum","vartype","varform","yType","page","sampleDescription","startsWith","parsedValue","flatten","convert","xy","getJcampKind","text","uniqueX","xColumn","yColumn","keepInfo","maxNumberColumns","MAX_SAFE_INTEGER","minNumberColumns","MIN_VALUE","fields","uniqueXFunction","getFromToIndex","xs","maybeToPrecision","BaseRegression","predict","_predict","train","toLaTeX","score","xSum","ySum","chi2","rmsd","xSquared","ySquared","xY","SimpleLinearRegression","slope","intercept","coefficients","checkArrayLength","slr","numerator","regress","computeX","precision","absIntercept","json","getScaledData","spectraProcessor","targetID","relative","method","ranges","calculations","targetSpectrum","getSpectrum","getSpectra","fromToIndex","targetValue","regression","scaled","currentrange","rangeFct","rangesCopy","yNormalized","resultRanges","currentRange","integration","maxPoint","parameters","calculation","formula","oneRanges","arithmeticMean","lnsum","means","percent","alreadySorted","half","theMean","theVariance","averageDeviations","stdev","quart","q1","q3","pooledVariance","vari","itemCount","itemArray","mean1","mean2","cov","s2","s3","dev","s4","weightedVariance","weightedMean","inPlace","standardDev","sumValue","_options$algorithm","algorithm","_options$sumValue","_options$maxValue","absoluteSumValue","absoluteSum","currentMaxValue","_i","sumFactor","_i2","_typeof","iterator","sequentialFill","_options","_options$from","_options$to","_options$size","normalize","NEGATIVE_INFINITY","POSITIVE_INFINITY","zone","currentZone","integral","equallySpaced","arrayXY","xLength","variant","numberOfPoints","nextExclusion","invert","unitsPerPoint","previous","currentTotal","zonesWithPoints","xResult","yResult","zoneResult","processZone","halfStep","lastStep","previousX","previousY","nextX","nextY","frontOutsideSpectra","backOutsideSpectra","currentPoints","main","equallySpacedSlot","initialOriginalStep","lastOriginalStep","sumAtMin","sumAtMax","equallySpacedSmooth","normalizedBoundary","updateNormalizedBoundary","updateNormalization","updateMemory","original","memory","total","removeOriginal","getXY","getData","xFilter","filters","ys","Stat","meanFct","std","stdFct","normed","process","getNormalized","updateRangesInfo","minPoint","SpectraProcessor","maxMemory","keepOriginal","boundaries","getNormalizationAnnotations","boundary","ignore","MIN_SAFE_INTEGER","getNormalizedBoundary","setNormalization","getNormalization","getAutocorrelation","normalizedData","getMeanData","getNormalizedText","fs","rs","allKeysObject","metum","allKeys","getMinMaxX","addFromText","force","contains","parserOptions","parseText","addFromData","addFromJcamp","parseJcamp","getMetadata","getClasses","categoriesStats","getSpectrumIndex","getMemoryInfo","removeOriginals","removeSpectrum","removeSpectraNotIn","getChart","chart","getAutocorrelationChart","autocorrelation","colorCallback","colorScale","getTrackAnnotation","showSpectrumID","getNormalizedChart","getScaledChart","memoryInfo","currentMatrix","headers","labels","header","parts","oneMeta","parseMatrix"],"mappings":"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"}